{"ast":null,"code":"import _defineProperty from \"/Users/arbus/Documents/SpaceInBrowser/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { useThree, useLoader } from '@react-three/fiber';\nimport { useEffect } from 'react';\nimport { KTX2Loader } from 'three-stdlib';\nimport { IsObject } from './useTexture.js';\nvar cdn = 'https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master';\n\nfunction useKTX2(input) {\n  var basisPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\".concat(cdn, \"/basis/\");\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  var textures = useLoader(KTX2Loader, IsObject(input) ? Object.values(input) : input, function (loader) {\n    loader.detectSupport(gl);\n    loader.setTranscoderPath(basisPath);\n  }); // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n\n  useEffect(function () {\n    var array = Array.isArray(textures) ? textures : [textures];\n    array.forEach(gl.initTexture);\n  }, [gl, textures]);\n\n  if (IsObject(input)) {\n    var keys = Object.keys(input);\n    var keyed = {};\n    keys.forEach(function (key) {\n      return Object.assign(keyed, _defineProperty({}, key, textures[keys.indexOf(key)]));\n    });\n    return keyed;\n  } else {\n    return textures;\n  }\n}\n\nuseKTX2.preload = function (url) {\n  var basisPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\".concat(cdn, \"/basis/\");\n  return useLoader.preload(KTX2Loader, url, function (loader) {\n    loader.setTranscoderPath(basisPath);\n  });\n}; // @ts-expect-error new in r3f 7.0.5\n\n\nuseKTX2.clear = function (input) {\n  return useLoader.clear(KTX2Loader, input);\n};\n\nexport { useKTX2 };","map":{"version":3,"sources":["/Users/arbus/Documents/SpaceInBrowser/node_modules/@react-three/drei/core/useKTX2.js"],"names":["useThree","useLoader","useEffect","KTX2Loader","IsObject","cdn","useKTX2","input","basisPath","gl","state","textures","Object","values","loader","detectSupport","setTranscoderPath","array","Array","isArray","forEach","initTexture","keys","keyed","key","assign","indexOf","preload","url","clear"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAEA,IAAMC,GAAG,GAAG,uDAAZ;;AACA,SAASC,OAAT,CAAiBC,KAAjB,EAAqD;AAAA,MAA7BC,SAA6B,iFAAdH,GAAc;AACnD,MAAMI,EAAE,GAAGT,QAAQ,CAAC,UAAAU,KAAK;AAAA,WAAIA,KAAK,CAACD,EAAV;AAAA,GAAN,CAAnB;AACA,MAAME,QAAQ,GAAGV,SAAS,CAACE,UAAD,EAAaC,QAAQ,CAACG,KAAD,CAAR,GAAkBK,MAAM,CAACC,MAAP,CAAcN,KAAd,CAAlB,GAAyCA,KAAtD,EAA6D,UAAAO,MAAM,EAAI;AAC/FA,IAAAA,MAAM,CAACC,aAAP,CAAqBN,EAArB;AACAK,IAAAA,MAAM,CAACE,iBAAP,CAAyBR,SAAzB;AACD,GAHyB,CAA1B,CAFmD,CAK/C;AACJ;;AAEAN,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMe,KAAK,GAAGC,KAAK,CAACC,OAAN,CAAcR,QAAd,IAA0BA,QAA1B,GAAqC,CAACA,QAAD,CAAnD;AACAM,IAAAA,KAAK,CAACG,OAAN,CAAcX,EAAE,CAACY,WAAjB;AACD,GAHQ,EAGN,CAACZ,EAAD,EAAKE,QAAL,CAHM,CAAT;;AAKA,MAAIP,QAAQ,CAACG,KAAD,CAAZ,EAAqB;AACnB,QAAMe,IAAI,GAAGV,MAAM,CAACU,IAAP,CAAYf,KAAZ,CAAb;AACA,QAAMgB,KAAK,GAAG,EAAd;AACAD,IAAAA,IAAI,CAACF,OAAL,CAAa,UAAAI,GAAG;AAAA,aAAIZ,MAAM,CAACa,MAAP,CAAcF,KAAd,sBACjBC,GADiB,EACXb,QAAQ,CAACW,IAAI,CAACI,OAAL,CAAaF,GAAb,CAAD,CADG,EAAJ;AAAA,KAAhB;AAGA,WAAOD,KAAP;AACD,GAPD,MAOO;AACL,WAAOZ,QAAP;AACD;AACF;;AAEDL,OAAO,CAACqB,OAAR,GAAkB,UAACC,GAAD;AAAA,MAAMpB,SAAN,iFAAqBH,GAArB;AAAA,SAAsCJ,SAAS,CAAC0B,OAAV,CAAkBxB,UAAlB,EAA8ByB,GAA9B,EAAmC,UAAAd,MAAM,EAAI;AACnGA,IAAAA,MAAM,CAACE,iBAAP,CAAyBR,SAAzB;AACD,GAFuD,CAAtC;AAAA,CAAlB,C,CAEI;;;AAGJF,OAAO,CAACuB,KAAR,GAAgB,UAAAtB,KAAK;AAAA,SAAIN,SAAS,CAAC4B,KAAV,CAAgB1B,UAAhB,EAA4BI,KAA5B,CAAJ;AAAA,CAArB;;AAEA,SAASD,OAAT","sourcesContent":["import { useThree, useLoader } from '@react-three/fiber';\nimport { useEffect } from 'react';\nimport { KTX2Loader } from 'three-stdlib';\nimport { IsObject } from './useTexture.js';\n\nconst cdn = 'https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master';\nfunction useKTX2(input, basisPath = `${cdn}/basis/`) {\n  const gl = useThree(state => state.gl);\n  const textures = useLoader(KTX2Loader, IsObject(input) ? Object.values(input) : input, loader => {\n    loader.detectSupport(gl);\n    loader.setTranscoderPath(basisPath);\n  }); // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n\n  useEffect(() => {\n    const array = Array.isArray(textures) ? textures : [textures];\n    array.forEach(gl.initTexture);\n  }, [gl, textures]);\n\n  if (IsObject(input)) {\n    const keys = Object.keys(input);\n    const keyed = {};\n    keys.forEach(key => Object.assign(keyed, {\n      [key]: textures[keys.indexOf(key)]\n    }));\n    return keyed;\n  } else {\n    return textures;\n  }\n}\n\nuseKTX2.preload = (url, basisPath = `${cdn}/basis/`) => useLoader.preload(KTX2Loader, url, loader => {\n  loader.setTranscoderPath(basisPath);\n}); // @ts-expect-error new in r3f 7.0.5\n\n\nuseKTX2.clear = input => useLoader.clear(KTX2Loader, input);\n\nexport { useKTX2 };\n"]},"metadata":{},"sourceType":"module"}