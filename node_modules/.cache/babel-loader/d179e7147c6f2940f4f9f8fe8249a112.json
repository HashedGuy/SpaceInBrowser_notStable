{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ImageKitReact = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === 'object' && 'default' in e ? e : {\n      'default': e\n    };\n  }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function createCommonjsModule(fn, basedir, module) {\n    return module = {\n      path: basedir,\n      exports: {},\n      require: function require(path, base) {\n        return commonjsRequire(path, base === undefined || base === null ? module.path : base);\n      }\n    }, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire() {\n    throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n\n  function emptyFunctionWithReset() {}\n\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function factoryWithThrowingShims() {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    } // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n    /**\n     * Copyright (c) 2013-present, Facebook, Inc.\n     *\n     * This source code is licensed under the MIT license found in the\n     * LICENSE file in the root directory of this source tree.\n     */\n    {\n      // By explicitly using `prop-types` you are opting into new production behavior.\n      // http://fb.me/prop-types-in-prod\n      module.exports = factoryWithThrowingShims();\n    }\n  });\n\n  function _classCallCheck$1(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties$1(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass$1(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties$1(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty$1(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys$1(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2$1(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys$1(Object(source), true).forEach(function (key) {\n          _defineProperty$1(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys$1(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var version = \"1.4.3\";\n  var errorMessages = {\n    MANDATORY_INITIALIZATION_MISSING: {\n      message: \"Missing urlEndpoint during SDK initialization\",\n      help: \"\"\n    },\n    INVALID_TRANSFORMATION_POSITION: {\n      message: \"Invalid transformationPosition parameter\",\n      help: \"\"\n    },\n    PRIVATE_KEY_CLIENT_SIDE: {\n      message: \"privateKey should not be passed on the client side\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_DATA: {\n      message: \"Missing data for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILE_PARAMETER: {\n      message: \"Missing file parameter for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILENAME_PARAMETER: {\n      message: \"Missing fileName parameter for upload\",\n      help: \"\"\n    },\n    MISSING_AUTHENTICATION_ENDPOINT: {\n      message: \"Missing authentication endpoint for upload\",\n      help: \"\"\n    },\n    MISSING_PUBLIC_KEY: {\n      message: \"Missing public key for upload\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_TIMEOUT: {\n      message: \"The authenticationEndpoint you provided timed out in 60 seconds\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to authenticationEndpoint failed due to network error\",\n      help: \"\"\n    },\n    UPLOAD_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to ImageKit upload endpoint failed due to network error\",\n      help: \"\"\n    },\n    INVALID_UPLOAD_OPTIONS: {\n      message: \"Invalid uploadOptions parameter\",\n      help: \"\"\n    }\n  };\n\n  function respond(isError, response, callback) {\n    if (typeof callback == \"function\") {\n      if (isError) {\n        callback(response, null);\n      } else {\n        callback(null, response);\n      }\n    }\n  }\n\n  var request = function request(formData, options, callback) {\n    generateSignatureToken(options, function (err, signaturObj) {\n      if (err) {\n        return respond(true, err, callback);\n      } else {\n        formData.append(\"signature\", (signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.signature) || \"\");\n        formData.append(\"expire\", String((signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.expire) || 0));\n        formData.append(\"token\", (signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.token) || \"\");\n        uploadFile(formData, function (err, responseSucessText) {\n          if (err) {\n            return respond(true, err, callback);\n          }\n\n          return respond(false, responseSucessText, callback);\n        });\n      }\n    });\n  };\n\n  var generateSignatureToken = function generateSignatureToken(options, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.timeout = 60000;\n    xhr.open('GET', options.authenticationEndpoint);\n\n    xhr.ontimeout = function (e) {\n      respond(true, errorMessages.AUTH_ENDPOINT_TIMEOUT, callback);\n    };\n\n    xhr.onerror = function () {\n      respond(true, errorMessages.AUTH_ENDPOINT_NETWORK_ERROR, callback);\n    };\n\n    xhr.onload = function () {\n      if (xhr.status === 200) {\n        try {\n          var body = JSON.parse(xhr.responseText);\n          var obj = {\n            signature: body.signature,\n            expire: body.expire,\n            token: body.token\n          };\n          respond(false, obj, callback);\n        } catch (ex) {\n          respond(true, ex, callback);\n        }\n      } else {\n        try {\n          var error = JSON.parse(xhr.responseText);\n          respond(true, error, callback);\n        } catch (ex) {\n          respond(true, ex, callback);\n        }\n      }\n    };\n\n    xhr.send();\n    return;\n  };\n\n  var uploadFile = function uploadFile(formData, callback) {\n    var uploadFileXHR = new XMLHttpRequest();\n    uploadFileXHR.open('POST', 'https://upload.imagekit.io/api/v1/files/upload');\n\n    uploadFileXHR.onerror = function () {\n      respond(true, errorMessages.UPLOAD_ENDPOINT_NETWORK_ERROR, callback);\n      return;\n    };\n\n    uploadFileXHR.onload = function () {\n      if (uploadFileXHR.status === 200) {\n        var uploadResponse = JSON.parse(uploadFileXHR.responseText);\n        callback(null, uploadResponse);\n      } else if (uploadFileXHR.status !== 200) {\n        try {\n          callback(JSON.parse(uploadFileXHR.responseText), null);\n        } catch (ex) {\n          callback(ex, null);\n        }\n      }\n    };\n\n    uploadFileXHR.send(formData);\n    return;\n  };\n\n  var upload = function upload(uploadOptions, options, callback) {\n    if (!uploadOptions) {\n      respond(true, errorMessages.INVALID_UPLOAD_OPTIONS, callback);\n      return;\n    }\n\n    if (!uploadOptions.file) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILE_PARAMETER, callback);\n      return;\n    }\n\n    if (!uploadOptions.fileName) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n      return;\n    }\n\n    if (!options.authenticationEndpoint) {\n      respond(true, errorMessages.MISSING_AUTHENTICATION_ENDPOINT, callback);\n      return;\n    }\n\n    if (!options.publicKey) {\n      respond(true, errorMessages.MISSING_PUBLIC_KEY, callback);\n      return;\n    }\n\n    if (uploadOptions.tags && Array.isArray(uploadOptions.tags)) {\n      uploadOptions.tags = String(uploadOptions.tags);\n    }\n\n    var formData = new FormData();\n    var i;\n\n    for (i in uploadOptions) {\n      var param = uploadOptions[i];\n\n      if (typeof param !== \"undefined\") {\n        if (typeof param === \"string\" || typeof param === \"boolean\") {\n          formData.append(i, String(param));\n        } else if (Array.isArray(param)) {\n          formData.append(i, JSON.stringify(param));\n        } else {\n          formData.append(i, param);\n        }\n      }\n    }\n\n    formData.append(\"publicKey\", options.publicKey);\n    request(formData, _objectSpread2$1(_objectSpread2$1({}, options), {}, {\n      authenticationEndpoint: options.authenticationEndpoint\n    }), callback);\n  };\n\n  var supportedTransforms = {\n    width: \"w\",\n    height: \"h\",\n    aspectRatio: \"ar\",\n    quality: \"q\",\n    crop: \"c\",\n    cropMode: \"cm\",\n    focus: \"fo\",\n    x: \"x\",\n    y: \"y\",\n    format: \"f\",\n    radius: \"r\",\n    background: \"bg\",\n    border: \"b\",\n    rotation: \"rt\",\n    rotate: \"rt\",\n    blur: \"bl\",\n    named: \"n\",\n    overlayImage: \"oi\",\n    overlayImageAspectRatio: \"oiar\",\n    overlayImageBackground: \"oibg\",\n    overlayImageBorder: \"oib\",\n    overlayImageDPR: \"oidpr\",\n    overlayImageQuality: \"oiq\",\n    overlayImageCropping: \"oic\",\n    overlayImageTrim: \"oit\",\n    overlayX: \"ox\",\n    overlayY: \"oy\",\n    overlayFocus: \"ofo\",\n    overlayHeight: \"oh\",\n    overlayWidth: \"ow\",\n    overlayText: \"ot\",\n    overlayTextFontSize: \"ots\",\n    overlayTextFontFamily: \"otf\",\n    overlayTextColor: \"otc\",\n    overlayTextTransparency: \"oa\",\n    overlayAlpha: \"oa\",\n    overlayTextTypography: \"ott\",\n    overlayBackground: \"obg\",\n    overlayTextEncoded: \"ote\",\n    overlayTextWidth: \"otw\",\n    overlayTextBackground: \"otbg\",\n    overlayTextPadding: \"otp\",\n    overlayTextInnerAlignment: \"otia\",\n    overlayRadius: \"or\",\n    progressive: \"pr\",\n    lossless: \"lo\",\n    trim: \"t\",\n    metadata: \"md\",\n    colorProfile: \"cp\",\n    defaultImage: \"di\",\n    dpr: \"dpr\",\n    effectSharpen: \"e-sharpen\",\n    effectUSM: \"e-usm\",\n    effectContrast: \"e-contrast\",\n    effectGray: \"e-grayscale\",\n    original: \"orig\"\n  };\n  var DEFAULT_TRANSFORMATION_POSITION = \"path\";\n  var QUERY_TRANSFORMATION_POSITION = \"query\";\n  var VALID_TRANSFORMATION_POSITIONS = [DEFAULT_TRANSFORMATION_POSITION, QUERY_TRANSFORMATION_POSITION];\n  var CHAIN_TRANSFORM_DELIMITER = \":\";\n  var TRANSFORM_DELIMITER = \",\";\n  var TRANSFORM_KEY_VALUE_DELIMITER = \"-\";\n  var transformationUtils = {\n    getDefault: function getDefault() {\n      return DEFAULT_TRANSFORMATION_POSITION;\n    },\n    addAsQueryParameter: function addAsQueryParameter(options) {\n      return options.transformationPosition === QUERY_TRANSFORMATION_POSITION;\n    },\n    validParameters: function validParameters(options) {\n      if (typeof options.transformationPosition == \"undefined\") return false;\n      return VALID_TRANSFORMATION_POSITIONS.indexOf(options.transformationPosition) != -1;\n    },\n    getTransformKey: function getTransformKey(transform) {\n      if (!transform) {\n        return \"\";\n      }\n\n      return supportedTransforms[transform] || supportedTransforms[transform.toLowerCase()] || \"\";\n    },\n    getChainTransformDelimiter: function getChainTransformDelimiter() {\n      return CHAIN_TRANSFORM_DELIMITER;\n    },\n    getTransformDelimiter: function getTransformDelimiter() {\n      return TRANSFORM_DELIMITER;\n    },\n    getTransformKeyValueDelimiter: function getTransformKeyValueDelimiter() {\n      return TRANSFORM_KEY_VALUE_DELIMITER;\n    }\n  };\n  var TRANSFORMATION_PARAMETER = \"tr\";\n\n  function removeTrailingSlash(str) {\n    if (typeof str == \"string\" && str[str.length - 1] == \"/\") {\n      str = str.substring(0, str.length - 1);\n    }\n\n    return str;\n  }\n\n  function removeLeadingSlash(str) {\n    if (typeof str == \"string\" && str[0] == \"/\") {\n      str = str.slice(1);\n    }\n\n    return str;\n  }\n\n  function pathJoin(parts, sep) {\n    var separator = sep || \"/\";\n    var replace = new RegExp(separator + \"{1,}\", \"g\");\n    return parts.join(separator).replace(replace, separator);\n  }\n\n  var buildURL = function buildURL(opts) {\n    if (!opts.path && !opts.src) {\n      return \"\";\n    }\n\n    var urlObj, isSrcParameterUsedForURL, urlEndpointPattern;\n\n    try {\n      if (opts.path) {\n        urlEndpointPattern = new URL(opts.urlEndpoint).pathname;\n        urlObj = new URL(pathJoin([opts.urlEndpoint.replace(urlEndpointPattern, \"\"), opts.path]));\n      } else {\n        urlObj = new URL(opts.src);\n        isSrcParameterUsedForURL = true;\n      }\n    } catch (e) {\n      console.error(e);\n      return \"\";\n    }\n\n    if (opts.sdkVersion && opts.sdkVersion.trim() != \"\") {\n      urlObj.searchParams.append(\"ik-sdk-version\", opts.sdkVersion.trim());\n    }\n\n    for (var i in opts.queryParameters) {\n      urlObj.searchParams.append(i, String(opts.queryParameters[i]));\n    }\n\n    var transformationString = constructTransformationString(opts.transformation);\n\n    if (transformationString && transformationString.length) {\n      if (transformationUtils.addAsQueryParameter(opts) || isSrcParameterUsedForURL) {\n        urlObj.searchParams.append(TRANSFORMATION_PARAMETER, transformationString);\n      } else {\n        urlObj.pathname = pathJoin([TRANSFORMATION_PARAMETER + transformationUtils.getChainTransformDelimiter() + transformationString, urlObj.pathname]);\n      }\n    }\n\n    if (urlEndpointPattern) {\n      urlObj.pathname = pathJoin([urlEndpointPattern, urlObj.pathname]);\n    } else {\n      urlObj.pathname = pathJoin([urlObj.pathname]);\n    }\n\n    return urlObj.href;\n  };\n\n  function constructTransformationString(transformation) {\n    if (!Array.isArray(transformation)) {\n      return \"\";\n    }\n\n    var parsedTransforms = [];\n\n    for (var i = 0, l = transformation.length; i < l; i++) {\n      var parsedTransformStep = [];\n\n      for (var key in transformation[i]) {\n        var transformKey = transformationUtils.getTransformKey(key);\n\n        if (!transformKey) {\n          transformKey = key;\n        }\n\n        if (transformation[i][key] === \"-\") {\n          parsedTransformStep.push(transformKey);\n        } else if (key === \"raw\") {\n          parsedTransformStep.push(transformation[i][key]);\n        } else {\n          var value = transformation[i][key];\n\n          if (transformKey === \"oi\" || transformKey === \"di\") {\n            value = removeTrailingSlash(removeLeadingSlash(value || \"\"));\n            value = value.replace(/\\//g, \"@@\");\n          }\n\n          parsedTransformStep.push([transformKey, value].join(transformationUtils.getTransformKeyValueDelimiter()));\n        }\n      }\n\n      parsedTransforms.push(parsedTransformStep.join(transformationUtils.getTransformDelimiter()));\n    }\n\n    return parsedTransforms.join(transformationUtils.getChainTransformDelimiter());\n  }\n\n  var url = function url(urlOpts, defaultOptions) {\n    return buildURL(_objectSpread2$1(_objectSpread2$1({}, defaultOptions), urlOpts));\n  };\n\n  function mandatoryParametersAvailable(options) {\n    return options.urlEndpoint;\n  }\n\n  function privateKeyPassed(options) {\n    return typeof options.privateKey != \"undefined\";\n  }\n\n  var ImageKit = function () {\n    function ImageKit(opts) {\n      _classCallCheck$1(this, ImageKit);\n\n      _defineProperty$1(this, \"options\", {\n        sdkVersion: \"javascript-\".concat(version),\n        publicKey: \"\",\n        urlEndpoint: \"\",\n        transformationPosition: transformationUtils.getDefault()\n      });\n\n      this.options = _objectSpread2$1(_objectSpread2$1({}, this.options), opts || {});\n\n      if (!mandatoryParametersAvailable(this.options)) {\n        throw errorMessages.MANDATORY_INITIALIZATION_MISSING;\n      }\n\n      if (privateKeyPassed(this.options)) {\n        throw errorMessages.PRIVATE_KEY_CLIENT_SIDE;\n      }\n\n      if (!transformationUtils.validParameters(this.options)) {\n        throw errorMessages.INVALID_TRANSFORMATION_POSITION;\n      }\n    }\n\n    _createClass$1(ImageKit, [{\n      key: \"url\",\n      value: function url$1(urlOptions) {\n        return url(urlOptions, this.options);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload$1(uploadOptions, callback, options) {\n        var mergedOptions = _objectSpread2$1(_objectSpread2$1({}, this.options), options);\n\n        return upload(uploadOptions, mergedOptions, callback);\n      }\n    }]);\n\n    return ImageKit;\n  }();\n\n  var ImageKitContextType = /*#__PURE__*/React.createContext();\n  var name = \"imagekitio-react\";\n  var version$1 = \"1.1.0\";\n  var description = \"React SDK for ImageKit.io which implements client-side upload and URL generation for use inside a react application.\";\n  var scripts = {\n    build: \"rm -rf dist*;rollup -c\",\n    test: \"jest\",\n    \"test:ci\": \"jest --coverage && codecov\",\n    \"test:cov\": \"jest --coverage\",\n    \"test:e2e\": \"cypress open\",\n    \"test:watch\": \"jest --watch\",\n    \"serve:test-app\": \"export SKIP_PREFLIGHT_CHECK=true;npx serve -s tests/test-app/build -p 4000\"\n  };\n  var repository = {\n    type: \"git\",\n    url: \"https://github.com/imagekit-developer/imagekit-react\"\n  };\n  var main = \"dist/imagekitio-react.js\";\n  var module = \"dist/imagekitio-react.esm.js\";\n  var browser = \"dist/imagekitio-react.umd.js\";\n  var files = [\"dist\", \"src\"];\n  var jest = {\n    verbose: true,\n    setupFilesAfterEnv: [\"<rootDir>/tests/jest/setupTests.js\"],\n    coveragePathIgnorePatterns: [\"<rootDir>/tests/jest/mocks\"],\n    modulePathIgnorePatterns: [\"<rootDir>/tests/cypress/\"]\n  };\n  var author = \"ImageKit\";\n  var license = \"MIT\";\n  var devDependencies = {\n    \"@babel/cli\": \"^7.7.4\",\n    \"@babel/core\": \"^7.7.4\",\n    \"@babel/plugin-proposal-class-properties\": \"^7.7.4\",\n    \"@babel/plugin-proposal-export-default-from\": \"^7.7.4\",\n    \"@babel/preset-env\": \"^7.7.4\",\n    \"@babel/preset-react\": \"^7.7.4\",\n    \"@babel/register\": \"^7.7.4\",\n    \"@babel/runtime\": \"^7.7.6\",\n    \"@rollup/plugin-babel\": \"^5.2.1\",\n    \"@rollup/plugin-commonjs\": \"^15.1.0\",\n    \"@rollup/plugin-json\": \"^4.1.0\",\n    \"@rollup/plugin-replace\": \"^2.3.3\",\n    \"babel-loader\": \"^8.0.6\",\n    codecov: \"^3.8.0\",\n    cypress: \"^5.6.0\",\n    enzyme: \"^3.11.0\",\n    \"enzyme-adapter-react-16\": \"^1.15.5\",\n    jest: \"^26.5.2\",\n    react: \"^16.13.1\",\n    \"react-dom\": \"^16.13.1\",\n    \"react-test-renderer\": \"^16.13.1\",\n    \"require-context.macro\": \"^1.2.2\",\n    rollup: \"^2.28.2\",\n    \"rollup-plugin-node-resolve\": \"^5.2.0\",\n    \"rollup-plugin-peer-deps-external\": \"^2.2.3\",\n    \"rollup-plugin-terser\": \"^7.0.2\",\n    sinon: \"^9.2.0\"\n  };\n  var dependencies = {\n    \"imagekit-javascript\": \"^1.3.6\",\n    \"prop-types\": \"^15.7.2\"\n  };\n  var peerDependencies = {\n    react: \"^16.13.1 || ^17.0.0\",\n    \"react-dom\": \"^16.13.1 || ^17.0.0\"\n  };\n  var pkg = {\n    name: name,\n    version: version$1,\n    description: description,\n    scripts: scripts,\n    repository: repository,\n    main: main,\n    module: module,\n    browser: browser,\n    \"browser:min\": \"dist/imagekitio-react.umd.min.js\",\n    files: files,\n    jest: jest,\n    author: author,\n    license: license,\n    devDependencies: devDependencies,\n    dependencies: dependencies,\n    peerDependencies: peerDependencies\n  };\n\n  var ImageKitComponent = /*#__PURE__*/function (_PureComponent) {\n    _inherits(ImageKitComponent, _PureComponent);\n\n    var _super = _createSuper(ImageKitComponent);\n\n    function ImageKitComponent(props, context) {\n      var _this;\n\n      _classCallCheck(this, ImageKitComponent);\n\n      _this = _super.call(this, props, context);\n      _this.getContext = _this.getContext.bind(_assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass(ImageKitComponent, [{\n      key: \"getVersion\",\n      value: function getVersion() {\n        return pkg.version;\n      }\n    }, {\n      key: \"getContext\",\n      value: function getContext() {\n        return this.context || {};\n      }\n    }, {\n      key: \"getIKClient\",\n      value: function getIKClient() {\n        var contextOptions = this.getContext();\n\n        if (contextOptions.ikClient) {\n          return contextOptions.ikClient;\n        }\n\n        var urlEndpoint = this.props.urlEndpoint;\n        urlEndpoint = urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          throw new Error(\"Missing urlEndpoint during initialization\");\n        }\n\n        var ikClient = new ImageKit({\n          sdkVersion: \"react-\".concat(this.getVersion()),\n          urlEndpoint: urlEndpoint\n        });\n        return ikClient;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return null;\n      }\n    }]);\n\n    return ImageKitComponent;\n  }(React.PureComponent);\n\n  ImageKitComponent.contextType = ImageKitContextType;\n  var COMMON_PROPS = {\n    publicKey: propTypes.string,\n    urlEndpoint: propTypes.string,\n    authenticationEndpoint: propTypes.string\n  };\n  var IK_IMAGE_PROPS = {\n    loading: propTypes.oneOf(['lazy']),\n    lqip: propTypes.object,\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.object,\n    transformation: propTypes.arrayOf(propTypes.object),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n  var IK_UPLOAD_PROPS = {\n    fileName: propTypes.string,\n    tags: propTypes.array,\n    useUniqueFileName: propTypes.bool,\n    responseFields: propTypes.array,\n    isPrivateFile: propTypes.bool,\n    folder: propTypes.string,\n    customCoordinates: propTypes.string,\n    onError: propTypes.func,\n    onSuccess: propTypes.func\n  };\n\n  var PROP_TYPES = _objectSpread2(_objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_IMAGE_PROPS), IK_UPLOAD_PROPS);\n  /**\n   * Provides a container for ImageKit components. Any option set in IKContext will be passed to the children.\n   *\n   * @example\n   *<IKContext  publicKey=\"<public key>\" urlEndpoint=\"url link\">\n   *    <!-- other tags -->\n   *    <Image src={link}/>\n   *</IKContext>\n   */\n\n\n  var IKContext = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKContext, _ImageKitComponent);\n\n    var _super = _createSuper(IKContext);\n\n    function IKContext() {\n      _classCallCheck(this, IKContext);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(IKContext, [{\n      key: \"extractContextOptions\",\n      value: function extractContextOptions(mergedOptions) {\n        var result = {};\n        var propKeys = Object.keys(PROP_TYPES);\n\n        for (var i = 0; i < propKeys.length; i++) {\n          var key = propKeys[i];\n          var value = mergedOptions[key];\n          if (value) result[key] = value;\n        }\n\n        return result;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var children = this.props.children;\n\n        var mergedOptions = _objectSpread2(_objectSpread2({}, this.getContext()), this.props);\n\n        var contextOptions = this.extractContextOptions(mergedOptions);\n\n        if (contextOptions.urlEndpoint && contextOptions.urlEndpoint.trim() !== \"\") {\n          contextOptions.ikClient = new ImageKit({\n            sdkVersion: \"react-\".concat(this.getVersion()),\n            urlEndpoint: contextOptions.urlEndpoint\n          });\n        }\n\n        return /*#__PURE__*/React__default['default'].createElement(ImageKitContextType.Provider, {\n          value: contextOptions\n        }, children);\n      }\n    }]);\n\n    return IKContext;\n  }(ImageKitComponent);\n\n  IKContext.propTypes = PROP_TYPES;\n  IKContext.contextType = ImageKitContextType;\n\n  var PROP_TYPES$1 = _objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_IMAGE_PROPS);\n\n  var propsAffectingURL = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n\n  var IKImage = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKImage, _ImageKitComponent);\n\n    var _super = _createSuper(IKImage);\n\n    function IKImage(props, context) {\n      var _this;\n\n      _classCallCheck(this, IKImage);\n\n      _this = _super.call(this, props, context);\n      _this.imageRef = /*#__PURE__*/React__default['default'].createRef();\n\n      var _this$getSrc = _this.getSrc(),\n          originalSrc = _this$getSrc.originalSrc,\n          lqipSrc = _this$getSrc.lqipSrc;\n\n      _this.state = {\n        currentUrl: undefined,\n        originalSrc: originalSrc,\n        lqipSrc: lqipSrc,\n        originalSrcLoaded: false,\n        intersected: false,\n        contextOptions: {}\n      };\n      return _this;\n    }\n\n    _createClass(IKImage, [{\n      key: \"getSrc\",\n      value: function getSrc() {\n        var result = {};\n        var _this$props = this.props,\n            lqip = _this$props.lqip,\n            src = _this$props.src,\n            path = _this$props.path,\n            transformation = _this$props.transformation,\n            transformationPosition = _this$props.transformationPosition,\n            queryParameters = _this$props.queryParameters;\n        var ikClient = this.getIKClient();\n        var contextOptions = this.getContext();\n        var options = {\n          urlEndpoint: this.props.urlEndpoint || contextOptions.urlEndpoint,\n          src: src || contextOptions.src,\n          path: path || contextOptions.path,\n          transformation: transformation || contextOptions.transformation,\n          transformationPosition: transformationPosition || contextOptions.transformationPosition,\n          queryParameters: queryParameters || contextOptions.queryParameters\n        };\n        result.originalSrc = ikClient.url(options);\n\n        if (lqip && lqip.active) {\n          var quality = parseInt(lqip.quality || lqip.threshold, 10) || 20;\n          var blur = parseInt(lqip.blur || lqip.blur, 10) || 6;\n          var newTransformation = options.transformation ? _toConsumableArray(options.transformation) : [];\n\n          if (lqip.raw && typeof lqip.raw === \"string\" && lqip.raw.trim() != \"\") {\n            newTransformation.push({\n              raw: lqip.raw.trim()\n            });\n          } else {\n            newTransformation.push({\n              quality: quality,\n              blur: blur\n            });\n          }\n\n          result.lqipSrc = ikClient.url(_objectSpread2(_objectSpread2({}, options), {}, {\n            transformation: newTransformation\n          }));\n        }\n\n        return result;\n      }\n    }, {\n      key: \"getEffectiveConnection\",\n      value: function getEffectiveConnection() {\n        try {\n          return navigator.connection.effectiveType;\n        } catch (ex) {\n          return \"4g\";\n        }\n      }\n    }, {\n      key: \"updateImageUrl\",\n      value: function updateImageUrl() {\n        /*\n          No lazy loading no lqip\n            src=originalImage\n          No lazy loading lqip\n            src=lqip\n            src=originalImage (when loaded)\n          lazy loading and no lqip\n            src=''\n            onIntersect:\n            src=originalImage\n          lazy loading and lqip\n            src=lqip\n            onIntersect:\n            src=originalImage (when loaded)\n        */\n        var _this$state = this.state,\n            intersected = _this$state.intersected,\n            originalSrcLoaded = _this$state.originalSrcLoaded;\n        var _this$props2 = this.props,\n            _this$props2$lqip = _this$props2.lqip,\n            lqip = _this$props2$lqip === void 0 ? null : _this$props2$lqip,\n            loading = _this$props2.loading;\n\n        if (loading !== \"lazy\" && lqip === null) {\n          this.setState({\n            currentUrl: this.state.originalSrc\n          });\n        } else if (loading !== \"lazy\" && lqip && lqip.active) {\n          if (originalSrcLoaded) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: this.state.lqipSrc\n            });\n          }\n        } else if (loading === \"lazy\" && lqip === null) {\n          if (intersected) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: \"\"\n            });\n          }\n        } else if (loading === \"lazy\" && lqip && lqip.active) {\n          if (intersected && originalSrcLoaded) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: this.state.lqipSrc\n            });\n          }\n        }\n      }\n    }, {\n      key: \"triggerOriginalImageLoad\",\n      value: function triggerOriginalImageLoad() {\n        var _this2 = this;\n\n        var img = new Image();\n\n        img.onload = function () {\n          _this2.setState({\n            originalSrcLoaded: true\n          }, function () {\n            _this2.updateImageUrl();\n          });\n        };\n\n        img.src = this.state.originalSrc;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this3 = this;\n\n        this.updateImageUrl();\n        this.setState({\n          contextOptions: this.getContext()\n        });\n        var image = this.imageRef.current;\n        var _this$props3 = this.props,\n            lqip = _this$props3.lqip,\n            loading = _this$props3.loading;\n\n        if (window && 'IntersectionObserver' in window && loading === \"lazy\") {\n          var connectionType = this.getEffectiveConnection(); // Values based on native lazy loading in Chrome - https://web.dev/native-lazy-loading/#improved-data-savings-and-distance-from-viewport-thresholds\n\n          var rootMargin = \"1250px\";\n          if (connectionType !== \"4g\") rootMargin = \"2500px\";\n          var imageObserver = new IntersectionObserver(function (entries) {\n            var el = entries[0];\n\n            if (el && el.isIntersecting) {\n              _this3.setState({\n                intersected: true\n              }, function () {\n                if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n                imageObserver.disconnect();\n\n                _this3.updateImageUrl();\n              });\n            }\n          }, {\n            rootMargin: \"\".concat(rootMargin, \" 0px \").concat(rootMargin, \" 0px\")\n          });\n          imageObserver.observe(image);\n          this.setState({\n            observe: imageObserver\n          });\n        } else {\n          // Load original image right away\n          this.setState({\n            intersected: true\n          }, function () {\n            if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n\n            _this3.updateImageUrl();\n          });\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var observe = this.state.observe;\n        if (observe) observe.disconnect();\n      }\n    }, {\n      key: \"areObjectsDifferent\",\n      value: function areObjectsDifferent(prevProps, newProps) {\n        for (var index = 0; index < propsAffectingURL.length; index++) {\n          if (prevProps[propsAffectingURL[index]] != newProps[propsAffectingURL[index]]) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this4 = this;\n\n        var contextOptions = this.getContext();\n\n        if (this.areObjectsDifferent(prevProps, this.props) || this.areObjectsDifferent(prevState.contextOptions, contextOptions)) {\n          var _this$getSrc2 = this.getSrc(),\n              originalSrc = _this$getSrc2.originalSrc,\n              lqipSrc = _this$getSrc2.lqipSrc;\n\n          this.setState({\n            originalSrc: originalSrc,\n            lqipSrc: lqipSrc\n          }, function () {\n            _this4.updateImageUrl();\n\n            _this4.setState({\n              contextOptions: _this4.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n\n        var _this$props4 = this.props,\n            urlEndpoint = _this$props4.urlEndpoint,\n            loading = _this$props4.loading,\n            lqip = _this$props4.lqip,\n            path = _this$props4.path,\n            src = _this$props4.src,\n            transformation = _this$props4.transformation,\n            transformationPosition = _this$props4.transformationPosition,\n            queryParameters = _this$props4.queryParameters,\n            restProps = _objectWithoutProperties(_this$props4, [\"urlEndpoint\", \"loading\", \"lqip\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"img\", _extends({\n          alt: this.props.alt || \"\",\n          src: currentUrl,\n          ref: this.imageRef\n        }, restProps));\n      }\n    }]);\n\n    return IKImage;\n  }(ImageKitComponent);\n\n  IKImage.propTypes = PROP_TYPES$1;\n\n  var PROP_TYPES$2 = _objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_UPLOAD_PROPS);\n\n  var IKUpload = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKUpload, _ImageKitComponent);\n\n    var _super = _createSuper(IKUpload);\n\n    function IKUpload() {\n      _classCallCheck(this, IKUpload);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(IKUpload, [{\n      key: \"uploadFile\",\n      value: function uploadFile(e) {\n        var contextOptions = this.getContext();\n        var _this$props = this.props,\n            fileName = _this$props.fileName,\n            useUniqueFileName = _this$props.useUniqueFileName,\n            tags = _this$props.tags,\n            folder = _this$props.folder,\n            isPrivateFile = _this$props.isPrivateFile,\n            customCoordinates = _this$props.customCoordinates,\n            responseFields = _this$props.responseFields,\n            onError = _this$props.onError,\n            onSuccess = _this$props.onSuccess;\n        var publicKey = this.props.publicKey || contextOptions.publicKey;\n        var authenticationEndpoint = this.props.authenticationEndpoint || contextOptions.authenticationEndpoint;\n        var urlEndpoint = this.props.urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!publicKey || publicKey.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing publicKey\"\n            });\n          }\n\n          return;\n        }\n\n        if (!authenticationEndpoint || authenticationEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing authenticationEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing urlEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        var ikClient = this.getIKClient();\n        var file = e.target.files[0];\n        var params = {\n          file: file,\n          fileName: fileName || file.name,\n          useUniqueFileName: useUniqueFileName,\n          tags: tags,\n          folder: folder,\n          isPrivateFile: isPrivateFile,\n          customCoordinates: customCoordinates,\n          responseFields: responseFields\n        };\n        ikClient.upload(params, function (err, result) {\n          if (err) {\n            if (onError && typeof onError === \"function\") {\n              onError(err);\n            }\n          } else {\n            if (onSuccess && typeof onSuccess === \"function\") {\n              onSuccess(result);\n            }\n          }\n        }, {\n          publicKey: publicKey,\n          authenticationEndpoint: authenticationEndpoint\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this = this;\n\n        var _this$props2 = this.props,\n            publicKey = _this$props2.publicKey,\n            urlEndpoint = _this$props2.urlEndpoint,\n            authenticationEndpoint = _this$props2.authenticationEndpoint,\n            fileName = _this$props2.fileName,\n            useUniqueFileName = _this$props2.useUniqueFileName,\n            tags = _this$props2.tags,\n            folder = _this$props2.folder,\n            isPrivateFile = _this$props2.isPrivateFile,\n            customCoordinates = _this$props2.customCoordinates,\n            responseFields = _this$props2.responseFields,\n            onError = _this$props2.onError,\n            onSuccess = _this$props2.onSuccess,\n            restProps = _objectWithoutProperties(_this$props2, [\"publicKey\", \"urlEndpoint\", \"authenticationEndpoint\", \"fileName\", \"useUniqueFileName\", \"tags\", \"folder\", \"isPrivateFile\", \"customCoordinates\", \"responseFields\", \"onError\", \"onSuccess\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"input\", _extends({\n          type: \"file\"\n        }, restProps, {\n          onChange: function onChange(e) {\n            if (_this.props.onChange && typeof _this.props.onChange === \"function\") {\n              _this.props.onChange(e);\n            }\n\n            _this.uploadFile(e);\n          }\n        }));\n      }\n    }]);\n\n    return IKUpload;\n  }(ImageKitComponent);\n\n  IKUpload.defaultProps = {\n    useUniqueFileName: true,\n    isPrivateFile: false,\n    customCoordinates: \"\",\n    tags: [],\n    folder: \"/\",\n    responseFields: []\n  };\n  IKUpload.propTypes = PROP_TYPES$2;\n  exports.IKContext = IKContext;\n  exports.IKImage = IKImage;\n  exports.IKUpload = IKUpload;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/Users/arbus/Documents/SpaceInBrowser/node_modules/imagekitio-react/dist/imagekitio-react.umd.js"],"names":["global","factory","exports","module","require","define","amd","globalThis","self","ImageKitReact","React","_interopDefaultLegacy","e","React__default","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_extends","assign","arguments","source","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","Symbol","iterator","from","minLen","n","slice","name","test","len","arr2","createCommonjsModule","fn","basedir","path","base","commonjsRequire","undefined","Error","ReactPropTypesSecret","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","location","propFullName","secret","err","isRequired","getShim","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","propTypes","_classCallCheck$1","_defineProperties$1","_createClass$1","_defineProperty$1","ownKeys$1","_objectSpread2$1","version","errorMessages","MANDATORY_INITIALIZATION_MISSING","message","help","INVALID_TRANSFORMATION_POSITION","PRIVATE_KEY_CLIENT_SIDE","MISSING_UPLOAD_DATA","MISSING_UPLOAD_FILE_PARAMETER","MISSING_UPLOAD_FILENAME_PARAMETER","MISSING_AUTHENTICATION_ENDPOINT","MISSING_PUBLIC_KEY","AUTH_ENDPOINT_TIMEOUT","AUTH_ENDPOINT_NETWORK_ERROR","UPLOAD_ENDPOINT_NETWORK_ERROR","INVALID_UPLOAD_OPTIONS","respond","isError","response","callback","request","formData","options","generateSignatureToken","signaturObj","append","signature","String","expire","token","uploadFile","responseSucessText","xhr","XMLHttpRequest","timeout","open","authenticationEndpoint","ontimeout","onerror","onload","status","body","JSON","parse","responseText","ex","error","send","uploadFileXHR","uploadResponse","upload","uploadOptions","file","fileName","publicKey","tags","FormData","param","stringify","supportedTransforms","width","height","aspectRatio","quality","crop","cropMode","focus","x","y","format","radius","background","border","rotation","rotate","blur","named","overlayImage","overlayImageAspectRatio","overlayImageBackground","overlayImageBorder","overlayImageDPR","overlayImageQuality","overlayImageCropping","overlayImageTrim","overlayX","overlayY","overlayFocus","overlayHeight","overlayWidth","overlayText","overlayTextFontSize","overlayTextFontFamily","overlayTextColor","overlayTextTransparency","overlayAlpha","overlayTextTypography","overlayBackground","overlayTextEncoded","overlayTextWidth","overlayTextBackground","overlayTextPadding","overlayTextInnerAlignment","overlayRadius","progressive","lossless","trim","metadata","colorProfile","defaultImage","dpr","effectSharpen","effectUSM","effectContrast","effectGray","original","DEFAULT_TRANSFORMATION_POSITION","QUERY_TRANSFORMATION_POSITION","VALID_TRANSFORMATION_POSITIONS","CHAIN_TRANSFORM_DELIMITER","TRANSFORM_DELIMITER","TRANSFORM_KEY_VALUE_DELIMITER","transformationUtils","getDefault","addAsQueryParameter","transformationPosition","validParameters","getTransformKey","transform","toLowerCase","getChainTransformDelimiter","getTransformDelimiter","getTransformKeyValueDelimiter","TRANSFORMATION_PARAMETER","removeTrailingSlash","str","substring","removeLeadingSlash","pathJoin","parts","sep","separator","replace","RegExp","join","buildURL","opts","src","urlObj","isSrcParameterUsedForURL","urlEndpointPattern","URL","urlEndpoint","pathname","console","sdkVersion","searchParams","queryParameters","transformationString","constructTransformationString","transformation","href","parsedTransforms","l","parsedTransformStep","transformKey","url","urlOpts","defaultOptions","mandatoryParametersAvailable","privateKeyPassed","privateKey","ImageKit","concat","url$1","urlOptions","upload$1","mergedOptions","ImageKitContextType","createContext","version$1","description","scripts","build","repository","type","main","browser","files","jest","verbose","setupFilesAfterEnv","coveragePathIgnorePatterns","modulePathIgnorePatterns","author","license","devDependencies","codecov","cypress","enzyme","react","rollup","sinon","dependencies","peerDependencies","pkg","ImageKitComponent","_PureComponent","_super","context","_this","getContext","bind","getVersion","getIKClient","contextOptions","ikClient","render","PureComponent","contextType","COMMON_PROPS","IK_IMAGE_PROPS","loading","lqip","IK_UPLOAD_PROPS","useUniqueFileName","responseFields","isPrivateFile","folder","customCoordinates","onError","onSuccess","PROP_TYPES","IKContext","_ImageKitComponent","extractContextOptions","propKeys","children","createElement","Provider","PROP_TYPES$1","propsAffectingURL","IKImage","imageRef","createRef","_this$getSrc","getSrc","originalSrc","lqipSrc","state","currentUrl","originalSrcLoaded","intersected","_this$props","active","parseInt","threshold","newTransformation","raw","getEffectiveConnection","navigator","connection","effectiveType","updateImageUrl","_this$state","_this$props2","_this$props2$lqip","setState","triggerOriginalImageLoad","_this2","img","Image","componentDidMount","_this3","image","current","_this$props3","window","connectionType","rootMargin","imageObserver","IntersectionObserver","entries","el","isIntersecting","disconnect","observe","componentWillUnmount","areObjectsDifferent","prevProps","newProps","index","componentDidUpdate","prevState","_this4","_this$getSrc2","_this$props4","restProps","alt","ref","PROP_TYPES$2","IKUpload","params","onChange","defaultProps"],"mappings":"AAAC,WAAUA,MAAV,EAAkBC,OAAlB,EAA2B;AAC1B,SAAOC,OAAP,KAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAAjD,GAA+DF,OAAO,CAACC,OAAD,EAAUE,OAAO,CAAC,OAAD,CAAjB,CAAtE,GACA,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAAvC,GAA6CD,MAAM,CAAC,CAAC,SAAD,EAAY,OAAZ,CAAD,EAAuBJ,OAAvB,CAAnD,IACCD,MAAM,GAAG,OAAOO,UAAP,KAAsB,WAAtB,GAAoCA,UAApC,GAAiDP,MAAM,IAAIQ,IAApE,EAA0EP,OAAO,CAACD,MAAM,CAACS,aAAP,GAAuB,EAAxB,EAA4BT,MAAM,CAACU,KAAnC,CADlF,CADA;AAGD,CAJA,EAIC,IAJD,EAIQ,UAAUR,OAAV,EAAmBQ,KAAnB,EAA0B;AAAE;;AAEnC,WAASC,qBAAT,CAAgCC,CAAhC,EAAmC;AAAE,WAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;AAAE,iBAAWA;AAAb,KAA1D;AAA6E;;AAElH,MAAIC,cAAc,GAAG,aAAaF,qBAAqB,CAACD,KAAD,CAAvD;;AAEA,WAASI,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAC9C,QAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACtC,YAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACD;AACF;;AAED,WAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AACxC,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AACAE,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AACAD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AACA,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAC3BC,MAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BI,UAAU,CAACM,GAAzC,EAA8CN,UAA9C;AACD;AACF;;AAED,WAASO,YAAT,CAAsBd,WAAtB,EAAmCe,UAAnC,EAA+CC,WAA/C,EAA4D;AAC1D,QAAID,UAAJ,EAAgBb,iBAAiB,CAACF,WAAW,CAACiB,SAAb,EAAwBF,UAAxB,CAAjB;AAChB,QAAIC,WAAJ,EAAiBd,iBAAiB,CAACF,WAAD,EAAcgB,WAAd,CAAjB;AACjB,WAAOhB,WAAP;AACD;;AAED,WAASkB,eAAT,CAAyBC,GAAzB,EAA8BN,GAA9B,EAAmCO,KAAnC,EAA0C;AACxC,QAAIP,GAAG,IAAIM,GAAX,EAAgB;AACdR,MAAAA,MAAM,CAACC,cAAP,CAAsBO,GAAtB,EAA2BN,GAA3B,EAAgC;AAC9BO,QAAAA,KAAK,EAAEA,KADuB;AAE9BZ,QAAAA,UAAU,EAAE,IAFkB;AAG9BC,QAAAA,YAAY,EAAE,IAHgB;AAI9BC,QAAAA,QAAQ,EAAE;AAJoB,OAAhC;AAMD,KAPD,MAOO;AACLS,MAAAA,GAAG,CAACN,GAAD,CAAH,GAAWO,KAAX;AACD;;AAED,WAAOD,GAAP;AACD;;AAED,WAASE,QAAT,GAAoB;AAClBA,IAAAA,QAAQ,GAAGV,MAAM,CAACW,MAAP,IAAiB,UAAUnB,MAAV,EAAkB;AAC5C,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,SAAS,CAACjB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,YAAImB,MAAM,GAAGD,SAAS,CAAClB,CAAD,CAAtB;;AAEA,aAAK,IAAIQ,GAAT,IAAgBW,MAAhB,EAAwB;AACtB,cAAIb,MAAM,CAACM,SAAP,CAAiBQ,cAAjB,CAAgCC,IAAhC,CAAqCF,MAArC,EAA6CX,GAA7C,CAAJ,EAAuD;AACrDV,YAAAA,MAAM,CAACU,GAAD,CAAN,GAAcW,MAAM,CAACX,GAAD,CAApB;AACD;AACF;AACF;;AAED,aAAOV,MAAP;AACD,KAZD;;AAcA,WAAOkB,QAAQ,CAACM,KAAT,CAAe,IAAf,EAAqBJ,SAArB,CAAP;AACD;;AAED,WAASK,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AACvC,QAAIC,IAAI,GAAGpB,MAAM,CAACoB,IAAP,CAAYF,MAAZ,CAAX;;AAEA,QAAIlB,MAAM,CAACqB,qBAAX,EAAkC;AAChC,UAAIC,OAAO,GAAGtB,MAAM,CAACqB,qBAAP,CAA6BH,MAA7B,CAAd;AACA,UAAIC,cAAJ,EAAoBG,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAC1D,eAAOxB,MAAM,CAACyB,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6C3B,UAApD;AACD,OAF6B,CAAV;AAGpBuB,MAAAA,IAAI,CAACM,IAAL,CAAUV,KAAV,CAAgBI,IAAhB,EAAsBE,OAAtB;AACD;;AAED,WAAOF,IAAP;AACD;;AAED,WAASO,cAAT,CAAwBnC,MAAxB,EAAgC;AAC9B,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,SAAS,CAACjB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,UAAImB,MAAM,GAAGD,SAAS,CAAClB,CAAD,CAAT,IAAgB,IAAhB,GAAuBkB,SAAS,CAAClB,CAAD,CAAhC,GAAsC,EAAnD;;AAEA,UAAIA,CAAC,GAAG,CAAR,EAAW;AACTuB,QAAAA,OAAO,CAACjB,MAAM,CAACa,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8Be,OAA9B,CAAsC,UAAU1B,GAAV,EAAe;AACnDK,UAAAA,eAAe,CAACf,MAAD,EAASU,GAAT,EAAcW,MAAM,CAACX,GAAD,CAApB,CAAf;AACD,SAFD;AAGD,OAJD,MAIO,IAAIF,MAAM,CAAC6B,yBAAX,EAAsC;AAC3C7B,QAAAA,MAAM,CAAC8B,gBAAP,CAAwBtC,MAAxB,EAAgCQ,MAAM,CAAC6B,yBAAP,CAAiChB,MAAjC,CAAhC;AACD,OAFM,MAEA;AACLI,QAAAA,OAAO,CAACjB,MAAM,CAACa,MAAD,CAAP,CAAP,CAAwBe,OAAxB,CAAgC,UAAU1B,GAAV,EAAe;AAC7CF,UAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BU,GAA9B,EAAmCF,MAAM,CAACyB,wBAAP,CAAgCZ,MAAhC,EAAwCX,GAAxC,CAAnC;AACD,SAFD;AAGD;AACF;;AAED,WAAOV,MAAP;AACD;;AAED,WAASuC,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AACvC,QAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;AAC3D,YAAM,IAAI3C,SAAJ,CAAc,oDAAd,CAAN;AACD;;AAED0C,IAAAA,QAAQ,CAAC1B,SAAT,GAAqBN,MAAM,CAACkC,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAC3B,SAAvC,EAAkD;AACrE6B,MAAAA,WAAW,EAAE;AACX1B,QAAAA,KAAK,EAAEuB,QADI;AAEXjC,QAAAA,QAAQ,EAAE,IAFC;AAGXD,QAAAA,YAAY,EAAE;AAHH;AADwD,KAAlD,CAArB;AAOA,QAAImC,UAAJ,EAAgBG,eAAe,CAACJ,QAAD,EAAWC,UAAX,CAAf;AACjB;;AAED,WAASI,eAAT,CAAyBC,CAAzB,EAA4B;AAC1BD,IAAAA,eAAe,GAAGrC,MAAM,CAACuC,cAAP,GAAwBvC,MAAM,CAACwC,cAA/B,GAAgD,SAASH,eAAT,CAAyBC,CAAzB,EAA4B;AAC5F,aAAOA,CAAC,CAACG,SAAF,IAAezC,MAAM,CAACwC,cAAP,CAAsBF,CAAtB,CAAtB;AACD,KAFD;AAGA,WAAOD,eAAe,CAACC,CAAD,CAAtB;AACD;;AAED,WAASF,eAAT,CAAyBE,CAAzB,EAA4BI,CAA5B,EAA+B;AAC7BN,IAAAA,eAAe,GAAGpC,MAAM,CAACuC,cAAP,IAAyB,SAASH,eAAT,CAAyBE,CAAzB,EAA4BI,CAA5B,EAA+B;AACxEJ,MAAAA,CAAC,CAACG,SAAF,GAAcC,CAAd;AACA,aAAOJ,CAAP;AACD,KAHD;;AAKA,WAAOF,eAAe,CAACE,CAAD,EAAII,CAAJ,CAAtB;AACD;;AAED,WAASC,yBAAT,GAAqC;AACnC,QAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACC,SAA/C,EAA0D,OAAO,KAAP;AAC1D,QAAID,OAAO,CAACC,SAAR,CAAkBC,IAAtB,EAA4B,OAAO,KAAP;AAC5B,QAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;AAEjC,QAAI;AACFC,MAAAA,IAAI,CAAC1C,SAAL,CAAe2C,QAAf,CAAwBlC,IAAxB,CAA6B6B,OAAO,CAACC,SAAR,CAAkBG,IAAlB,EAAwB,EAAxB,EAA4B,YAAY,CAAE,CAA1C,CAA7B;AACA,aAAO,IAAP;AACD,KAHD,CAGE,OAAO/D,CAAP,EAAU;AACV,aAAO,KAAP;AACD;AACF;;AAED,WAASiE,6BAAT,CAAuCrC,MAAvC,EAA+CsC,QAA/C,EAAyD;AACvD,QAAItC,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AACpB,QAAIrB,MAAM,GAAG,EAAb;AACA,QAAI4D,UAAU,GAAGpD,MAAM,CAACoB,IAAP,CAAYP,MAAZ,CAAjB;AACA,QAAIX,GAAJ,EAASR,CAAT;;AAEA,SAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG0D,UAAU,CAACzD,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCQ,MAAAA,GAAG,GAAGkD,UAAU,CAAC1D,CAAD,CAAhB;AACA,UAAIyD,QAAQ,CAACE,OAAT,CAAiBnD,GAAjB,KAAyB,CAA7B,EAAgC;AAChCV,MAAAA,MAAM,CAACU,GAAD,CAAN,GAAcW,MAAM,CAACX,GAAD,CAApB;AACD;;AAED,WAAOV,MAAP;AACD;;AAED,WAAS8D,wBAAT,CAAkCzC,MAAlC,EAA0CsC,QAA1C,EAAoD;AAClD,QAAItC,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;;AAEpB,QAAIrB,MAAM,GAAG0D,6BAA6B,CAACrC,MAAD,EAASsC,QAAT,CAA1C;;AAEA,QAAIjD,GAAJ,EAASR,CAAT;;AAEA,QAAIM,MAAM,CAACqB,qBAAX,EAAkC;AAChC,UAAIkC,gBAAgB,GAAGvD,MAAM,CAACqB,qBAAP,CAA6BR,MAA7B,CAAvB;;AAEA,WAAKnB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6D,gBAAgB,CAAC5D,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CQ,QAAAA,GAAG,GAAGqD,gBAAgB,CAAC7D,CAAD,CAAtB;AACA,YAAIyD,QAAQ,CAACE,OAAT,CAAiBnD,GAAjB,KAAyB,CAA7B,EAAgC;AAChC,YAAI,CAACF,MAAM,CAACM,SAAP,CAAiBkD,oBAAjB,CAAsCzC,IAAtC,CAA2CF,MAA3C,EAAmDX,GAAnD,CAAL,EAA8D;AAC9DV,QAAAA,MAAM,CAACU,GAAD,CAAN,GAAcW,MAAM,CAACX,GAAD,CAApB;AACD;AACF;;AAED,WAAOV,MAAP;AACD;;AAED,WAASiE,sBAAT,CAAgC5E,IAAhC,EAAsC;AACpC,QAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;AACnB,YAAM,IAAI6E,cAAJ,CAAmB,2DAAnB,CAAN;AACD;;AAED,WAAO7E,IAAP;AACD;;AAED,WAAS8E,0BAAT,CAAoC9E,IAApC,EAA0CkC,IAA1C,EAAgD;AAC9C,QAAIA,IAAI,KAAK,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAAjD,CAAR,EAAsE;AACpE,aAAOA,IAAP;AACD;;AAED,WAAO0C,sBAAsB,CAAC5E,IAAD,CAA7B;AACD;;AAED,WAAS+E,YAAT,CAAsBC,OAAtB,EAA+B;AAC7B,QAAIC,yBAAyB,GAAGnB,yBAAyB,EAAzD;;AAEA,WAAO,SAASoB,oBAAT,GAAgC;AACrC,UAAIC,KAAK,GAAG3B,eAAe,CAACwB,OAAD,CAA3B;AAAA,UACII,MADJ;;AAGA,UAAIH,yBAAJ,EAA+B;AAC7B,YAAII,SAAS,GAAG7B,eAAe,CAAC,IAAD,CAAf,CAAsBF,WAAtC;;AAEA8B,QAAAA,MAAM,GAAGrB,OAAO,CAACC,SAAR,CAAkBmB,KAAlB,EAAyBpD,SAAzB,EAAoCsD,SAApC,CAAT;AACD,OAJD,MAIO;AACLD,QAAAA,MAAM,GAAGD,KAAK,CAAChD,KAAN,CAAY,IAAZ,EAAkBJ,SAAlB,CAAT;AACD;;AAED,aAAO+C,0BAA0B,CAAC,IAAD,EAAOM,MAAP,CAAjC;AACD,KAbD;AAcD;;AAED,WAASE,kBAAT,CAA4BC,GAA5B,EAAiC;AAC/B,WAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,2BAA2B,CAACH,GAAD,CAA/E,IAAwFI,kBAAkB,EAAjH;AACD;;AAED,WAASH,kBAAT,CAA4BD,GAA5B,EAAiC;AAC/B,QAAIK,KAAK,CAACC,OAAN,CAAcN,GAAd,CAAJ,EAAwB,OAAOO,iBAAiB,CAACP,GAAD,CAAxB;AACzB;;AAED,WAASE,gBAAT,CAA0BM,IAA1B,EAAgC;AAC9B,QAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,QAAP,IAAmB9E,MAAM,CAAC4E,IAAD,CAA9D,EAAsE,OAAOH,KAAK,CAACM,IAAN,CAAWH,IAAX,CAAP;AACvE;;AAED,WAASL,2BAAT,CAAqCjC,CAArC,EAAwC0C,MAAxC,EAAgD;AAC9C,QAAI,CAAC1C,CAAL,EAAQ;AACR,QAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B,OAAOqC,iBAAiB,CAACrC,CAAD,EAAI0C,MAAJ,CAAxB;AAC3B,QAAIC,CAAC,GAAGjF,MAAM,CAACM,SAAP,CAAiB2C,QAAjB,CAA0BlC,IAA1B,CAA+BuB,CAA/B,EAAkC4C,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,CAAR;AACA,QAAID,CAAC,KAAK,QAAN,IAAkB3C,CAAC,CAACH,WAAxB,EAAqC8C,CAAC,GAAG3C,CAAC,CAACH,WAAF,CAAcgD,IAAlB;AACrC,QAAIF,CAAC,KAAK,KAAN,IAAeA,CAAC,KAAK,KAAzB,EAAgC,OAAOR,KAAK,CAACM,IAAN,CAAWzC,CAAX,CAAP;AAChC,QAAI2C,CAAC,KAAK,WAAN,IAAqB,2CAA2CG,IAA3C,CAAgDH,CAAhD,CAAzB,EAA6E,OAAON,iBAAiB,CAACrC,CAAD,EAAI0C,MAAJ,CAAxB;AAC9E;;AAED,WAASL,iBAAT,CAA2BP,GAA3B,EAAgCiB,GAAhC,EAAqC;AACnC,QAAIA,GAAG,IAAI,IAAP,IAAeA,GAAG,GAAGjB,GAAG,CAACzE,MAA7B,EAAqC0F,GAAG,GAAGjB,GAAG,CAACzE,MAAV;;AAErC,SAAK,IAAID,CAAC,GAAG,CAAR,EAAW4F,IAAI,GAAG,IAAIb,KAAJ,CAAUY,GAAV,CAAvB,EAAuC3F,CAAC,GAAG2F,GAA3C,EAAgD3F,CAAC,EAAjD;AAAqD4F,MAAAA,IAAI,CAAC5F,CAAD,CAAJ,GAAU0E,GAAG,CAAC1E,CAAD,CAAb;AAArD;;AAEA,WAAO4F,IAAP;AACD;;AAED,WAASd,kBAAT,GAA8B;AAC5B,UAAM,IAAIlF,SAAJ,CAAc,sIAAd,CAAN;AACD;;AAED,WAASiG,oBAAT,CAA8BC,EAA9B,EAAkCC,OAAlC,EAA2CjH,MAA3C,EAAmD;AAClD,WAAOA,MAAM,GAAG;AACfkH,MAAAA,IAAI,EAAED,OADS;AAEflH,MAAAA,OAAO,EAAE,EAFM;AAGfE,MAAAA,OAAO,EAAE,iBAAUiH,IAAV,EAAgBC,IAAhB,EAAsB;AAC9B,eAAOC,eAAe,CAACF,IAAD,EAAQC,IAAI,KAAKE,SAAT,IAAsBF,IAAI,KAAK,IAAhC,GAAwCnH,MAAM,CAACkH,IAA/C,GAAsDC,IAA7D,CAAtB;AACA;AALc,KAAT,EAMJH,EAAE,CAAChH,MAAD,EAASA,MAAM,CAACD,OAAhB,CANE,EAMwBC,MAAM,CAACD,OANtC;AAOA;;AAED,WAASqH,eAAT,GAA4B;AAC3B,UAAM,IAAIE,KAAJ,CAAU,yEAAV,CAAN;AACA;AAED;AACF;AACA;AACA;AACA;AACA;;;AAEE,MAAIC,oBAAoB,GAAG,8CAA3B;AACA,MAAIC,sBAAsB,GAAGD,oBAA7B;;AAEA,WAASE,aAAT,GAAyB,CAAE;;AAE3B,WAASC,sBAAT,GAAkC,CAAE;;AAEpCA,EAAAA,sBAAsB,CAACC,iBAAvB,GAA2CF,aAA3C;;AAEA,MAAIG,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAY;AACzC,aAASC,IAAT,CAAc5G,KAAd,EAAqB6G,QAArB,EAA+BC,aAA/B,EAA8CC,QAA9C,EAAwDC,YAAxD,EAAsEC,MAAtE,EAA8E;AAC5E,UAAIA,MAAM,KAAKV,sBAAf,EAAuC;AACrC;AACA;AACD;;AAED,UAAIW,GAAG,GAAG,IAAIb,KAAJ,CAAU,yFAAyF,+CAAzF,GAA2I,gDAArJ,CAAV;AACAa,MAAAA,GAAG,CAACxB,IAAJ,GAAW,qBAAX;AACA,YAAMwB,GAAN;AACD;;AACDN,IAAAA,IAAI,CAACO,UAAL,GAAkBP,IAAlB;;AAEA,aAASQ,OAAT,GAAmB;AACjB,aAAOR,IAAP;AACD,KAfwC,CAgBzC;;;AAEA,QAAIS,cAAc,GAAG;AACnBC,MAAAA,KAAK,EAAEV,IADY;AAEnBW,MAAAA,IAAI,EAAEX,IAFa;AAGnBY,MAAAA,IAAI,EAAEZ,IAHa;AAInBa,MAAAA,MAAM,EAAEb,IAJW;AAKnBnF,MAAAA,MAAM,EAAEmF,IALW;AAMnBc,MAAAA,MAAM,EAAEd,IANW;AAOnBe,MAAAA,MAAM,EAAEf,IAPW;AAQnBgB,MAAAA,GAAG,EAAEhB,IARc;AASnBiB,MAAAA,OAAO,EAAET,OATU;AAUnBU,MAAAA,OAAO,EAAElB,IAVU;AAWnBmB,MAAAA,WAAW,EAAEnB,IAXM;AAYnBoB,MAAAA,UAAU,EAAEZ,OAZO;AAanBa,MAAAA,IAAI,EAAErB,IAba;AAcnBsB,MAAAA,QAAQ,EAAEd,OAdS;AAenBe,MAAAA,KAAK,EAAEf,OAfY;AAgBnBgB,MAAAA,SAAS,EAAEhB,OAhBQ;AAiBnBiB,MAAAA,KAAK,EAAEjB,OAjBY;AAkBnBkB,MAAAA,KAAK,EAAElB,OAlBY;AAmBnBmB,MAAAA,cAAc,EAAE9B,sBAnBG;AAoBnBC,MAAAA,iBAAiB,EAAEF;AApBA,KAArB;AAsBAa,IAAAA,cAAc,CAACmB,SAAf,GAA2BnB,cAA3B;AACA,WAAOA,cAAP;AACD,GA1CD;;AA4CA,MAAIoB,SAAS,GAAG3C,oBAAoB,CAAC,UAAU/G,MAAV,EAAkB;AACvD;AACF;AACA;AACA;AACA;AACA;AACE;AACE;AACA;AACAA,MAAAA,MAAM,CAACD,OAAP,GAAiB6H,wBAAwB,EAAzC;AACD;AACA,GAZmC,CAApC;;AAcA,WAAS+B,iBAAT,CAA2B/I,QAA3B,EAAqCC,WAArC,EAAkD;AAChD,QAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AACtC,YAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AACD;AACF;;AAED,WAAS8I,mBAAT,CAA6B5I,MAA7B,EAAqCC,KAArC,EAA4C;AAC1C,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,UAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AACAE,MAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AACAD,MAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AACA,UAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAC3BC,MAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BI,UAAU,CAACM,GAAzC,EAA8CN,UAA9C;AACD;AACF;;AAED,WAASyI,cAAT,CAAwBhJ,WAAxB,EAAqCe,UAArC,EAAiDC,WAAjD,EAA8D;AAC5D,QAAID,UAAJ,EAAgBgI,mBAAmB,CAAC/I,WAAW,CAACiB,SAAb,EAAwBF,UAAxB,CAAnB;AAChB,QAAIC,WAAJ,EAAiB+H,mBAAmB,CAAC/I,WAAD,EAAcgB,WAAd,CAAnB;AACjB,WAAOhB,WAAP;AACD;;AAED,WAASiJ,iBAAT,CAA2B9H,GAA3B,EAAgCN,GAAhC,EAAqCO,KAArC,EAA4C;AAC1C,QAAIP,GAAG,IAAIM,GAAX,EAAgB;AACdR,MAAAA,MAAM,CAACC,cAAP,CAAsBO,GAAtB,EAA2BN,GAA3B,EAAgC;AAC9BO,QAAAA,KAAK,EAAEA,KADuB;AAE9BZ,QAAAA,UAAU,EAAE,IAFkB;AAG9BC,QAAAA,YAAY,EAAE,IAHgB;AAI9BC,QAAAA,QAAQ,EAAE;AAJoB,OAAhC;AAMD,KAPD,MAOO;AACLS,MAAAA,GAAG,CAACN,GAAD,CAAH,GAAWO,KAAX;AACD;;AAED,WAAOD,GAAP;AACD;;AAED,WAAS+H,SAAT,CAAmBrH,MAAnB,EAA2BC,cAA3B,EAA2C;AACzC,QAAIC,IAAI,GAAGpB,MAAM,CAACoB,IAAP,CAAYF,MAAZ,CAAX;;AAEA,QAAIlB,MAAM,CAACqB,qBAAX,EAAkC;AAChC,UAAIC,OAAO,GAAGtB,MAAM,CAACqB,qBAAP,CAA6BH,MAA7B,CAAd;AACA,UAAIC,cAAJ,EAAoBG,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAC1D,eAAOxB,MAAM,CAACyB,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6C3B,UAApD;AACD,OAF6B,CAAV;AAGpBuB,MAAAA,IAAI,CAACM,IAAL,CAAUV,KAAV,CAAgBI,IAAhB,EAAsBE,OAAtB;AACD;;AAED,WAAOF,IAAP;AACD;;AAED,WAASoH,gBAAT,CAA0BhJ,MAA1B,EAAkC;AAChC,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,SAAS,CAACjB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,UAAImB,MAAM,GAAGD,SAAS,CAAClB,CAAD,CAAT,IAAgB,IAAhB,GAAuBkB,SAAS,CAAClB,CAAD,CAAhC,GAAsC,EAAnD;;AAEA,UAAIA,CAAC,GAAG,CAAR,EAAW;AACT6I,QAAAA,SAAS,CAACvI,MAAM,CAACa,MAAD,CAAP,EAAiB,IAAjB,CAAT,CAAgCe,OAAhC,CAAwC,UAAU1B,GAAV,EAAe;AACrDoI,UAAAA,iBAAiB,CAAC9I,MAAD,EAASU,GAAT,EAAcW,MAAM,CAACX,GAAD,CAApB,CAAjB;AACD,SAFD;AAGD,OAJD,MAIO,IAAIF,MAAM,CAAC6B,yBAAX,EAAsC;AAC3C7B,QAAAA,MAAM,CAAC8B,gBAAP,CAAwBtC,MAAxB,EAAgCQ,MAAM,CAAC6B,yBAAP,CAAiChB,MAAjC,CAAhC;AACD,OAFM,MAEA;AACL0H,QAAAA,SAAS,CAACvI,MAAM,CAACa,MAAD,CAAP,CAAT,CAA0Be,OAA1B,CAAkC,UAAU1B,GAAV,EAAe;AAC/CF,UAAAA,MAAM,CAACC,cAAP,CAAsBT,MAAtB,EAA8BU,GAA9B,EAAmCF,MAAM,CAACyB,wBAAP,CAAgCZ,MAAhC,EAAwCX,GAAxC,CAAnC;AACD,SAFD;AAGD;AACF;;AAED,WAAOV,MAAP;AACD;;AAED,MAAIiJ,OAAO,GAAG,OAAd;AACA,MAAIC,aAAa,GAAG;AAClBC,IAAAA,gCAAgC,EAAE;AAChCC,MAAAA,OAAO,EAAE,+CADuB;AAEhCC,MAAAA,IAAI,EAAE;AAF0B,KADhB;AAKlBC,IAAAA,+BAA+B,EAAE;AAC/BF,MAAAA,OAAO,EAAE,0CADsB;AAE/BC,MAAAA,IAAI,EAAE;AAFyB,KALf;AASlBE,IAAAA,uBAAuB,EAAE;AACvBH,MAAAA,OAAO,EAAE,oDADc;AAEvBC,MAAAA,IAAI,EAAE;AAFiB,KATP;AAalBG,IAAAA,mBAAmB,EAAE;AACnBJ,MAAAA,OAAO,EAAE,yBADU;AAEnBC,MAAAA,IAAI,EAAE;AAFa,KAbH;AAiBlBI,IAAAA,6BAA6B,EAAE;AAC7BL,MAAAA,OAAO,EAAE,mCADoB;AAE7BC,MAAAA,IAAI,EAAE;AAFuB,KAjBb;AAqBlBK,IAAAA,iCAAiC,EAAE;AACjCN,MAAAA,OAAO,EAAE,uCADwB;AAEjCC,MAAAA,IAAI,EAAE;AAF2B,KArBjB;AAyBlBM,IAAAA,+BAA+B,EAAE;AAC/BP,MAAAA,OAAO,EAAE,4CADsB;AAE/BC,MAAAA,IAAI,EAAE;AAFyB,KAzBf;AA6BlBO,IAAAA,kBAAkB,EAAE;AAClBR,MAAAA,OAAO,EAAE,+BADS;AAElBC,MAAAA,IAAI,EAAE;AAFY,KA7BF;AAiClBQ,IAAAA,qBAAqB,EAAE;AACrBT,MAAAA,OAAO,EAAE,iEADY;AAErBC,MAAAA,IAAI,EAAE;AAFe,KAjCL;AAqClBS,IAAAA,2BAA2B,EAAE;AAC3BV,MAAAA,OAAO,EAAE,+DADkB;AAE3BC,MAAAA,IAAI,EAAE;AAFqB,KArCX;AAyClBU,IAAAA,6BAA6B,EAAE;AAC7BX,MAAAA,OAAO,EAAE,iEADoB;AAE7BC,MAAAA,IAAI,EAAE;AAFuB,KAzCb;AA6ClBW,IAAAA,sBAAsB,EAAE;AACtBZ,MAAAA,OAAO,EAAE,iCADa;AAEtBC,MAAAA,IAAI,EAAE;AAFgB;AA7CN,GAApB;;AAmDA,WAASY,OAAT,CAAiBC,OAAjB,EAA0BC,QAA1B,EAAoCC,QAApC,EAA8C;AAC5C,QAAI,OAAOA,QAAP,IAAmB,UAAvB,EAAmC;AACjC,UAAIF,OAAJ,EAAa;AACXE,QAAAA,QAAQ,CAACD,QAAD,EAAW,IAAX,CAAR;AACD,OAFD,MAEO;AACLC,QAAAA,QAAQ,CAAC,IAAD,EAAOD,QAAP,CAAR;AACD;AACF;AACF;;AAED,MAAIE,OAAO,GAAG,SAASA,OAAT,CAAiBC,QAAjB,EAA2BC,OAA3B,EAAoCH,QAApC,EAA8C;AAC1DI,IAAAA,sBAAsB,CAACD,OAAD,EAAU,UAAUpD,GAAV,EAAesD,WAAf,EAA4B;AAC1D,UAAItD,GAAJ,EAAS;AACP,eAAO8C,OAAO,CAAC,IAAD,EAAO9C,GAAP,EAAYiD,QAAZ,CAAd;AACD,OAFD,MAEO;AACLE,QAAAA,QAAQ,CAACI,MAAT,CAAgB,WAAhB,EAA6B,CAACD,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GAA0DA,WAAW,CAACE,SAAvE,KAAqF,EAAlH;AACAL,QAAAA,QAAQ,CAACI,MAAT,CAAgB,QAAhB,EAA0BE,MAAM,CAAC,CAACH,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GAA0DA,WAAW,CAACI,MAAvE,KAAkF,CAAnF,CAAhC;AACAP,QAAAA,QAAQ,CAACI,MAAT,CAAgB,OAAhB,EAAyB,CAACD,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GAA0DA,WAAW,CAACK,KAAvE,KAAiF,EAA1G;AACAC,QAAAA,UAAU,CAACT,QAAD,EAAW,UAAUnD,GAAV,EAAe6D,kBAAf,EAAmC;AACtD,cAAI7D,GAAJ,EAAS;AACP,mBAAO8C,OAAO,CAAC,IAAD,EAAO9C,GAAP,EAAYiD,QAAZ,CAAd;AACD;;AAED,iBAAOH,OAAO,CAAC,KAAD,EAAQe,kBAAR,EAA4BZ,QAA5B,CAAd;AACD,SANS,CAAV;AAOD;AACF,KAfqB,CAAtB;AAgBD,GAjBD;;AAmBA,MAAII,sBAAsB,GAAG,SAASA,sBAAT,CAAgCD,OAAhC,EAAyCH,QAAzC,EAAmD;AAC9E,QAAIa,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,OAAJ,GAAc,KAAd;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,KAAT,EAAgBb,OAAO,CAACc,sBAAxB;;AAEAJ,IAAAA,GAAG,CAACK,SAAJ,GAAgB,UAAU7L,CAAV,EAAa;AAC3BwK,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACW,qBAArB,EAA4CO,QAA5C,CAAP;AACD,KAFD;;AAIAa,IAAAA,GAAG,CAACM,OAAJ,GAAc,YAAY;AACxBtB,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACY,2BAArB,EAAkDM,QAAlD,CAAP;AACD,KAFD;;AAIAa,IAAAA,GAAG,CAACO,MAAJ,GAAa,YAAY;AACvB,UAAIP,GAAG,CAACQ,MAAJ,KAAe,GAAnB,EAAwB;AACtB,YAAI;AACF,cAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACY,YAAf,CAAX;AACA,cAAI7K,GAAG,GAAG;AACR2J,YAAAA,SAAS,EAAEe,IAAI,CAACf,SADR;AAERE,YAAAA,MAAM,EAAEa,IAAI,CAACb,MAFL;AAGRC,YAAAA,KAAK,EAAEY,IAAI,CAACZ;AAHJ,WAAV;AAKAb,UAAAA,OAAO,CAAC,KAAD,EAAQjJ,GAAR,EAAaoJ,QAAb,CAAP;AACD,SARD,CAQE,OAAO0B,EAAP,EAAW;AACX7B,UAAAA,OAAO,CAAC,IAAD,EAAO6B,EAAP,EAAW1B,QAAX,CAAP;AACD;AACF,OAZD,MAYO;AACL,YAAI;AACF,cAAI2B,KAAK,GAAGJ,IAAI,CAACC,KAAL,CAAWX,GAAG,CAACY,YAAf,CAAZ;AACA5B,UAAAA,OAAO,CAAC,IAAD,EAAO8B,KAAP,EAAc3B,QAAd,CAAP;AACD,SAHD,CAGE,OAAO0B,EAAP,EAAW;AACX7B,UAAAA,OAAO,CAAC,IAAD,EAAO6B,EAAP,EAAW1B,QAAX,CAAP;AACD;AACF;AACF,KArBD;;AAuBAa,IAAAA,GAAG,CAACe,IAAJ;AACA;AACD,GAtCD;;AAwCA,MAAIjB,UAAU,GAAG,SAASA,UAAT,CAAoBT,QAApB,EAA8BF,QAA9B,EAAwC;AACvD,QAAI6B,aAAa,GAAG,IAAIf,cAAJ,EAApB;AACAe,IAAAA,aAAa,CAACb,IAAd,CAAmB,MAAnB,EAA2B,gDAA3B;;AAEAa,IAAAA,aAAa,CAACV,OAAd,GAAwB,YAAY;AAClCtB,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACa,6BAArB,EAAoDK,QAApD,CAAP;AACA;AACD,KAHD;;AAKA6B,IAAAA,aAAa,CAACT,MAAd,GAAuB,YAAY;AACjC,UAAIS,aAAa,CAACR,MAAd,KAAyB,GAA7B,EAAkC;AAChC,YAAIS,cAAc,GAAGP,IAAI,CAACC,KAAL,CAAWK,aAAa,CAACJ,YAAzB,CAArB;AACAzB,QAAAA,QAAQ,CAAC,IAAD,EAAO8B,cAAP,CAAR;AACD,OAHD,MAGO,IAAID,aAAa,CAACR,MAAd,KAAyB,GAA7B,EAAkC;AACvC,YAAI;AACFrB,UAAAA,QAAQ,CAACuB,IAAI,CAACC,KAAL,CAAWK,aAAa,CAACJ,YAAzB,CAAD,EAAyC,IAAzC,CAAR;AACD,SAFD,CAEE,OAAOC,EAAP,EAAW;AACX1B,UAAAA,QAAQ,CAAC0B,EAAD,EAAK,IAAL,CAAR;AACD;AACF;AACF,KAXD;;AAaAG,IAAAA,aAAa,CAACD,IAAd,CAAmB1B,QAAnB;AACA;AACD,GAxBD;;AA0BA,MAAI6B,MAAM,GAAG,SAASA,MAAT,CAAgBC,aAAhB,EAA+B7B,OAA/B,EAAwCH,QAAxC,EAAkD;AAC7D,QAAI,CAACgC,aAAL,EAAoB;AAClBnC,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACc,sBAArB,EAA6CI,QAA7C,CAAP;AACA;AACD;;AAED,QAAI,CAACgC,aAAa,CAACC,IAAnB,EAAyB;AACvBpC,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACO,6BAArB,EAAoDW,QAApD,CAAP;AACA;AACD;;AAED,QAAI,CAACgC,aAAa,CAACE,QAAnB,EAA6B;AAC3BrC,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACQ,iCAArB,EAAwDU,QAAxD,CAAP;AACA;AACD;;AAED,QAAI,CAACG,OAAO,CAACc,sBAAb,EAAqC;AACnCpB,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACS,+BAArB,EAAsDS,QAAtD,CAAP;AACA;AACD;;AAED,QAAI,CAACG,OAAO,CAACgC,SAAb,EAAwB;AACtBtC,MAAAA,OAAO,CAAC,IAAD,EAAOf,aAAa,CAACU,kBAArB,EAAyCQ,QAAzC,CAAP;AACA;AACD;;AAED,QAAIgC,aAAa,CAACI,IAAd,IAAsBvH,KAAK,CAACC,OAAN,CAAckH,aAAa,CAACI,IAA5B,CAA1B,EAA6D;AAC3DJ,MAAAA,aAAa,CAACI,IAAd,GAAqB5B,MAAM,CAACwB,aAAa,CAACI,IAAf,CAA3B;AACD;;AAED,QAAIlC,QAAQ,GAAG,IAAImC,QAAJ,EAAf;AACA,QAAIvM,CAAJ;;AAEA,SAAKA,CAAL,IAAUkM,aAAV,EAAyB;AACvB,UAAIM,KAAK,GAAGN,aAAa,CAAClM,CAAD,CAAzB;;AAEA,UAAI,OAAOwM,KAAP,KAAiB,WAArB,EAAkC;AAChC,YAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,OAAOA,KAAP,KAAiB,SAAlD,EAA6D;AAC3DpC,UAAAA,QAAQ,CAACI,MAAT,CAAgBxK,CAAhB,EAAmB0K,MAAM,CAAC8B,KAAD,CAAzB;AACD,SAFD,MAEO,IAAIzH,KAAK,CAACC,OAAN,CAAcwH,KAAd,CAAJ,EAA0B;AAC/BpC,UAAAA,QAAQ,CAACI,MAAT,CAAgBxK,CAAhB,EAAmByL,IAAI,CAACgB,SAAL,CAAeD,KAAf,CAAnB;AACD,SAFM,MAEA;AACLpC,UAAAA,QAAQ,CAACI,MAAT,CAAgBxK,CAAhB,EAAmBwM,KAAnB;AACD;AACF;AACF;;AAEDpC,IAAAA,QAAQ,CAACI,MAAT,CAAgB,WAAhB,EAA6BH,OAAO,CAACgC,SAArC;AACAlC,IAAAA,OAAO,CAACC,QAAD,EAAWtB,gBAAgB,CAACA,gBAAgB,CAAC,EAAD,EAAKuB,OAAL,CAAjB,EAAgC,EAAhC,EAAoC;AACpEc,MAAAA,sBAAsB,EAAEd,OAAO,CAACc;AADoC,KAApC,CAA3B,EAEHjB,QAFG,CAAP;AAGD,GAnDD;;AAqDA,MAAIwC,mBAAmB,GAAG;AACxBC,IAAAA,KAAK,EAAE,GADiB;AAExBC,IAAAA,MAAM,EAAE,GAFgB;AAGxBC,IAAAA,WAAW,EAAE,IAHW;AAIxBC,IAAAA,OAAO,EAAE,GAJe;AAKxBC,IAAAA,IAAI,EAAE,GALkB;AAMxBC,IAAAA,QAAQ,EAAE,IANc;AAOxBC,IAAAA,KAAK,EAAE,IAPiB;AAQxBC,IAAAA,CAAC,EAAE,GARqB;AASxBC,IAAAA,CAAC,EAAE,GATqB;AAUxBC,IAAAA,MAAM,EAAE,GAVgB;AAWxBC,IAAAA,MAAM,EAAE,GAXgB;AAYxBC,IAAAA,UAAU,EAAE,IAZY;AAaxBC,IAAAA,MAAM,EAAE,GAbgB;AAcxBC,IAAAA,QAAQ,EAAE,IAdc;AAexBC,IAAAA,MAAM,EAAE,IAfgB;AAgBxBC,IAAAA,IAAI,EAAE,IAhBkB;AAiBxBC,IAAAA,KAAK,EAAE,GAjBiB;AAkBxBC,IAAAA,YAAY,EAAE,IAlBU;AAmBxBC,IAAAA,uBAAuB,EAAE,MAnBD;AAoBxBC,IAAAA,sBAAsB,EAAE,MApBA;AAqBxBC,IAAAA,kBAAkB,EAAE,KArBI;AAsBxBC,IAAAA,eAAe,EAAE,OAtBO;AAuBxBC,IAAAA,mBAAmB,EAAE,KAvBG;AAwBxBC,IAAAA,oBAAoB,EAAE,KAxBE;AAyBxBC,IAAAA,gBAAgB,EAAE,KAzBM;AA0BxBC,IAAAA,QAAQ,EAAE,IA1Bc;AA2BxBC,IAAAA,QAAQ,EAAE,IA3Bc;AA4BxBC,IAAAA,YAAY,EAAE,KA5BU;AA6BxBC,IAAAA,aAAa,EAAE,IA7BS;AA8BxBC,IAAAA,YAAY,EAAE,IA9BU;AA+BxBC,IAAAA,WAAW,EAAE,IA/BW;AAgCxBC,IAAAA,mBAAmB,EAAE,KAhCG;AAiCxBC,IAAAA,qBAAqB,EAAE,KAjCC;AAkCxBC,IAAAA,gBAAgB,EAAE,KAlCM;AAmCxBC,IAAAA,uBAAuB,EAAE,IAnCD;AAoCxBC,IAAAA,YAAY,EAAE,IApCU;AAqCxBC,IAAAA,qBAAqB,EAAE,KArCC;AAsCxBC,IAAAA,iBAAiB,EAAE,KAtCK;AAuCxBC,IAAAA,kBAAkB,EAAE,KAvCI;AAwCxBC,IAAAA,gBAAgB,EAAE,KAxCM;AAyCxBC,IAAAA,qBAAqB,EAAE,MAzCC;AA0CxBC,IAAAA,kBAAkB,EAAE,KA1CI;AA2CxBC,IAAAA,yBAAyB,EAAE,MA3CH;AA4CxBC,IAAAA,aAAa,EAAE,IA5CS;AA6CxBC,IAAAA,WAAW,EAAE,IA7CW;AA8CxBC,IAAAA,QAAQ,EAAE,IA9Cc;AA+CxBC,IAAAA,IAAI,EAAE,GA/CkB;AAgDxBC,IAAAA,QAAQ,EAAE,IAhDc;AAiDxBC,IAAAA,YAAY,EAAE,IAjDU;AAkDxBC,IAAAA,YAAY,EAAE,IAlDU;AAmDxBC,IAAAA,GAAG,EAAE,KAnDmB;AAoDxBC,IAAAA,aAAa,EAAE,WApDS;AAqDxBC,IAAAA,SAAS,EAAE,OArDa;AAsDxBC,IAAAA,cAAc,EAAE,YAtDQ;AAuDxBC,IAAAA,UAAU,EAAE,aAvDY;AAwDxBC,IAAAA,QAAQ,EAAE;AAxDc,GAA1B;AA0DA,MAAIC,+BAA+B,GAAG,MAAtC;AACA,MAAIC,6BAA6B,GAAG,OAApC;AACA,MAAIC,8BAA8B,GAAG,CAACF,+BAAD,EAAkCC,6BAAlC,CAArC;AACA,MAAIE,yBAAyB,GAAG,GAAhC;AACA,MAAIC,mBAAmB,GAAG,GAA1B;AACA,MAAIC,6BAA6B,GAAG,GAApC;AACA,MAAIC,mBAAmB,GAAG;AACxBC,IAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAChC,aAAOP,+BAAP;AACD,KAHuB;AAIxBQ,IAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6BtG,OAA7B,EAAsC;AACzD,aAAOA,OAAO,CAACuG,sBAAR,KAAmCR,6BAA1C;AACD,KANuB;AAOxBS,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBxG,OAAzB,EAAkC;AACjD,UAAI,OAAOA,OAAO,CAACuG,sBAAf,IAAyC,WAA7C,EAA0D,OAAO,KAAP;AAC1D,aAAOP,8BAA8B,CAAC1M,OAA/B,CAAuC0G,OAAO,CAACuG,sBAA/C,KAA0E,CAAC,CAAlF;AACD,KAVuB;AAWxBE,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBC,SAAzB,EAAoC;AACnD,UAAI,CAACA,SAAL,EAAgB;AACd,eAAO,EAAP;AACD;;AAED,aAAOrE,mBAAmB,CAACqE,SAAD,CAAnB,IAAkCrE,mBAAmB,CAACqE,SAAS,CAACC,WAAV,EAAD,CAArD,IAAkF,EAAzF;AACD,KAjBuB;AAkBxBC,IAAAA,0BAA0B,EAAE,SAASA,0BAAT,GAAsC;AAChE,aAAOX,yBAAP;AACD,KApBuB;AAqBxBY,IAAAA,qBAAqB,EAAE,SAASA,qBAAT,GAAiC;AACtD,aAAOX,mBAAP;AACD,KAvBuB;AAwBxBY,IAAAA,6BAA6B,EAAE,SAASA,6BAAT,GAAyC;AACtE,aAAOX,6BAAP;AACD;AA1BuB,GAA1B;AA4BA,MAAIY,wBAAwB,GAAG,IAA/B;;AAEA,WAASC,mBAAT,CAA6BC,GAA7B,EAAkC;AAChC,QAAI,OAAOA,GAAP,IAAc,QAAd,IAA0BA,GAAG,CAACA,GAAG,CAACrR,MAAJ,GAAa,CAAd,CAAH,IAAuB,GAArD,EAA0D;AACxDqR,MAAAA,GAAG,GAAGA,GAAG,CAACC,SAAJ,CAAc,CAAd,EAAiBD,GAAG,CAACrR,MAAJ,GAAa,CAA9B,CAAN;AACD;;AAED,WAAOqR,GAAP;AACD;;AAED,WAASE,kBAAT,CAA4BF,GAA5B,EAAiC;AAC/B,QAAI,OAAOA,GAAP,IAAc,QAAd,IAA0BA,GAAG,CAAC,CAAD,CAAH,IAAU,GAAxC,EAA6C;AAC3CA,MAAAA,GAAG,GAAGA,GAAG,CAAC9L,KAAJ,CAAU,CAAV,CAAN;AACD;;AAED,WAAO8L,GAAP;AACD;;AAED,WAASG,QAAT,CAAkBC,KAAlB,EAAyBC,GAAzB,EAA8B;AAC5B,QAAIC,SAAS,GAAGD,GAAG,IAAI,GAAvB;AACA,QAAIE,OAAO,GAAG,IAAIC,MAAJ,CAAWF,SAAS,GAAG,MAAvB,EAA+B,GAA/B,CAAd;AACA,WAAOF,KAAK,CAACK,IAAN,CAAWH,SAAX,EAAsBC,OAAtB,CAA8BA,OAA9B,EAAuCD,SAAvC,CAAP;AACD;;AAED,MAAII,QAAQ,GAAG,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;AACrC,QAAI,CAACA,IAAI,CAACjM,IAAN,IAAc,CAACiM,IAAI,CAACC,GAAxB,EAA6B;AAC3B,aAAO,EAAP;AACD;;AAED,QAAIC,MAAJ,EAAYC,wBAAZ,EAAsCC,kBAAtC;;AAEA,QAAI;AACF,UAAIJ,IAAI,CAACjM,IAAT,EAAe;AACbqM,QAAAA,kBAAkB,GAAG,IAAIC,GAAJ,CAAQL,IAAI,CAACM,WAAb,EAA0BC,QAA/C;AACAL,QAAAA,MAAM,GAAG,IAAIG,GAAJ,CAAQb,QAAQ,CAAC,CAACQ,IAAI,CAACM,WAAL,CAAiBV,OAAjB,CAAyBQ,kBAAzB,EAA6C,EAA7C,CAAD,EAAmDJ,IAAI,CAACjM,IAAxD,CAAD,CAAhB,CAAT;AACD,OAHD,MAGO;AACLmM,QAAAA,MAAM,GAAG,IAAIG,GAAJ,CAAQL,IAAI,CAACC,GAAb,CAAT;AACAE,QAAAA,wBAAwB,GAAG,IAA3B;AACD;AACF,KARD,CAQE,OAAO7S,CAAP,EAAU;AACVkT,MAAAA,OAAO,CAAC5G,KAAR,CAActM,CAAd;AACA,aAAO,EAAP;AACD;;AAED,QAAI0S,IAAI,CAACS,UAAL,IAAmBT,IAAI,CAACS,UAAL,CAAgBjD,IAAhB,MAA0B,EAAjD,EAAqD;AACnD0C,MAAAA,MAAM,CAACQ,YAAP,CAAoBnI,MAApB,CAA2B,gBAA3B,EAA6CyH,IAAI,CAACS,UAAL,CAAgBjD,IAAhB,EAA7C;AACD;;AAED,SAAK,IAAIzP,CAAT,IAAciS,IAAI,CAACW,eAAnB,EAAoC;AAClCT,MAAAA,MAAM,CAACQ,YAAP,CAAoBnI,MAApB,CAA2BxK,CAA3B,EAA8B0K,MAAM,CAACuH,IAAI,CAACW,eAAL,CAAqB5S,CAArB,CAAD,CAApC;AACD;;AAED,QAAI6S,oBAAoB,GAAGC,6BAA6B,CAACb,IAAI,CAACc,cAAN,CAAxD;;AAEA,QAAIF,oBAAoB,IAAIA,oBAAoB,CAAC5S,MAAjD,EAAyD;AACvD,UAAIwQ,mBAAmB,CAACE,mBAApB,CAAwCsB,IAAxC,KAAiDG,wBAArD,EAA+E;AAC7ED,QAAAA,MAAM,CAACQ,YAAP,CAAoBnI,MAApB,CAA2B4G,wBAA3B,EAAqDyB,oBAArD;AACD,OAFD,MAEO;AACLV,QAAAA,MAAM,CAACK,QAAP,GAAkBf,QAAQ,CAAC,CAACL,wBAAwB,GAAGX,mBAAmB,CAACQ,0BAApB,EAA3B,GAA8E4B,oBAA/E,EAAqGV,MAAM,CAACK,QAA5G,CAAD,CAA1B;AACD;AACF;;AAED,QAAIH,kBAAJ,EAAwB;AACtBF,MAAAA,MAAM,CAACK,QAAP,GAAkBf,QAAQ,CAAC,CAACY,kBAAD,EAAqBF,MAAM,CAACK,QAA5B,CAAD,CAA1B;AACD,KAFD,MAEO;AACLL,MAAAA,MAAM,CAACK,QAAP,GAAkBf,QAAQ,CAAC,CAACU,MAAM,CAACK,QAAR,CAAD,CAA1B;AACD;;AAED,WAAOL,MAAM,CAACa,IAAd;AACD,GA7CD;;AA+CA,WAASF,6BAAT,CAAuCC,cAAvC,EAAuD;AACrD,QAAI,CAAChO,KAAK,CAACC,OAAN,CAAc+N,cAAd,CAAL,EAAoC;AAClC,aAAO,EAAP;AACD;;AAED,QAAIE,gBAAgB,GAAG,EAAvB;;AAEA,SAAK,IAAIjT,CAAC,GAAG,CAAR,EAAWkT,CAAC,GAAGH,cAAc,CAAC9S,MAAnC,EAA2CD,CAAC,GAAGkT,CAA/C,EAAkDlT,CAAC,EAAnD,EAAuD;AACrD,UAAImT,mBAAmB,GAAG,EAA1B;;AAEA,WAAK,IAAI3S,GAAT,IAAgBuS,cAAc,CAAC/S,CAAD,CAA9B,EAAmC;AACjC,YAAIoT,YAAY,GAAG3C,mBAAmB,CAACK,eAApB,CAAoCtQ,GAApC,CAAnB;;AAEA,YAAI,CAAC4S,YAAL,EAAmB;AACjBA,UAAAA,YAAY,GAAG5S,GAAf;AACD;;AAED,YAAIuS,cAAc,CAAC/S,CAAD,CAAd,CAAkBQ,GAAlB,MAA2B,GAA/B,EAAoC;AAClC2S,UAAAA,mBAAmB,CAACnR,IAApB,CAAyBoR,YAAzB;AACD,SAFD,MAEO,IAAI5S,GAAG,KAAK,KAAZ,EAAmB;AACxB2S,UAAAA,mBAAmB,CAACnR,IAApB,CAAyB+Q,cAAc,CAAC/S,CAAD,CAAd,CAAkBQ,GAAlB,CAAzB;AACD,SAFM,MAEA;AACL,cAAIO,KAAK,GAAGgS,cAAc,CAAC/S,CAAD,CAAd,CAAkBQ,GAAlB,CAAZ;;AAEA,cAAI4S,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,IAA9C,EAAoD;AAClDrS,YAAAA,KAAK,GAAGsQ,mBAAmB,CAACG,kBAAkB,CAACzQ,KAAK,IAAI,EAAV,CAAnB,CAA3B;AACAA,YAAAA,KAAK,GAAGA,KAAK,CAAC8Q,OAAN,CAAc,KAAd,EAAqB,IAArB,CAAR;AACD;;AAEDsB,UAAAA,mBAAmB,CAACnR,IAApB,CAAyB,CAACoR,YAAD,EAAerS,KAAf,EAAsBgR,IAAtB,CAA2BtB,mBAAmB,CAACU,6BAApB,EAA3B,CAAzB;AACD;AACF;;AAED8B,MAAAA,gBAAgB,CAACjR,IAAjB,CAAsBmR,mBAAmB,CAACpB,IAApB,CAAyBtB,mBAAmB,CAACS,qBAApB,EAAzB,CAAtB;AACD;;AAED,WAAO+B,gBAAgB,CAAClB,IAAjB,CAAsBtB,mBAAmB,CAACQ,0BAApB,EAAtB,CAAP;AACD;;AAED,MAAIoC,GAAG,GAAG,SAASA,GAAT,CAAaC,OAAb,EAAsBC,cAAtB,EAAsC;AAC9C,WAAOvB,QAAQ,CAAClJ,gBAAgB,CAACA,gBAAgB,CAAC,EAAD,EAAKyK,cAAL,CAAjB,EAAuCD,OAAvC,CAAjB,CAAf;AACD,GAFD;;AAIA,WAASE,4BAAT,CAAsCnJ,OAAtC,EAA+C;AAC7C,WAAOA,OAAO,CAACkI,WAAf;AACD;;AAED,WAASkB,gBAAT,CAA0BpJ,OAA1B,EAAmC;AACjC,WAAO,OAAOA,OAAO,CAACqJ,UAAf,IAA6B,WAApC;AACD;;AAED,MAAIC,QAAQ,GAAG,YAAY;AACzB,aAASA,QAAT,CAAkB1B,IAAlB,EAAwB;AACtBxJ,MAAAA,iBAAiB,CAAC,IAAD,EAAOkL,QAAP,CAAjB;;AAEA/K,MAAAA,iBAAiB,CAAC,IAAD,EAAO,SAAP,EAAkB;AACjC8J,QAAAA,UAAU,EAAE,cAAckB,MAAd,CAAqB7K,OAArB,CADqB;AAEjCsD,QAAAA,SAAS,EAAE,EAFsB;AAGjCkG,QAAAA,WAAW,EAAE,EAHoB;AAIjC3B,QAAAA,sBAAsB,EAAEH,mBAAmB,CAACC,UAApB;AAJS,OAAlB,CAAjB;;AAOA,WAAKrG,OAAL,GAAevB,gBAAgB,CAACA,gBAAgB,CAAC,EAAD,EAAK,KAAKuB,OAAV,CAAjB,EAAqC4H,IAAI,IAAI,EAA7C,CAA/B;;AAEA,UAAI,CAACuB,4BAA4B,CAAC,KAAKnJ,OAAN,CAAjC,EAAiD;AAC/C,cAAMrB,aAAa,CAACC,gCAApB;AACD;;AAED,UAAIwK,gBAAgB,CAAC,KAAKpJ,OAAN,CAApB,EAAoC;AAClC,cAAMrB,aAAa,CAACK,uBAApB;AACD;;AAED,UAAI,CAACoH,mBAAmB,CAACI,eAApB,CAAoC,KAAKxG,OAAzC,CAAL,EAAwD;AACtD,cAAMrB,aAAa,CAACI,+BAApB;AACD;AACF;;AAEDT,IAAAA,cAAc,CAACgL,QAAD,EAAW,CAAC;AACxBnT,MAAAA,GAAG,EAAE,KADmB;AAExBO,MAAAA,KAAK,EAAE,SAAS8S,KAAT,CAAeC,UAAf,EAA2B;AAChC,eAAOT,GAAG,CAACS,UAAD,EAAa,KAAKzJ,OAAlB,CAAV;AACD;AAJuB,KAAD,EAKtB;AACD7J,MAAAA,GAAG,EAAE,QADJ;AAEDO,MAAAA,KAAK,EAAE,SAASgT,QAAT,CAAkB7H,aAAlB,EAAiChC,QAAjC,EAA2CG,OAA3C,EAAoD;AACzD,YAAI2J,aAAa,GAAGlL,gBAAgB,CAACA,gBAAgB,CAAC,EAAD,EAAK,KAAKuB,OAAV,CAAjB,EAAqCA,OAArC,CAApC;;AAEA,eAAO4B,MAAM,CAACC,aAAD,EAAgB8H,aAAhB,EAA+B9J,QAA/B,CAAb;AACD;AANA,KALsB,CAAX,CAAd;;AAcA,WAAOyJ,QAAP;AACD,GAzCc,EAAf;;AA2CA,MAAIM,mBAAmB,GAAG,aAAa5U,KAAK,CAAC6U,aAAN,EAAvC;AAEA,MAAIzO,IAAI,GAAG,kBAAX;AACA,MAAI0O,SAAS,GAAG,OAAhB;AACA,MAAIC,WAAW,GAAG,sHAAlB;AACA,MAAIC,OAAO,GAAG;AACbC,IAAAA,KAAK,EAAE,wBADM;AAEb5O,IAAAA,IAAI,EAAE,MAFO;AAGb,eAAW,4BAHE;AAIb,gBAAY,iBAJC;AAKb,gBAAY,cALC;AAMb,kBAAc,cAND;AAOb,sBAAkB;AAPL,GAAd;AASA,MAAI6O,UAAU,GAAG;AAChBC,IAAAA,IAAI,EAAE,KADU;AAEhBnB,IAAAA,GAAG,EAAE;AAFW,GAAjB;AAIA,MAAIoB,IAAI,GAAG,0BAAX;AACA,MAAI3V,MAAM,GAAG,8BAAb;AACA,MAAI4V,OAAO,GAAG,8BAAd;AACA,MAAIC,KAAK,GAAG,CACX,MADW,EAEX,KAFW,CAAZ;AAIA,MAAIC,IAAI,GAAG;AACVC,IAAAA,OAAO,EAAE,IADC;AAEVC,IAAAA,kBAAkB,EAAE,CACnB,oCADmB,CAFV;AAKVC,IAAAA,0BAA0B,EAAE,CAC3B,4BAD2B,CALlB;AAQVC,IAAAA,wBAAwB,EAAE,CACzB,0BADyB;AARhB,GAAX;AAYA,MAAIC,MAAM,GAAG,UAAb;AACA,MAAIC,OAAO,GAAG,KAAd;AACA,MAAIC,eAAe,GAAG;AACrB,kBAAc,QADO;AAErB,mBAAe,QAFM;AAGrB,+CAA2C,QAHtB;AAIrB,kDAA8C,QAJzB;AAKrB,yBAAqB,QALA;AAMrB,2BAAuB,QANF;AAOrB,uBAAmB,QAPE;AAQrB,sBAAkB,QARG;AASrB,4BAAwB,QATH;AAUrB,+BAA2B,SAVN;AAWrB,2BAAuB,QAXF;AAYrB,8BAA0B,QAZL;AAarB,oBAAgB,QAbK;AAcrBC,IAAAA,OAAO,EAAE,QAdY;AAerBC,IAAAA,OAAO,EAAE,QAfY;AAgBrBC,IAAAA,MAAM,EAAE,SAhBa;AAiBrB,+BAA2B,SAjBN;AAkBrBV,IAAAA,IAAI,EAAE,SAlBe;AAmBrBW,IAAAA,KAAK,EAAE,UAnBc;AAoBrB,iBAAa,UApBQ;AAqBrB,2BAAuB,UArBF;AAsBrB,6BAAyB,QAtBJ;AAuBrBC,IAAAA,MAAM,EAAE,SAvBa;AAwBrB,kCAA8B,QAxBT;AAyBrB,wCAAoC,QAzBf;AA0BrB,4BAAwB,QA1BH;AA2BrBC,IAAAA,KAAK,EAAE;AA3Bc,GAAtB;AA6BA,MAAIC,YAAY,GAAG;AAClB,2BAAuB,QADL;AAElB,kBAAc;AAFI,GAAnB;AAIA,MAAIC,gBAAgB,GAAG;AACtBJ,IAAAA,KAAK,EAAE,qBADe;AAEtB,iBAAa;AAFS,GAAvB;AAIA,MAAIK,GAAG,GAAG;AACTnQ,IAAAA,IAAI,EAAEA,IADG;AAETsD,IAAAA,OAAO,EAAEoL,SAFA;AAGTC,IAAAA,WAAW,EAAEA,WAHJ;AAITC,IAAAA,OAAO,EAAEA,OAJA;AAKTE,IAAAA,UAAU,EAAEA,UALH;AAMTE,IAAAA,IAAI,EAAEA,IANG;AAOT3V,IAAAA,MAAM,EAAEA,MAPC;AAQT4V,IAAAA,OAAO,EAAEA,OARA;AAST,mBAAe,kCATN;AAUTC,IAAAA,KAAK,EAAEA,KAVE;AAWTC,IAAAA,IAAI,EAAEA,IAXG;AAYTK,IAAAA,MAAM,EAAEA,MAZC;AAaTC,IAAAA,OAAO,EAAEA,OAbA;AAcTC,IAAAA,eAAe,EAAEA,eAdR;AAeTO,IAAAA,YAAY,EAAEA,YAfL;AAgBTC,IAAAA,gBAAgB,EAAEA;AAhBT,GAAV;;AAmBA,MAAIE,iBAAiB,GAAG,aAAa,UAAUC,cAAV,EAA0B;AAC7DzT,IAAAA,SAAS,CAACwT,iBAAD,EAAoBC,cAApB,CAAT;;AAEA,QAAIC,MAAM,GAAG7R,YAAY,CAAC2R,iBAAD,CAAzB;;AAEA,aAASA,iBAAT,CAA2B9V,KAA3B,EAAkCiW,OAAlC,EAA2C;AACzC,UAAIC,KAAJ;;AAEAxW,MAAAA,eAAe,CAAC,IAAD,EAAOoW,iBAAP,CAAf;;AAEAI,MAAAA,KAAK,GAAGF,MAAM,CAAC1U,IAAP,CAAY,IAAZ,EAAkBtB,KAAlB,EAAyBiW,OAAzB,CAAR;AACAC,MAAAA,KAAK,CAACC,UAAN,GAAmBD,KAAK,CAACC,UAAN,CAAiBC,IAAjB,CAAsBpS,sBAAsB,CAACkS,KAAD,CAA5C,CAAnB;AACA,aAAOA,KAAP;AACD;;AAEDxV,IAAAA,YAAY,CAACoV,iBAAD,EAAoB,CAAC;AAC/BrV,MAAAA,GAAG,EAAE,YAD0B;AAE/BO,MAAAA,KAAK,EAAE,SAASqV,UAAT,GAAsB;AAC3B,eAAOR,GAAG,CAAC7M,OAAX;AACD;AAJ8B,KAAD,EAK7B;AACDvI,MAAAA,GAAG,EAAE,YADJ;AAEDO,MAAAA,KAAK,EAAE,SAASmV,UAAT,GAAsB;AAC3B,eAAO,KAAKF,OAAL,IAAgB,EAAvB;AACD;AAJA,KAL6B,EAU7B;AACDxV,MAAAA,GAAG,EAAE,aADJ;AAEDO,MAAAA,KAAK,EAAE,SAASsV,WAAT,GAAuB;AAC5B,YAAIC,cAAc,GAAG,KAAKJ,UAAL,EAArB;;AAEA,YAAII,cAAc,CAACC,QAAnB,EAA6B;AAC3B,iBAAOD,cAAc,CAACC,QAAtB;AACD;;AAED,YAAIhE,WAAW,GAAG,KAAKxS,KAAL,CAAWwS,WAA7B;AACAA,QAAAA,WAAW,GAAGA,WAAW,IAAI+D,cAAc,CAAC/D,WAA5C;;AAEA,YAAI,CAACA,WAAD,IAAgBA,WAAW,CAAC9C,IAAZ,OAAuB,EAA3C,EAA+C;AAC7C,gBAAM,IAAIrJ,KAAJ,CAAU,2CAAV,CAAN;AACD;;AAED,YAAImQ,QAAQ,GAAG,IAAI5C,QAAJ,CAAa;AAC1BjB,UAAAA,UAAU,EAAE,SAASkB,MAAT,CAAgB,KAAKwC,UAAL,EAAhB,CADc;AAE1B7D,UAAAA,WAAW,EAAEA;AAFa,SAAb,CAAf;AAIA,eAAOgE,QAAP;AACD;AArBA,KAV6B,EAgC7B;AACD/V,MAAAA,GAAG,EAAE,QADJ;AAEDO,MAAAA,KAAK,EAAE,SAASyV,MAAT,GAAkB;AACvB,eAAO,IAAP;AACD;AAJA,KAhC6B,CAApB,CAAZ;;AAuCA,WAAOX,iBAAP;AACD,GAvDoC,CAuDnCxW,KAAK,CAACoX,aAvD6B,CAArC;;AAyDAZ,EAAAA,iBAAiB,CAACa,WAAlB,GAAgCzC,mBAAhC;AAEA,MAAI0C,YAAY,GAAG;AACjBtK,IAAAA,SAAS,EAAE7D,SAAS,CAACf,MADJ;AAEjB8K,IAAAA,WAAW,EAAE/J,SAAS,CAACf,MAFN;AAGjB0D,IAAAA,sBAAsB,EAAE3C,SAAS,CAACf;AAHjB,GAAnB;AAMA,MAAImP,cAAc,GAAG;AACnBC,IAAAA,OAAO,EAAErO,SAAS,CAACN,KAAV,CAAgB,CAAC,MAAD,CAAhB,CADU;AAEnB4O,IAAAA,IAAI,EAAEtO,SAAS,CAAChH,MAFG;AAGnBwE,IAAAA,IAAI,EAAEwC,SAAS,CAACf,MAHG;AAInByK,IAAAA,GAAG,EAAE1J,SAAS,CAACf,MAJI;AAKnBmL,IAAAA,eAAe,EAAEpK,SAAS,CAAChH,MALR;AAMnBuR,IAAAA,cAAc,EAAEvK,SAAS,CAACZ,OAAV,CAAkBY,SAAS,CAAChH,MAA5B,CANG;AAOnBoP,IAAAA,sBAAsB,EAAEpI,SAAS,CAACN,KAAV,CAAgB,CAAC,MAAD,EAAS,OAAT,CAAhB;AAPL,GAArB;AAUA,MAAI6O,eAAe,GAAG;AACpB3K,IAAAA,QAAQ,EAAE5D,SAAS,CAACf,MADA;AAEpB6E,IAAAA,IAAI,EAAE9D,SAAS,CAACnB,KAFI;AAGpB2P,IAAAA,iBAAiB,EAAExO,SAAS,CAAClB,IAHT;AAIpB2P,IAAAA,cAAc,EAAEzO,SAAS,CAACnB,KAJN;AAKpB6P,IAAAA,aAAa,EAAE1O,SAAS,CAAClB,IALL;AAMpB6P,IAAAA,MAAM,EAAE3O,SAAS,CAACf,MANE;AAOpB2P,IAAAA,iBAAiB,EAAE5O,SAAS,CAACf,MAPT;AAQpB4P,IAAAA,OAAO,EAAE7O,SAAS,CAACjB,IARC;AASpB+P,IAAAA,SAAS,EAAE9O,SAAS,CAACjB;AATD,GAAtB;;AAYA,MAAIgQ,UAAU,GAAGtV,cAAc,CAACA,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK0U,YAAL,CAAf,EAAmCC,cAAnC,CAAf,EAAmEG,eAAnE,CAA/B;AACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGE,MAAIS,SAAS,GAAG,aAAa,UAAUC,kBAAV,EAA8B;AACzDpV,IAAAA,SAAS,CAACmV,SAAD,EAAYC,kBAAZ,CAAT;;AAEA,QAAI1B,MAAM,GAAG7R,YAAY,CAACsT,SAAD,CAAzB;;AAEA,aAASA,SAAT,GAAqB;AACnB/X,MAAAA,eAAe,CAAC,IAAD,EAAO+X,SAAP,CAAf;;AAEA,aAAOzB,MAAM,CAACzU,KAAP,CAAa,IAAb,EAAmBJ,SAAnB,CAAP;AACD;;AAEDT,IAAAA,YAAY,CAAC+W,SAAD,EAAY,CAAC;AACvBhX,MAAAA,GAAG,EAAE,uBADkB;AAEvBO,MAAAA,KAAK,EAAE,SAAS2W,qBAAT,CAA+B1D,aAA/B,EAA8C;AACnD,YAAIzP,MAAM,GAAG,EAAb;AACA,YAAIoT,QAAQ,GAAGrX,MAAM,CAACoB,IAAP,CAAY6V,UAAZ,CAAf;;AAEA,aAAK,IAAIvX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2X,QAAQ,CAAC1X,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,cAAIQ,GAAG,GAAGmX,QAAQ,CAAC3X,CAAD,CAAlB;AACA,cAAIe,KAAK,GAAGiT,aAAa,CAACxT,GAAD,CAAzB;AACA,cAAIO,KAAJ,EAAWwD,MAAM,CAAC/D,GAAD,CAAN,GAAcO,KAAd;AACZ;;AAED,eAAOwD,MAAP;AACD;AAbsB,KAAD,EAcrB;AACD/D,MAAAA,GAAG,EAAE,QADJ;AAEDO,MAAAA,KAAK,EAAE,SAASyV,MAAT,GAAkB;AACvB,YAAIoB,QAAQ,GAAG,KAAK7X,KAAL,CAAW6X,QAA1B;;AAEA,YAAI5D,aAAa,GAAG/R,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK,KAAKiU,UAAL,EAAL,CAAf,EAAwC,KAAKnW,KAA7C,CAAlC;;AAEA,YAAIuW,cAAc,GAAG,KAAKoB,qBAAL,CAA2B1D,aAA3B,CAArB;;AAEA,YAAIsC,cAAc,CAAC/D,WAAf,IAA8B+D,cAAc,CAAC/D,WAAf,CAA2B9C,IAA3B,OAAsC,EAAxE,EAA4E;AAC1E6G,UAAAA,cAAc,CAACC,QAAf,GAA0B,IAAI5C,QAAJ,CAAa;AACrCjB,YAAAA,UAAU,EAAE,SAASkB,MAAT,CAAgB,KAAKwC,UAAL,EAAhB,CADyB;AAErC7D,YAAAA,WAAW,EAAE+D,cAAc,CAAC/D;AAFS,WAAb,CAA1B;AAID;;AAED,eAAO,aAAa/S,cAAc,CAAC,SAAD,CAAd,CAA0BqY,aAA1B,CAAwC5D,mBAAmB,CAAC6D,QAA5D,EAAsE;AACxF/W,UAAAA,KAAK,EAAEuV;AADiF,SAAtE,EAEjBsB,QAFiB,CAApB;AAGD;AAnBA,KAdqB,CAAZ,CAAZ;;AAoCA,WAAOJ,SAAP;AACD,GAhD4B,CAgD3B3B,iBAhD2B,CAA7B;;AAkDA2B,EAAAA,SAAS,CAAChP,SAAV,GAAsB+O,UAAtB;AACAC,EAAAA,SAAS,CAACd,WAAV,GAAwBzC,mBAAxB;;AAEA,MAAI8D,YAAY,GAAG9V,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK0U,YAAL,CAAf,EAAmCC,cAAnC,CAAjC;;AAEA,MAAIoB,iBAAiB,GAAG,CAAC,aAAD,EAAgB,MAAhB,EAAwB,KAAxB,EAA+B,gBAA/B,EAAiD,wBAAjD,EAA2E,iBAA3E,CAAxB;;AAEA,MAAIC,OAAO,GAAG,aAAa,UAAUR,kBAAV,EAA8B;AACvDpV,IAAAA,SAAS,CAAC4V,OAAD,EAAUR,kBAAV,CAAT;;AAEA,QAAI1B,MAAM,GAAG7R,YAAY,CAAC+T,OAAD,CAAzB;;AAEA,aAASA,OAAT,CAAiBlY,KAAjB,EAAwBiW,OAAxB,EAAiC;AAC/B,UAAIC,KAAJ;;AAEAxW,MAAAA,eAAe,CAAC,IAAD,EAAOwY,OAAP,CAAf;;AAEAhC,MAAAA,KAAK,GAAGF,MAAM,CAAC1U,IAAP,CAAY,IAAZ,EAAkBtB,KAAlB,EAAyBiW,OAAzB,CAAR;AACAC,MAAAA,KAAK,CAACiC,QAAN,GAAiB,aAAa1Y,cAAc,CAAC,SAAD,CAAd,CAA0B2Y,SAA1B,EAA9B;;AAEA,UAAIC,YAAY,GAAGnC,KAAK,CAACoC,MAAN,EAAnB;AAAA,UACIC,WAAW,GAAGF,YAAY,CAACE,WAD/B;AAAA,UAEIC,OAAO,GAAGH,YAAY,CAACG,OAF3B;;AAIAtC,MAAAA,KAAK,CAACuC,KAAN,GAAc;AACZC,QAAAA,UAAU,EAAEtS,SADA;AAEZmS,QAAAA,WAAW,EAAEA,WAFD;AAGZC,QAAAA,OAAO,EAAEA,OAHG;AAIZG,QAAAA,iBAAiB,EAAE,KAJP;AAKZC,QAAAA,WAAW,EAAE,KALD;AAMZrC,QAAAA,cAAc,EAAE;AANJ,OAAd;AAQA,aAAOL,KAAP;AACD;;AAEDxV,IAAAA,YAAY,CAACwX,OAAD,EAAU,CAAC;AACrBzX,MAAAA,GAAG,EAAE,QADgB;AAErBO,MAAAA,KAAK,EAAE,SAASsX,MAAT,GAAkB;AACvB,YAAI9T,MAAM,GAAG,EAAb;AACA,YAAIqU,WAAW,GAAG,KAAK7Y,KAAvB;AAAA,YACI+W,IAAI,GAAG8B,WAAW,CAAC9B,IADvB;AAAA,YAEI5E,GAAG,GAAG0G,WAAW,CAAC1G,GAFtB;AAAA,YAGIlM,IAAI,GAAG4S,WAAW,CAAC5S,IAHvB;AAAA,YAII+M,cAAc,GAAG6F,WAAW,CAAC7F,cAJjC;AAAA,YAKInC,sBAAsB,GAAGgI,WAAW,CAAChI,sBALzC;AAAA,YAMIgC,eAAe,GAAGgG,WAAW,CAAChG,eANlC;AAOA,YAAI2D,QAAQ,GAAG,KAAKF,WAAL,EAAf;AACA,YAAIC,cAAc,GAAG,KAAKJ,UAAL,EAArB;AACA,YAAI7L,OAAO,GAAG;AACZkI,UAAAA,WAAW,EAAE,KAAKxS,KAAL,CAAWwS,WAAX,IAA0B+D,cAAc,CAAC/D,WAD1C;AAEZL,UAAAA,GAAG,EAAEA,GAAG,IAAIoE,cAAc,CAACpE,GAFf;AAGZlM,UAAAA,IAAI,EAAEA,IAAI,IAAIsQ,cAAc,CAACtQ,IAHjB;AAIZ+M,UAAAA,cAAc,EAAEA,cAAc,IAAIuD,cAAc,CAACvD,cAJrC;AAKZnC,UAAAA,sBAAsB,EAAEA,sBAAsB,IAAI0F,cAAc,CAAC1F,sBALrD;AAMZgC,UAAAA,eAAe,EAAEA,eAAe,IAAI0D,cAAc,CAAC1D;AANvC,SAAd;AAQArO,QAAAA,MAAM,CAAC+T,WAAP,GAAqB/B,QAAQ,CAAClD,GAAT,CAAahJ,OAAb,CAArB;;AAEA,YAAIyM,IAAI,IAAIA,IAAI,CAAC+B,MAAjB,EAAyB;AACvB,cAAI/L,OAAO,GAAGgM,QAAQ,CAAChC,IAAI,CAAChK,OAAL,IAAgBgK,IAAI,CAACiC,SAAtB,EAAiC,EAAjC,CAAR,IAAgD,EAA9D;AACA,cAAIrL,IAAI,GAAGoL,QAAQ,CAAChC,IAAI,CAACpJ,IAAL,IAAaoJ,IAAI,CAACpJ,IAAnB,EAAyB,EAAzB,CAAR,IAAwC,CAAnD;AACA,cAAIsL,iBAAiB,GAAG3O,OAAO,CAAC0I,cAAR,GAAyBtO,kBAAkB,CAAC4F,OAAO,CAAC0I,cAAT,CAA3C,GAAsE,EAA9F;;AAEA,cAAI+D,IAAI,CAACmC,GAAL,IAAY,OAAOnC,IAAI,CAACmC,GAAZ,KAAoB,QAAhC,IAA4CnC,IAAI,CAACmC,GAAL,CAASxJ,IAAT,MAAmB,EAAnE,EAAuE;AACrEuJ,YAAAA,iBAAiB,CAAChX,IAAlB,CAAuB;AACrBiX,cAAAA,GAAG,EAAEnC,IAAI,CAACmC,GAAL,CAASxJ,IAAT;AADgB,aAAvB;AAGD,WAJD,MAIO;AACLuJ,YAAAA,iBAAiB,CAAChX,IAAlB,CAAuB;AACrB8K,cAAAA,OAAO,EAAEA,OADY;AAErBY,cAAAA,IAAI,EAAEA;AAFe,aAAvB;AAID;;AAEDnJ,UAAAA,MAAM,CAACgU,OAAP,GAAiBhC,QAAQ,CAAClD,GAAT,CAAapR,cAAc,CAACA,cAAc,CAAC,EAAD,EAAKoI,OAAL,CAAf,EAA8B,EAA9B,EAAkC;AAC5E0I,YAAAA,cAAc,EAAEiG;AAD4D,WAAlC,CAA3B,CAAjB;AAGD;;AAED,eAAOzU,MAAP;AACD;AA7CoB,KAAD,EA8CnB;AACD/D,MAAAA,GAAG,EAAE,wBADJ;AAEDO,MAAAA,KAAK,EAAE,SAASmY,sBAAT,GAAkC;AACvC,YAAI;AACF,iBAAOC,SAAS,CAACC,UAAV,CAAqBC,aAA5B;AACD,SAFD,CAEE,OAAOzN,EAAP,EAAW;AACX,iBAAO,IAAP;AACD;AACF;AARA,KA9CmB,EAuDnB;AACDpL,MAAAA,GAAG,EAAE,gBADJ;AAEDO,MAAAA,KAAK,EAAE,SAASuY,cAAT,GAA0B;AAC/B;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ,YAAIC,WAAW,GAAG,KAAKf,KAAvB;AAAA,YACIG,WAAW,GAAGY,WAAW,CAACZ,WAD9B;AAAA,YAEID,iBAAiB,GAAGa,WAAW,CAACb,iBAFpC;AAGA,YAAIc,YAAY,GAAG,KAAKzZ,KAAxB;AAAA,YACI0Z,iBAAiB,GAAGD,YAAY,CAAC1C,IADrC;AAAA,YAEIA,IAAI,GAAG2C,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,IAA/B,GAAsCA,iBAFjD;AAAA,YAGI5C,OAAO,GAAG2C,YAAY,CAAC3C,OAH3B;;AAKA,YAAIA,OAAO,KAAK,MAAZ,IAAsBC,IAAI,KAAK,IAAnC,EAAyC;AACvC,eAAK4C,QAAL,CAAc;AACZjB,YAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWF;AADX,WAAd;AAGD,SAJD,MAIO,IAAIzB,OAAO,KAAK,MAAZ,IAAsBC,IAAtB,IAA8BA,IAAI,CAAC+B,MAAvC,EAA+C;AACpD,cAAIH,iBAAJ,EAAuB;AACrB,iBAAKgB,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWF;AADX,aAAd;AAGD,WAJD,MAIO;AACL,iBAAKoB,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWD;AADX,aAAd;AAGD;AACF,SAVM,MAUA,IAAI1B,OAAO,KAAK,MAAZ,IAAsBC,IAAI,KAAK,IAAnC,EAAyC;AAC9C,cAAI6B,WAAJ,EAAiB;AACf,iBAAKe,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWF;AADX,aAAd;AAGD,WAJD,MAIO;AACL,iBAAKoB,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE;AADA,aAAd;AAGD;AACF,SAVM,MAUA,IAAI5B,OAAO,KAAK,MAAZ,IAAsBC,IAAtB,IAA8BA,IAAI,CAAC+B,MAAvC,EAA+C;AACpD,cAAIF,WAAW,IAAID,iBAAnB,EAAsC;AACpC,iBAAKgB,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWF;AADX,aAAd;AAGD,WAJD,MAIO;AACL,iBAAKoB,QAAL,CAAc;AACZjB,cAAAA,UAAU,EAAE,KAAKD,KAAL,CAAWD;AADX,aAAd;AAGD;AACF;AACF;AA7DA,KAvDmB,EAqHnB;AACD/X,MAAAA,GAAG,EAAE,0BADJ;AAEDO,MAAAA,KAAK,EAAE,SAAS4Y,wBAAT,GAAoC;AACzC,YAAIC,MAAM,GAAG,IAAb;;AAEA,YAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV;;AAEAD,QAAAA,GAAG,CAACvO,MAAJ,GAAa,YAAY;AACvBsO,UAAAA,MAAM,CAACF,QAAP,CAAgB;AACdhB,YAAAA,iBAAiB,EAAE;AADL,WAAhB,EAEG,YAAY;AACbkB,YAAAA,MAAM,CAACN,cAAP;AACD,WAJD;AAKD,SAND;;AAQAO,QAAAA,GAAG,CAAC3H,GAAJ,GAAU,KAAKsG,KAAL,CAAWF,WAArB;AACD;AAhBA,KArHmB,EAsInB;AACD9X,MAAAA,GAAG,EAAE,mBADJ;AAEDO,MAAAA,KAAK,EAAE,SAASgZ,iBAAT,GAA6B;AAClC,YAAIC,MAAM,GAAG,IAAb;;AAEA,aAAKV,cAAL;AACA,aAAKI,QAAL,CAAc;AACZpD,UAAAA,cAAc,EAAE,KAAKJ,UAAL;AADJ,SAAd;AAGA,YAAI+D,KAAK,GAAG,KAAK/B,QAAL,CAAcgC,OAA1B;AACA,YAAIC,YAAY,GAAG,KAAKpa,KAAxB;AAAA,YACI+W,IAAI,GAAGqD,YAAY,CAACrD,IADxB;AAAA,YAEID,OAAO,GAAGsD,YAAY,CAACtD,OAF3B;;AAIA,YAAIuD,MAAM,IAAI,0BAA0BA,MAApC,IAA8CvD,OAAO,KAAK,MAA9D,EAAsE;AACpE,cAAIwD,cAAc,GAAG,KAAKnB,sBAAL,EAArB,CADoE,CAChB;;AAEpD,cAAIoB,UAAU,GAAG,QAAjB;AACA,cAAID,cAAc,KAAK,IAAvB,EAA6BC,UAAU,GAAG,QAAb;AAC7B,cAAIC,aAAa,GAAG,IAAIC,oBAAJ,CAAyB,UAAUC,OAAV,EAAmB;AAC9D,gBAAIC,EAAE,GAAGD,OAAO,CAAC,CAAD,CAAhB;;AAEA,gBAAIC,EAAE,IAAIA,EAAE,CAACC,cAAb,EAA6B;AAC3BX,cAAAA,MAAM,CAACN,QAAP,CAAgB;AACdf,gBAAAA,WAAW,EAAE;AADC,eAAhB,EAEG,YAAY;AACb,oBAAI7B,IAAI,IAAIA,IAAI,CAAC+B,MAAjB,EAAyBmB,MAAM,CAACL,wBAAP;AACzBY,gBAAAA,aAAa,CAACK,UAAd;;AAEAZ,gBAAAA,MAAM,CAACV,cAAP;AACD,eAPD;AAQD;AACF,WAbmB,EAajB;AACDgB,YAAAA,UAAU,EAAE,GAAG1G,MAAH,CAAU0G,UAAV,EAAsB,OAAtB,EAA+B1G,MAA/B,CAAsC0G,UAAtC,EAAkD,MAAlD;AADX,WAbiB,CAApB;AAgBAC,UAAAA,aAAa,CAACM,OAAd,CAAsBZ,KAAtB;AACA,eAAKP,QAAL,CAAc;AACZmB,YAAAA,OAAO,EAAEN;AADG,WAAd;AAGD,SAzBD,MAyBO;AACL;AACA,eAAKb,QAAL,CAAc;AACZf,YAAAA,WAAW,EAAE;AADD,WAAd,EAEG,YAAY;AACb,gBAAI7B,IAAI,IAAIA,IAAI,CAAC+B,MAAjB,EAAyBmB,MAAM,CAACL,wBAAP;;AAEzBK,YAAAA,MAAM,CAACV,cAAP;AACD,WAND;AAOD;AACF;AAjDA,KAtImB,EAwLnB;AACD9Y,MAAAA,GAAG,EAAE,sBADJ;AAEDO,MAAAA,KAAK,EAAE,SAAS+Z,oBAAT,GAAgC;AACrC,YAAID,OAAO,GAAG,KAAKrC,KAAL,CAAWqC,OAAzB;AACA,YAAIA,OAAJ,EAAaA,OAAO,CAACD,UAAR;AACd;AALA,KAxLmB,EA8LnB;AACDpa,MAAAA,GAAG,EAAE,qBADJ;AAEDO,MAAAA,KAAK,EAAE,SAASga,mBAAT,CAA6BC,SAA7B,EAAwCC,QAAxC,EAAkD;AACvD,aAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGlD,iBAAiB,CAAC/X,MAA9C,EAAsDib,KAAK,EAA3D,EAA+D;AAC7D,cAAIF,SAAS,CAAChD,iBAAiB,CAACkD,KAAD,CAAlB,CAAT,IAAuCD,QAAQ,CAACjD,iBAAiB,CAACkD,KAAD,CAAlB,CAAnD,EAA+E;AAC7E,mBAAO,IAAP;AACD;AACF;;AAED,eAAO,KAAP;AACD;AAVA,KA9LmB,EAyMnB;AACD1a,MAAAA,GAAG,EAAE,oBADJ;AAEDO,MAAAA,KAAK,EAAE,SAASoa,kBAAT,CAA4BH,SAA5B,EAAuCI,SAAvC,EAAkD;AACvD,YAAIC,MAAM,GAAG,IAAb;;AAEA,YAAI/E,cAAc,GAAG,KAAKJ,UAAL,EAArB;;AAEA,YAAI,KAAK6E,mBAAL,CAAyBC,SAAzB,EAAoC,KAAKjb,KAAzC,KAAmD,KAAKgb,mBAAL,CAAyBK,SAAS,CAAC9E,cAAnC,EAAmDA,cAAnD,CAAvD,EAA2H;AACzH,cAAIgF,aAAa,GAAG,KAAKjD,MAAL,EAApB;AAAA,cACIC,WAAW,GAAGgD,aAAa,CAAChD,WADhC;AAAA,cAEIC,OAAO,GAAG+C,aAAa,CAAC/C,OAF5B;;AAIA,eAAKmB,QAAL,CAAc;AACZpB,YAAAA,WAAW,EAAEA,WADD;AAEZC,YAAAA,OAAO,EAAEA;AAFG,WAAd,EAGG,YAAY;AACb8C,YAAAA,MAAM,CAAC/B,cAAP;;AAEA+B,YAAAA,MAAM,CAAC3B,QAAP,CAAgB;AACdpD,cAAAA,cAAc,EAAE+E,MAAM,CAACnF,UAAP;AADF,aAAhB;AAGD,WATD;AAUD;AACF;AAvBA,KAzMmB,EAiOnB;AACD1V,MAAAA,GAAG,EAAE,QADJ;AAEDO,MAAAA,KAAK,EAAE,SAASyV,MAAT,GAAkB;AACvB,YAAIiC,UAAU,GAAG,KAAKD,KAAL,CAAWC,UAA5B;;AAEA,YAAI8C,YAAY,GAAG,KAAKxb,KAAxB;AAAA,YACIwS,WAAW,GAAGgJ,YAAY,CAAChJ,WAD/B;AAAA,YAEIsE,OAAO,GAAG0E,YAAY,CAAC1E,OAF3B;AAAA,YAGIC,IAAI,GAAGyE,YAAY,CAACzE,IAHxB;AAAA,YAII9Q,IAAI,GAAGuV,YAAY,CAACvV,IAJxB;AAAA,YAKIkM,GAAG,GAAGqJ,YAAY,CAACrJ,GALvB;AAAA,YAMIa,cAAc,GAAGwI,YAAY,CAACxI,cANlC;AAAA,YAOInC,sBAAsB,GAAG2K,YAAY,CAAC3K,sBAP1C;AAAA,YAQIgC,eAAe,GAAG2I,YAAY,CAAC3I,eARnC;AAAA,YASI4I,SAAS,GAAG5X,wBAAwB,CAAC2X,YAAD,EAAe,CAAC,aAAD,EAAgB,SAAhB,EAA2B,MAA3B,EAAmC,MAAnC,EAA2C,KAA3C,EAAkD,gBAAlD,EAAoE,wBAApE,EAA8F,iBAA9F,CAAf,CATxC;;AAWA,eAAO,aAAa/b,cAAc,CAAC,SAAD,CAAd,CAA0BqY,aAA1B,CAAwC,KAAxC,EAA+C7W,QAAQ,CAAC;AAC1Eya,UAAAA,GAAG,EAAE,KAAK1b,KAAL,CAAW0b,GAAX,IAAkB,EADmD;AAE1EvJ,UAAAA,GAAG,EAAEuG,UAFqE;AAG1EiD,UAAAA,GAAG,EAAE,KAAKxD;AAHgE,SAAD,EAIxEsD,SAJwE,CAAvD,CAApB;AAKD;AArBA,KAjOmB,CAAV,CAAZ;;AAyPA,WAAOvD,OAAP;AACD,GAtR0B,CAsRzBpC,iBAtRyB,CAA3B;;AAwRAoC,EAAAA,OAAO,CAACzP,SAAR,GAAoBuP,YAApB;;AAEA,MAAI4D,YAAY,GAAG1Z,cAAc,CAACA,cAAc,CAAC,EAAD,EAAK0U,YAAL,CAAf,EAAmCI,eAAnC,CAAjC;;AAEA,MAAI6E,QAAQ,GAAG,aAAa,UAAUnE,kBAAV,EAA8B;AACxDpV,IAAAA,SAAS,CAACuZ,QAAD,EAAWnE,kBAAX,CAAT;;AAEA,QAAI1B,MAAM,GAAG7R,YAAY,CAAC0X,QAAD,CAAzB;;AAEA,aAASA,QAAT,GAAoB;AAClBnc,MAAAA,eAAe,CAAC,IAAD,EAAOmc,QAAP,CAAf;;AAEA,aAAO7F,MAAM,CAACzU,KAAP,CAAa,IAAb,EAAmBJ,SAAnB,CAAP;AACD;;AAEDT,IAAAA,YAAY,CAACmb,QAAD,EAAW,CAAC;AACtBpb,MAAAA,GAAG,EAAE,YADiB;AAEtBO,MAAAA,KAAK,EAAE,SAAS8J,UAAT,CAAoBtL,CAApB,EAAuB;AAC5B,YAAI+W,cAAc,GAAG,KAAKJ,UAAL,EAArB;AACA,YAAI0C,WAAW,GAAG,KAAK7Y,KAAvB;AAAA,YACIqM,QAAQ,GAAGwM,WAAW,CAACxM,QAD3B;AAAA,YAEI4K,iBAAiB,GAAG4B,WAAW,CAAC5B,iBAFpC;AAAA,YAGI1K,IAAI,GAAGsM,WAAW,CAACtM,IAHvB;AAAA,YAII6K,MAAM,GAAGyB,WAAW,CAACzB,MAJzB;AAAA,YAKID,aAAa,GAAG0B,WAAW,CAAC1B,aALhC;AAAA,YAMIE,iBAAiB,GAAGwB,WAAW,CAACxB,iBANpC;AAAA,YAOIH,cAAc,GAAG2B,WAAW,CAAC3B,cAPjC;AAAA,YAQII,OAAO,GAAGuB,WAAW,CAACvB,OAR1B;AAAA,YASIC,SAAS,GAAGsB,WAAW,CAACtB,SAT5B;AAUA,YAAIjL,SAAS,GAAG,KAAKtM,KAAL,CAAWsM,SAAX,IAAwBiK,cAAc,CAACjK,SAAvD;AACA,YAAIlB,sBAAsB,GAAG,KAAKpL,KAAL,CAAWoL,sBAAX,IAAqCmL,cAAc,CAACnL,sBAAjF;AACA,YAAIoH,WAAW,GAAG,KAAKxS,KAAL,CAAWwS,WAAX,IAA0B+D,cAAc,CAAC/D,WAA3D;;AAEA,YAAI,CAAClG,SAAD,IAAcA,SAAS,CAACoD,IAAV,OAAqB,EAAvC,EAA2C;AACzC,cAAI4H,OAAO,IAAI,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5CA,YAAAA,OAAO,CAAC;AACNnO,cAAAA,OAAO,EAAE;AADH,aAAD,CAAP;AAGD;;AAED;AACD;;AAED,YAAI,CAACiC,sBAAD,IAA2BA,sBAAsB,CAACsE,IAAvB,OAAkC,EAAjE,EAAqE;AACnE,cAAI4H,OAAO,IAAI,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5CA,YAAAA,OAAO,CAAC;AACNnO,cAAAA,OAAO,EAAE;AADH,aAAD,CAAP;AAGD;;AAED;AACD;;AAED,YAAI,CAACqJ,WAAD,IAAgBA,WAAW,CAAC9C,IAAZ,OAAuB,EAA3C,EAA+C;AAC7C,cAAI4H,OAAO,IAAI,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5CA,YAAAA,OAAO,CAAC;AACNnO,cAAAA,OAAO,EAAE;AADH,aAAD,CAAP;AAGD;;AAED;AACD;;AAED,YAAIqN,QAAQ,GAAG,KAAKF,WAAL,EAAf;AACA,YAAIlK,IAAI,GAAG5M,CAAC,CAACO,MAAF,CAAS6U,KAAT,CAAe,CAAf,CAAX;AACA,YAAIkH,MAAM,GAAG;AACX1P,UAAAA,IAAI,EAAEA,IADK;AAEXC,UAAAA,QAAQ,EAAEA,QAAQ,IAAID,IAAI,CAAC1G,IAFhB;AAGXuR,UAAAA,iBAAiB,EAAEA,iBAHR;AAIX1K,UAAAA,IAAI,EAAEA,IAJK;AAKX6K,UAAAA,MAAM,EAAEA,MALG;AAMXD,UAAAA,aAAa,EAAEA,aANJ;AAOXE,UAAAA,iBAAiB,EAAEA,iBAPR;AAQXH,UAAAA,cAAc,EAAEA;AARL,SAAb;AAUAV,QAAAA,QAAQ,CAACtK,MAAT,CAAgB4P,MAAhB,EAAwB,UAAU5U,GAAV,EAAe1C,MAAf,EAAuB;AAC7C,cAAI0C,GAAJ,EAAS;AACP,gBAAIoQ,OAAO,IAAI,OAAOA,OAAP,KAAmB,UAAlC,EAA8C;AAC5CA,cAAAA,OAAO,CAACpQ,GAAD,CAAP;AACD;AACF,WAJD,MAIO;AACL,gBAAIqQ,SAAS,IAAI,OAAOA,SAAP,KAAqB,UAAtC,EAAkD;AAChDA,cAAAA,SAAS,CAAC/S,MAAD,CAAT;AACD;AACF;AACF,SAVD,EAUG;AACD8H,UAAAA,SAAS,EAAEA,SADV;AAEDlB,UAAAA,sBAAsB,EAAEA;AAFvB,SAVH;AAcD;AA1EqB,KAAD,EA2EpB;AACD3K,MAAAA,GAAG,EAAE,QADJ;AAEDO,MAAAA,KAAK,EAAE,SAASyV,MAAT,GAAkB;AACvB,YAAIP,KAAK,GAAG,IAAZ;;AAEA,YAAIuD,YAAY,GAAG,KAAKzZ,KAAxB;AAAA,YACIsM,SAAS,GAAGmN,YAAY,CAACnN,SAD7B;AAAA,YAEIkG,WAAW,GAAGiH,YAAY,CAACjH,WAF/B;AAAA,YAGIpH,sBAAsB,GAAGqO,YAAY,CAACrO,sBAH1C;AAAA,YAIIiB,QAAQ,GAAGoN,YAAY,CAACpN,QAJ5B;AAAA,YAKI4K,iBAAiB,GAAGwC,YAAY,CAACxC,iBALrC;AAAA,YAMI1K,IAAI,GAAGkN,YAAY,CAAClN,IANxB;AAAA,YAOI6K,MAAM,GAAGqC,YAAY,CAACrC,MAP1B;AAAA,YAQID,aAAa,GAAGsC,YAAY,CAACtC,aARjC;AAAA,YASIE,iBAAiB,GAAGoC,YAAY,CAACpC,iBATrC;AAAA,YAUIH,cAAc,GAAGuC,YAAY,CAACvC,cAVlC;AAAA,YAWII,OAAO,GAAGmC,YAAY,CAACnC,OAX3B;AAAA,YAYIC,SAAS,GAAGkC,YAAY,CAAClC,SAZ7B;AAAA,YAaIkE,SAAS,GAAG5X,wBAAwB,CAAC4V,YAAD,EAAe,CAAC,WAAD,EAAc,aAAd,EAA6B,wBAA7B,EAAuD,UAAvD,EAAmE,mBAAnE,EAAwF,MAAxF,EAAgG,QAAhG,EAA0G,eAA1G,EAA2H,mBAA3H,EAAgJ,gBAAhJ,EAAkK,SAAlK,EAA6K,WAA7K,CAAf,CAbxC;;AAeA,eAAO,aAAaha,cAAc,CAAC,SAAD,CAAd,CAA0BqY,aAA1B,CAAwC,OAAxC,EAAiD7W,QAAQ,CAAC;AAC5EwT,UAAAA,IAAI,EAAE;AADsE,SAAD,EAE1EgH,SAF0E,EAE/D;AACZM,UAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBvc,CAAlB,EAAqB;AAC7B,gBAAI0W,KAAK,CAAClW,KAAN,CAAY+b,QAAZ,IAAwB,OAAO7F,KAAK,CAAClW,KAAN,CAAY+b,QAAnB,KAAgC,UAA5D,EAAwE;AACtE7F,cAAAA,KAAK,CAAClW,KAAN,CAAY+b,QAAZ,CAAqBvc,CAArB;AACD;;AAED0W,YAAAA,KAAK,CAACpL,UAAN,CAAiBtL,CAAjB;AACD;AAPW,SAF+D,CAAzD,CAApB;AAWD;AA/BA,KA3EoB,CAAX,CAAZ;;AA6GA,WAAOqc,QAAP;AACD,GAzH2B,CAyH1B/F,iBAzH0B,CAA5B;;AA0HA+F,EAAAA,QAAQ,CAACG,YAAT,GAAwB;AACtB/E,IAAAA,iBAAiB,EAAE,IADG;AAEtBE,IAAAA,aAAa,EAAE,KAFO;AAGtBE,IAAAA,iBAAiB,EAAE,EAHG;AAItB9K,IAAAA,IAAI,EAAE,EAJgB;AAKtB6K,IAAAA,MAAM,EAAE,GALc;AAMtBF,IAAAA,cAAc,EAAE;AANM,GAAxB;AAQA2E,EAAAA,QAAQ,CAACpT,SAAT,GAAqBmT,YAArB;AAEA9c,EAAAA,OAAO,CAAC2Y,SAAR,GAAoBA,SAApB;AACA3Y,EAAAA,OAAO,CAACoZ,OAAR,GAAkBA,OAAlB;AACApZ,EAAAA,OAAO,CAAC+c,QAAR,GAAmBA,QAAnB;AAEAtb,EAAAA,MAAM,CAACC,cAAP,CAAsB1B,OAAtB,EAA+B,YAA/B,EAA6C;AAAEkC,IAAAA,KAAK,EAAE;AAAT,GAA7C;AAED,CAhgDA,CAAD","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ImageKitReact = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function createCommonjsModule(fn, basedir, module) {\n  \treturn module = {\n  \t\tpath: basedir,\n  \t\texports: {},\n  \t\trequire: function (path, base) {\n  \t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n  \t\t}\n  \t}, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire () {\n  \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n\n  function emptyFunctionWithReset() {}\n\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function () {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    }\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  {\n    // By explicitly using `prop-types` you are opting into new production behavior.\n    // http://fb.me/prop-types-in-prod\n    module.exports = factoryWithThrowingShims();\n  }\n  });\n\n  function _classCallCheck$1(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties$1(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass$1(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties$1(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty$1(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys$1(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2$1(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys$1(Object(source), true).forEach(function (key) {\n          _defineProperty$1(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys$1(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var version = \"1.4.3\";\n  var errorMessages = {\n    MANDATORY_INITIALIZATION_MISSING: {\n      message: \"Missing urlEndpoint during SDK initialization\",\n      help: \"\"\n    },\n    INVALID_TRANSFORMATION_POSITION: {\n      message: \"Invalid transformationPosition parameter\",\n      help: \"\"\n    },\n    PRIVATE_KEY_CLIENT_SIDE: {\n      message: \"privateKey should not be passed on the client side\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_DATA: {\n      message: \"Missing data for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILE_PARAMETER: {\n      message: \"Missing file parameter for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILENAME_PARAMETER: {\n      message: \"Missing fileName parameter for upload\",\n      help: \"\"\n    },\n    MISSING_AUTHENTICATION_ENDPOINT: {\n      message: \"Missing authentication endpoint for upload\",\n      help: \"\"\n    },\n    MISSING_PUBLIC_KEY: {\n      message: \"Missing public key for upload\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_TIMEOUT: {\n      message: \"The authenticationEndpoint you provided timed out in 60 seconds\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to authenticationEndpoint failed due to network error\",\n      help: \"\"\n    },\n    UPLOAD_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to ImageKit upload endpoint failed due to network error\",\n      help: \"\"\n    },\n    INVALID_UPLOAD_OPTIONS: {\n      message: \"Invalid uploadOptions parameter\",\n      help: \"\"\n    }\n  };\n\n  function respond(isError, response, callback) {\n    if (typeof callback == \"function\") {\n      if (isError) {\n        callback(response, null);\n      } else {\n        callback(null, response);\n      }\n    }\n  }\n\n  var request = function request(formData, options, callback) {\n    generateSignatureToken(options, function (err, signaturObj) {\n      if (err) {\n        return respond(true, err, callback);\n      } else {\n        formData.append(\"signature\", (signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.signature) || \"\");\n        formData.append(\"expire\", String((signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.expire) || 0));\n        formData.append(\"token\", (signaturObj === null || signaturObj === void 0 ? void 0 : signaturObj.token) || \"\");\n        uploadFile(formData, function (err, responseSucessText) {\n          if (err) {\n            return respond(true, err, callback);\n          }\n\n          return respond(false, responseSucessText, callback);\n        });\n      }\n    });\n  };\n\n  var generateSignatureToken = function generateSignatureToken(options, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.timeout = 60000;\n    xhr.open('GET', options.authenticationEndpoint);\n\n    xhr.ontimeout = function (e) {\n      respond(true, errorMessages.AUTH_ENDPOINT_TIMEOUT, callback);\n    };\n\n    xhr.onerror = function () {\n      respond(true, errorMessages.AUTH_ENDPOINT_NETWORK_ERROR, callback);\n    };\n\n    xhr.onload = function () {\n      if (xhr.status === 200) {\n        try {\n          var body = JSON.parse(xhr.responseText);\n          var obj = {\n            signature: body.signature,\n            expire: body.expire,\n            token: body.token\n          };\n          respond(false, obj, callback);\n        } catch (ex) {\n          respond(true, ex, callback);\n        }\n      } else {\n        try {\n          var error = JSON.parse(xhr.responseText);\n          respond(true, error, callback);\n        } catch (ex) {\n          respond(true, ex, callback);\n        }\n      }\n    };\n\n    xhr.send();\n    return;\n  };\n\n  var uploadFile = function uploadFile(formData, callback) {\n    var uploadFileXHR = new XMLHttpRequest();\n    uploadFileXHR.open('POST', 'https://upload.imagekit.io/api/v1/files/upload');\n\n    uploadFileXHR.onerror = function () {\n      respond(true, errorMessages.UPLOAD_ENDPOINT_NETWORK_ERROR, callback);\n      return;\n    };\n\n    uploadFileXHR.onload = function () {\n      if (uploadFileXHR.status === 200) {\n        var uploadResponse = JSON.parse(uploadFileXHR.responseText);\n        callback(null, uploadResponse);\n      } else if (uploadFileXHR.status !== 200) {\n        try {\n          callback(JSON.parse(uploadFileXHR.responseText), null);\n        } catch (ex) {\n          callback(ex, null);\n        }\n      }\n    };\n\n    uploadFileXHR.send(formData);\n    return;\n  };\n\n  var upload = function upload(uploadOptions, options, callback) {\n    if (!uploadOptions) {\n      respond(true, errorMessages.INVALID_UPLOAD_OPTIONS, callback);\n      return;\n    }\n\n    if (!uploadOptions.file) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILE_PARAMETER, callback);\n      return;\n    }\n\n    if (!uploadOptions.fileName) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n      return;\n    }\n\n    if (!options.authenticationEndpoint) {\n      respond(true, errorMessages.MISSING_AUTHENTICATION_ENDPOINT, callback);\n      return;\n    }\n\n    if (!options.publicKey) {\n      respond(true, errorMessages.MISSING_PUBLIC_KEY, callback);\n      return;\n    }\n\n    if (uploadOptions.tags && Array.isArray(uploadOptions.tags)) {\n      uploadOptions.tags = String(uploadOptions.tags);\n    }\n\n    var formData = new FormData();\n    var i;\n\n    for (i in uploadOptions) {\n      var param = uploadOptions[i];\n\n      if (typeof param !== \"undefined\") {\n        if (typeof param === \"string\" || typeof param === \"boolean\") {\n          formData.append(i, String(param));\n        } else if (Array.isArray(param)) {\n          formData.append(i, JSON.stringify(param));\n        } else {\n          formData.append(i, param);\n        }\n      }\n    }\n\n    formData.append(\"publicKey\", options.publicKey);\n    request(formData, _objectSpread2$1(_objectSpread2$1({}, options), {}, {\n      authenticationEndpoint: options.authenticationEndpoint\n    }), callback);\n  };\n\n  var supportedTransforms = {\n    width: \"w\",\n    height: \"h\",\n    aspectRatio: \"ar\",\n    quality: \"q\",\n    crop: \"c\",\n    cropMode: \"cm\",\n    focus: \"fo\",\n    x: \"x\",\n    y: \"y\",\n    format: \"f\",\n    radius: \"r\",\n    background: \"bg\",\n    border: \"b\",\n    rotation: \"rt\",\n    rotate: \"rt\",\n    blur: \"bl\",\n    named: \"n\",\n    overlayImage: \"oi\",\n    overlayImageAspectRatio: \"oiar\",\n    overlayImageBackground: \"oibg\",\n    overlayImageBorder: \"oib\",\n    overlayImageDPR: \"oidpr\",\n    overlayImageQuality: \"oiq\",\n    overlayImageCropping: \"oic\",\n    overlayImageTrim: \"oit\",\n    overlayX: \"ox\",\n    overlayY: \"oy\",\n    overlayFocus: \"ofo\",\n    overlayHeight: \"oh\",\n    overlayWidth: \"ow\",\n    overlayText: \"ot\",\n    overlayTextFontSize: \"ots\",\n    overlayTextFontFamily: \"otf\",\n    overlayTextColor: \"otc\",\n    overlayTextTransparency: \"oa\",\n    overlayAlpha: \"oa\",\n    overlayTextTypography: \"ott\",\n    overlayBackground: \"obg\",\n    overlayTextEncoded: \"ote\",\n    overlayTextWidth: \"otw\",\n    overlayTextBackground: \"otbg\",\n    overlayTextPadding: \"otp\",\n    overlayTextInnerAlignment: \"otia\",\n    overlayRadius: \"or\",\n    progressive: \"pr\",\n    lossless: \"lo\",\n    trim: \"t\",\n    metadata: \"md\",\n    colorProfile: \"cp\",\n    defaultImage: \"di\",\n    dpr: \"dpr\",\n    effectSharpen: \"e-sharpen\",\n    effectUSM: \"e-usm\",\n    effectContrast: \"e-contrast\",\n    effectGray: \"e-grayscale\",\n    original: \"orig\"\n  };\n  var DEFAULT_TRANSFORMATION_POSITION = \"path\";\n  var QUERY_TRANSFORMATION_POSITION = \"query\";\n  var VALID_TRANSFORMATION_POSITIONS = [DEFAULT_TRANSFORMATION_POSITION, QUERY_TRANSFORMATION_POSITION];\n  var CHAIN_TRANSFORM_DELIMITER = \":\";\n  var TRANSFORM_DELIMITER = \",\";\n  var TRANSFORM_KEY_VALUE_DELIMITER = \"-\";\n  var transformationUtils = {\n    getDefault: function getDefault() {\n      return DEFAULT_TRANSFORMATION_POSITION;\n    },\n    addAsQueryParameter: function addAsQueryParameter(options) {\n      return options.transformationPosition === QUERY_TRANSFORMATION_POSITION;\n    },\n    validParameters: function validParameters(options) {\n      if (typeof options.transformationPosition == \"undefined\") return false;\n      return VALID_TRANSFORMATION_POSITIONS.indexOf(options.transformationPosition) != -1;\n    },\n    getTransformKey: function getTransformKey(transform) {\n      if (!transform) {\n        return \"\";\n      }\n\n      return supportedTransforms[transform] || supportedTransforms[transform.toLowerCase()] || \"\";\n    },\n    getChainTransformDelimiter: function getChainTransformDelimiter() {\n      return CHAIN_TRANSFORM_DELIMITER;\n    },\n    getTransformDelimiter: function getTransformDelimiter() {\n      return TRANSFORM_DELIMITER;\n    },\n    getTransformKeyValueDelimiter: function getTransformKeyValueDelimiter() {\n      return TRANSFORM_KEY_VALUE_DELIMITER;\n    }\n  };\n  var TRANSFORMATION_PARAMETER = \"tr\";\n\n  function removeTrailingSlash(str) {\n    if (typeof str == \"string\" && str[str.length - 1] == \"/\") {\n      str = str.substring(0, str.length - 1);\n    }\n\n    return str;\n  }\n\n  function removeLeadingSlash(str) {\n    if (typeof str == \"string\" && str[0] == \"/\") {\n      str = str.slice(1);\n    }\n\n    return str;\n  }\n\n  function pathJoin(parts, sep) {\n    var separator = sep || \"/\";\n    var replace = new RegExp(separator + \"{1,}\", \"g\");\n    return parts.join(separator).replace(replace, separator);\n  }\n\n  var buildURL = function buildURL(opts) {\n    if (!opts.path && !opts.src) {\n      return \"\";\n    }\n\n    var urlObj, isSrcParameterUsedForURL, urlEndpointPattern;\n\n    try {\n      if (opts.path) {\n        urlEndpointPattern = new URL(opts.urlEndpoint).pathname;\n        urlObj = new URL(pathJoin([opts.urlEndpoint.replace(urlEndpointPattern, \"\"), opts.path]));\n      } else {\n        urlObj = new URL(opts.src);\n        isSrcParameterUsedForURL = true;\n      }\n    } catch (e) {\n      console.error(e);\n      return \"\";\n    }\n\n    if (opts.sdkVersion && opts.sdkVersion.trim() != \"\") {\n      urlObj.searchParams.append(\"ik-sdk-version\", opts.sdkVersion.trim());\n    }\n\n    for (var i in opts.queryParameters) {\n      urlObj.searchParams.append(i, String(opts.queryParameters[i]));\n    }\n\n    var transformationString = constructTransformationString(opts.transformation);\n\n    if (transformationString && transformationString.length) {\n      if (transformationUtils.addAsQueryParameter(opts) || isSrcParameterUsedForURL) {\n        urlObj.searchParams.append(TRANSFORMATION_PARAMETER, transformationString);\n      } else {\n        urlObj.pathname = pathJoin([TRANSFORMATION_PARAMETER + transformationUtils.getChainTransformDelimiter() + transformationString, urlObj.pathname]);\n      }\n    }\n\n    if (urlEndpointPattern) {\n      urlObj.pathname = pathJoin([urlEndpointPattern, urlObj.pathname]);\n    } else {\n      urlObj.pathname = pathJoin([urlObj.pathname]);\n    }\n\n    return urlObj.href;\n  };\n\n  function constructTransformationString(transformation) {\n    if (!Array.isArray(transformation)) {\n      return \"\";\n    }\n\n    var parsedTransforms = [];\n\n    for (var i = 0, l = transformation.length; i < l; i++) {\n      var parsedTransformStep = [];\n\n      for (var key in transformation[i]) {\n        var transformKey = transformationUtils.getTransformKey(key);\n\n        if (!transformKey) {\n          transformKey = key;\n        }\n\n        if (transformation[i][key] === \"-\") {\n          parsedTransformStep.push(transformKey);\n        } else if (key === \"raw\") {\n          parsedTransformStep.push(transformation[i][key]);\n        } else {\n          var value = transformation[i][key];\n\n          if (transformKey === \"oi\" || transformKey === \"di\") {\n            value = removeTrailingSlash(removeLeadingSlash(value || \"\"));\n            value = value.replace(/\\//g, \"@@\");\n          }\n\n          parsedTransformStep.push([transformKey, value].join(transformationUtils.getTransformKeyValueDelimiter()));\n        }\n      }\n\n      parsedTransforms.push(parsedTransformStep.join(transformationUtils.getTransformDelimiter()));\n    }\n\n    return parsedTransforms.join(transformationUtils.getChainTransformDelimiter());\n  }\n\n  var url = function url(urlOpts, defaultOptions) {\n    return buildURL(_objectSpread2$1(_objectSpread2$1({}, defaultOptions), urlOpts));\n  };\n\n  function mandatoryParametersAvailable(options) {\n    return options.urlEndpoint;\n  }\n\n  function privateKeyPassed(options) {\n    return typeof options.privateKey != \"undefined\";\n  }\n\n  var ImageKit = function () {\n    function ImageKit(opts) {\n      _classCallCheck$1(this, ImageKit);\n\n      _defineProperty$1(this, \"options\", {\n        sdkVersion: \"javascript-\".concat(version),\n        publicKey: \"\",\n        urlEndpoint: \"\",\n        transformationPosition: transformationUtils.getDefault()\n      });\n\n      this.options = _objectSpread2$1(_objectSpread2$1({}, this.options), opts || {});\n\n      if (!mandatoryParametersAvailable(this.options)) {\n        throw errorMessages.MANDATORY_INITIALIZATION_MISSING;\n      }\n\n      if (privateKeyPassed(this.options)) {\n        throw errorMessages.PRIVATE_KEY_CLIENT_SIDE;\n      }\n\n      if (!transformationUtils.validParameters(this.options)) {\n        throw errorMessages.INVALID_TRANSFORMATION_POSITION;\n      }\n    }\n\n    _createClass$1(ImageKit, [{\n      key: \"url\",\n      value: function url$1(urlOptions) {\n        return url(urlOptions, this.options);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload$1(uploadOptions, callback, options) {\n        var mergedOptions = _objectSpread2$1(_objectSpread2$1({}, this.options), options);\n\n        return upload(uploadOptions, mergedOptions, callback);\n      }\n    }]);\n\n    return ImageKit;\n  }();\n\n  var ImageKitContextType = /*#__PURE__*/React.createContext();\n\n  var name = \"imagekitio-react\";\n  var version$1 = \"1.1.0\";\n  var description = \"React SDK for ImageKit.io which implements client-side upload and URL generation for use inside a react application.\";\n  var scripts = {\n  \tbuild: \"rm -rf dist*;rollup -c\",\n  \ttest: \"jest\",\n  \t\"test:ci\": \"jest --coverage && codecov\",\n  \t\"test:cov\": \"jest --coverage\",\n  \t\"test:e2e\": \"cypress open\",\n  \t\"test:watch\": \"jest --watch\",\n  \t\"serve:test-app\": \"export SKIP_PREFLIGHT_CHECK=true;npx serve -s tests/test-app/build -p 4000\"\n  };\n  var repository = {\n  \ttype: \"git\",\n  \turl: \"https://github.com/imagekit-developer/imagekit-react\"\n  };\n  var main = \"dist/imagekitio-react.js\";\n  var module = \"dist/imagekitio-react.esm.js\";\n  var browser = \"dist/imagekitio-react.umd.js\";\n  var files = [\n  \t\"dist\",\n  \t\"src\"\n  ];\n  var jest = {\n  \tverbose: true,\n  \tsetupFilesAfterEnv: [\n  \t\t\"<rootDir>/tests/jest/setupTests.js\"\n  \t],\n  \tcoveragePathIgnorePatterns: [\n  \t\t\"<rootDir>/tests/jest/mocks\"\n  \t],\n  \tmodulePathIgnorePatterns: [\n  \t\t\"<rootDir>/tests/cypress/\"\n  \t]\n  };\n  var author = \"ImageKit\";\n  var license = \"MIT\";\n  var devDependencies = {\n  \t\"@babel/cli\": \"^7.7.4\",\n  \t\"@babel/core\": \"^7.7.4\",\n  \t\"@babel/plugin-proposal-class-properties\": \"^7.7.4\",\n  \t\"@babel/plugin-proposal-export-default-from\": \"^7.7.4\",\n  \t\"@babel/preset-env\": \"^7.7.4\",\n  \t\"@babel/preset-react\": \"^7.7.4\",\n  \t\"@babel/register\": \"^7.7.4\",\n  \t\"@babel/runtime\": \"^7.7.6\",\n  \t\"@rollup/plugin-babel\": \"^5.2.1\",\n  \t\"@rollup/plugin-commonjs\": \"^15.1.0\",\n  \t\"@rollup/plugin-json\": \"^4.1.0\",\n  \t\"@rollup/plugin-replace\": \"^2.3.3\",\n  \t\"babel-loader\": \"^8.0.6\",\n  \tcodecov: \"^3.8.0\",\n  \tcypress: \"^5.6.0\",\n  \tenzyme: \"^3.11.0\",\n  \t\"enzyme-adapter-react-16\": \"^1.15.5\",\n  \tjest: \"^26.5.2\",\n  \treact: \"^16.13.1\",\n  \t\"react-dom\": \"^16.13.1\",\n  \t\"react-test-renderer\": \"^16.13.1\",\n  \t\"require-context.macro\": \"^1.2.2\",\n  \trollup: \"^2.28.2\",\n  \t\"rollup-plugin-node-resolve\": \"^5.2.0\",\n  \t\"rollup-plugin-peer-deps-external\": \"^2.2.3\",\n  \t\"rollup-plugin-terser\": \"^7.0.2\",\n  \tsinon: \"^9.2.0\"\n  };\n  var dependencies = {\n  \t\"imagekit-javascript\": \"^1.3.6\",\n  \t\"prop-types\": \"^15.7.2\"\n  };\n  var peerDependencies = {\n  \treact: \"^16.13.1 || ^17.0.0\",\n  \t\"react-dom\": \"^16.13.1 || ^17.0.0\"\n  };\n  var pkg = {\n  \tname: name,\n  \tversion: version$1,\n  \tdescription: description,\n  \tscripts: scripts,\n  \trepository: repository,\n  \tmain: main,\n  \tmodule: module,\n  \tbrowser: browser,\n  \t\"browser:min\": \"dist/imagekitio-react.umd.min.js\",\n  \tfiles: files,\n  \tjest: jest,\n  \tauthor: author,\n  \tlicense: license,\n  \tdevDependencies: devDependencies,\n  \tdependencies: dependencies,\n  \tpeerDependencies: peerDependencies\n  };\n\n  var ImageKitComponent = /*#__PURE__*/function (_PureComponent) {\n    _inherits(ImageKitComponent, _PureComponent);\n\n    var _super = _createSuper(ImageKitComponent);\n\n    function ImageKitComponent(props, context) {\n      var _this;\n\n      _classCallCheck(this, ImageKitComponent);\n\n      _this = _super.call(this, props, context);\n      _this.getContext = _this.getContext.bind(_assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass(ImageKitComponent, [{\n      key: \"getVersion\",\n      value: function getVersion() {\n        return pkg.version;\n      }\n    }, {\n      key: \"getContext\",\n      value: function getContext() {\n        return this.context || {};\n      }\n    }, {\n      key: \"getIKClient\",\n      value: function getIKClient() {\n        var contextOptions = this.getContext();\n\n        if (contextOptions.ikClient) {\n          return contextOptions.ikClient;\n        }\n\n        var urlEndpoint = this.props.urlEndpoint;\n        urlEndpoint = urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          throw new Error(\"Missing urlEndpoint during initialization\");\n        }\n\n        var ikClient = new ImageKit({\n          sdkVersion: \"react-\".concat(this.getVersion()),\n          urlEndpoint: urlEndpoint\n        });\n        return ikClient;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return null;\n      }\n    }]);\n\n    return ImageKitComponent;\n  }(React.PureComponent);\n\n  ImageKitComponent.contextType = ImageKitContextType;\n\n  var COMMON_PROPS = {\n    publicKey: propTypes.string,\n    urlEndpoint: propTypes.string,\n    authenticationEndpoint: propTypes.string\n  };\n\n  var IK_IMAGE_PROPS = {\n    loading: propTypes.oneOf(['lazy']),\n    lqip: propTypes.object,\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.object,\n    transformation: propTypes.arrayOf(propTypes.object),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n\n  var IK_UPLOAD_PROPS = {\n    fileName: propTypes.string,\n    tags: propTypes.array,\n    useUniqueFileName: propTypes.bool,\n    responseFields: propTypes.array,\n    isPrivateFile: propTypes.bool,\n    folder: propTypes.string,\n    customCoordinates: propTypes.string,\n    onError: propTypes.func,\n    onSuccess: propTypes.func\n  };\n\n  var PROP_TYPES = _objectSpread2(_objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_IMAGE_PROPS), IK_UPLOAD_PROPS);\n  /**\n   * Provides a container for ImageKit components. Any option set in IKContext will be passed to the children.\n   *\n   * @example\n   *<IKContext  publicKey=\"<public key>\" urlEndpoint=\"url link\">\n   *    <!-- other tags -->\n   *    <Image src={link}/>\n   *</IKContext>\n   */\n\n\n  var IKContext = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKContext, _ImageKitComponent);\n\n    var _super = _createSuper(IKContext);\n\n    function IKContext() {\n      _classCallCheck(this, IKContext);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(IKContext, [{\n      key: \"extractContextOptions\",\n      value: function extractContextOptions(mergedOptions) {\n        var result = {};\n        var propKeys = Object.keys(PROP_TYPES);\n\n        for (var i = 0; i < propKeys.length; i++) {\n          var key = propKeys[i];\n          var value = mergedOptions[key];\n          if (value) result[key] = value;\n        }\n\n        return result;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var children = this.props.children;\n\n        var mergedOptions = _objectSpread2(_objectSpread2({}, this.getContext()), this.props);\n\n        var contextOptions = this.extractContextOptions(mergedOptions);\n\n        if (contextOptions.urlEndpoint && contextOptions.urlEndpoint.trim() !== \"\") {\n          contextOptions.ikClient = new ImageKit({\n            sdkVersion: \"react-\".concat(this.getVersion()),\n            urlEndpoint: contextOptions.urlEndpoint\n          });\n        }\n\n        return /*#__PURE__*/React__default['default'].createElement(ImageKitContextType.Provider, {\n          value: contextOptions\n        }, children);\n      }\n    }]);\n\n    return IKContext;\n  }(ImageKitComponent);\n\n  IKContext.propTypes = PROP_TYPES;\n  IKContext.contextType = ImageKitContextType;\n\n  var PROP_TYPES$1 = _objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_IMAGE_PROPS);\n\n  var propsAffectingURL = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n\n  var IKImage = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKImage, _ImageKitComponent);\n\n    var _super = _createSuper(IKImage);\n\n    function IKImage(props, context) {\n      var _this;\n\n      _classCallCheck(this, IKImage);\n\n      _this = _super.call(this, props, context);\n      _this.imageRef = /*#__PURE__*/React__default['default'].createRef();\n\n      var _this$getSrc = _this.getSrc(),\n          originalSrc = _this$getSrc.originalSrc,\n          lqipSrc = _this$getSrc.lqipSrc;\n\n      _this.state = {\n        currentUrl: undefined,\n        originalSrc: originalSrc,\n        lqipSrc: lqipSrc,\n        originalSrcLoaded: false,\n        intersected: false,\n        contextOptions: {}\n      };\n      return _this;\n    }\n\n    _createClass(IKImage, [{\n      key: \"getSrc\",\n      value: function getSrc() {\n        var result = {};\n        var _this$props = this.props,\n            lqip = _this$props.lqip,\n            src = _this$props.src,\n            path = _this$props.path,\n            transformation = _this$props.transformation,\n            transformationPosition = _this$props.transformationPosition,\n            queryParameters = _this$props.queryParameters;\n        var ikClient = this.getIKClient();\n        var contextOptions = this.getContext();\n        var options = {\n          urlEndpoint: this.props.urlEndpoint || contextOptions.urlEndpoint,\n          src: src || contextOptions.src,\n          path: path || contextOptions.path,\n          transformation: transformation || contextOptions.transformation,\n          transformationPosition: transformationPosition || contextOptions.transformationPosition,\n          queryParameters: queryParameters || contextOptions.queryParameters\n        };\n        result.originalSrc = ikClient.url(options);\n\n        if (lqip && lqip.active) {\n          var quality = parseInt(lqip.quality || lqip.threshold, 10) || 20;\n          var blur = parseInt(lqip.blur || lqip.blur, 10) || 6;\n          var newTransformation = options.transformation ? _toConsumableArray(options.transformation) : [];\n\n          if (lqip.raw && typeof lqip.raw === \"string\" && lqip.raw.trim() != \"\") {\n            newTransformation.push({\n              raw: lqip.raw.trim()\n            });\n          } else {\n            newTransformation.push({\n              quality: quality,\n              blur: blur\n            });\n          }\n\n          result.lqipSrc = ikClient.url(_objectSpread2(_objectSpread2({}, options), {}, {\n            transformation: newTransformation\n          }));\n        }\n\n        return result;\n      }\n    }, {\n      key: \"getEffectiveConnection\",\n      value: function getEffectiveConnection() {\n        try {\n          return navigator.connection.effectiveType;\n        } catch (ex) {\n          return \"4g\";\n        }\n      }\n    }, {\n      key: \"updateImageUrl\",\n      value: function updateImageUrl() {\n        /*\n          No lazy loading no lqip\n            src=originalImage\n          No lazy loading lqip\n            src=lqip\n            src=originalImage (when loaded)\n          lazy loading and no lqip\n            src=''\n            onIntersect:\n            src=originalImage\n          lazy loading and lqip\n            src=lqip\n            onIntersect:\n            src=originalImage (when loaded)\n        */\n        var _this$state = this.state,\n            intersected = _this$state.intersected,\n            originalSrcLoaded = _this$state.originalSrcLoaded;\n        var _this$props2 = this.props,\n            _this$props2$lqip = _this$props2.lqip,\n            lqip = _this$props2$lqip === void 0 ? null : _this$props2$lqip,\n            loading = _this$props2.loading;\n\n        if (loading !== \"lazy\" && lqip === null) {\n          this.setState({\n            currentUrl: this.state.originalSrc\n          });\n        } else if (loading !== \"lazy\" && lqip && lqip.active) {\n          if (originalSrcLoaded) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: this.state.lqipSrc\n            });\n          }\n        } else if (loading === \"lazy\" && lqip === null) {\n          if (intersected) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: \"\"\n            });\n          }\n        } else if (loading === \"lazy\" && lqip && lqip.active) {\n          if (intersected && originalSrcLoaded) {\n            this.setState({\n              currentUrl: this.state.originalSrc\n            });\n          } else {\n            this.setState({\n              currentUrl: this.state.lqipSrc\n            });\n          }\n        }\n      }\n    }, {\n      key: \"triggerOriginalImageLoad\",\n      value: function triggerOriginalImageLoad() {\n        var _this2 = this;\n\n        var img = new Image();\n\n        img.onload = function () {\n          _this2.setState({\n            originalSrcLoaded: true\n          }, function () {\n            _this2.updateImageUrl();\n          });\n        };\n\n        img.src = this.state.originalSrc;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this3 = this;\n\n        this.updateImageUrl();\n        this.setState({\n          contextOptions: this.getContext()\n        });\n        var image = this.imageRef.current;\n        var _this$props3 = this.props,\n            lqip = _this$props3.lqip,\n            loading = _this$props3.loading;\n\n        if (window && 'IntersectionObserver' in window && loading === \"lazy\") {\n          var connectionType = this.getEffectiveConnection(); // Values based on native lazy loading in Chrome - https://web.dev/native-lazy-loading/#improved-data-savings-and-distance-from-viewport-thresholds\n\n          var rootMargin = \"1250px\";\n          if (connectionType !== \"4g\") rootMargin = \"2500px\";\n          var imageObserver = new IntersectionObserver(function (entries) {\n            var el = entries[0];\n\n            if (el && el.isIntersecting) {\n              _this3.setState({\n                intersected: true\n              }, function () {\n                if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n                imageObserver.disconnect();\n\n                _this3.updateImageUrl();\n              });\n            }\n          }, {\n            rootMargin: \"\".concat(rootMargin, \" 0px \").concat(rootMargin, \" 0px\")\n          });\n          imageObserver.observe(image);\n          this.setState({\n            observe: imageObserver\n          });\n        } else {\n          // Load original image right away\n          this.setState({\n            intersected: true\n          }, function () {\n            if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n\n            _this3.updateImageUrl();\n          });\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var observe = this.state.observe;\n        if (observe) observe.disconnect();\n      }\n    }, {\n      key: \"areObjectsDifferent\",\n      value: function areObjectsDifferent(prevProps, newProps) {\n        for (var index = 0; index < propsAffectingURL.length; index++) {\n          if (prevProps[propsAffectingURL[index]] != newProps[propsAffectingURL[index]]) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this4 = this;\n\n        var contextOptions = this.getContext();\n\n        if (this.areObjectsDifferent(prevProps, this.props) || this.areObjectsDifferent(prevState.contextOptions, contextOptions)) {\n          var _this$getSrc2 = this.getSrc(),\n              originalSrc = _this$getSrc2.originalSrc,\n              lqipSrc = _this$getSrc2.lqipSrc;\n\n          this.setState({\n            originalSrc: originalSrc,\n            lqipSrc: lqipSrc\n          }, function () {\n            _this4.updateImageUrl();\n\n            _this4.setState({\n              contextOptions: _this4.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n\n        var _this$props4 = this.props,\n            urlEndpoint = _this$props4.urlEndpoint,\n            loading = _this$props4.loading,\n            lqip = _this$props4.lqip,\n            path = _this$props4.path,\n            src = _this$props4.src,\n            transformation = _this$props4.transformation,\n            transformationPosition = _this$props4.transformationPosition,\n            queryParameters = _this$props4.queryParameters,\n            restProps = _objectWithoutProperties(_this$props4, [\"urlEndpoint\", \"loading\", \"lqip\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"img\", _extends({\n          alt: this.props.alt || \"\",\n          src: currentUrl,\n          ref: this.imageRef\n        }, restProps));\n      }\n    }]);\n\n    return IKImage;\n  }(ImageKitComponent);\n\n  IKImage.propTypes = PROP_TYPES$1;\n\n  var PROP_TYPES$2 = _objectSpread2(_objectSpread2({}, COMMON_PROPS), IK_UPLOAD_PROPS);\n\n  var IKUpload = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKUpload, _ImageKitComponent);\n\n    var _super = _createSuper(IKUpload);\n\n    function IKUpload() {\n      _classCallCheck(this, IKUpload);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass(IKUpload, [{\n      key: \"uploadFile\",\n      value: function uploadFile(e) {\n        var contextOptions = this.getContext();\n        var _this$props = this.props,\n            fileName = _this$props.fileName,\n            useUniqueFileName = _this$props.useUniqueFileName,\n            tags = _this$props.tags,\n            folder = _this$props.folder,\n            isPrivateFile = _this$props.isPrivateFile,\n            customCoordinates = _this$props.customCoordinates,\n            responseFields = _this$props.responseFields,\n            onError = _this$props.onError,\n            onSuccess = _this$props.onSuccess;\n        var publicKey = this.props.publicKey || contextOptions.publicKey;\n        var authenticationEndpoint = this.props.authenticationEndpoint || contextOptions.authenticationEndpoint;\n        var urlEndpoint = this.props.urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!publicKey || publicKey.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing publicKey\"\n            });\n          }\n\n          return;\n        }\n\n        if (!authenticationEndpoint || authenticationEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing authenticationEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing urlEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        var ikClient = this.getIKClient();\n        var file = e.target.files[0];\n        var params = {\n          file: file,\n          fileName: fileName || file.name,\n          useUniqueFileName: useUniqueFileName,\n          tags: tags,\n          folder: folder,\n          isPrivateFile: isPrivateFile,\n          customCoordinates: customCoordinates,\n          responseFields: responseFields\n        };\n        ikClient.upload(params, function (err, result) {\n          if (err) {\n            if (onError && typeof onError === \"function\") {\n              onError(err);\n            }\n          } else {\n            if (onSuccess && typeof onSuccess === \"function\") {\n              onSuccess(result);\n            }\n          }\n        }, {\n          publicKey: publicKey,\n          authenticationEndpoint: authenticationEndpoint\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this = this;\n\n        var _this$props2 = this.props,\n            publicKey = _this$props2.publicKey,\n            urlEndpoint = _this$props2.urlEndpoint,\n            authenticationEndpoint = _this$props2.authenticationEndpoint,\n            fileName = _this$props2.fileName,\n            useUniqueFileName = _this$props2.useUniqueFileName,\n            tags = _this$props2.tags,\n            folder = _this$props2.folder,\n            isPrivateFile = _this$props2.isPrivateFile,\n            customCoordinates = _this$props2.customCoordinates,\n            responseFields = _this$props2.responseFields,\n            onError = _this$props2.onError,\n            onSuccess = _this$props2.onSuccess,\n            restProps = _objectWithoutProperties(_this$props2, [\"publicKey\", \"urlEndpoint\", \"authenticationEndpoint\", \"fileName\", \"useUniqueFileName\", \"tags\", \"folder\", \"isPrivateFile\", \"customCoordinates\", \"responseFields\", \"onError\", \"onSuccess\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"input\", _extends({\n          type: \"file\"\n        }, restProps, {\n          onChange: function onChange(e) {\n            if (_this.props.onChange && typeof _this.props.onChange === \"function\") {\n              _this.props.onChange(e);\n            }\n\n            _this.uploadFile(e);\n          }\n        }));\n      }\n    }]);\n\n    return IKUpload;\n  }(ImageKitComponent);\n  IKUpload.defaultProps = {\n    useUniqueFileName: true,\n    isPrivateFile: false,\n    customCoordinates: \"\",\n    tags: [],\n    folder: \"/\",\n    responseFields: []\n  };\n  IKUpload.propTypes = PROP_TYPES$2;\n\n  exports.IKContext = IKContext;\n  exports.IKImage = IKImage;\n  exports.IKUpload = IKUpload;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]},"metadata":{},"sourceType":"script"}