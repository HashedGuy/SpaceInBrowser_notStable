{"ast":null,"code":"import _toConsumableArray from \"/Users/arbus/Documents/SpaceInBrowser/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/arbus/Documents/SpaceInBrowser/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createClass from \"/Users/arbus/Documents/SpaceInBrowser/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/arbus/Documents/SpaceInBrowser/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport createDebounce from 'debounce';\n\nfunction useMeasure(_temp) {\n  var _ref = _temp === void 0 ? {\n    debounce: 0,\n    scroll: false,\n    offsetSize: false\n  } : _temp,\n      debounce = _ref.debounce,\n      scroll = _ref.scroll,\n      polyfill = _ref.polyfill,\n      offsetSize = _ref.offsetSize;\n\n  var ResizeObserver = polyfill || (typeof window === 'undefined' ? /*#__PURE__*/_createClass(function ResizeObserver() {\n    _classCallCheck(this, ResizeObserver);\n  }) : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  var _useState = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      set = _useState2[1]; // keep all state in a ref\n\n\n  var state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  var scrollDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.scroll : null;\n  var resizeDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.resize : null; // make sure to update state only as long as the component is truly mounted\n\n  var mounted = useRef(false);\n  useEffect(function () {\n    mounted.current = true;\n    return function () {\n      return void (mounted.current = false);\n    };\n  }); // memoize handlers, so event-listeners know when they should update\n\n  var _useMemo = useMemo(function () {\n    var callback = function callback() {\n      if (!state.current.element) return;\n\n      var _state$current$elemen = state.current.element.getBoundingClientRect(),\n          left = _state$current$elemen.left,\n          top = _state$current$elemen.top,\n          width = _state$current$elemen.width,\n          height = _state$current$elemen.height,\n          bottom = _state$current$elemen.bottom,\n          right = _state$current$elemen.right,\n          x = _state$current$elemen.x,\n          y = _state$current$elemen.y;\n\n      var size = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        bottom: bottom,\n        right: right,\n        x: x,\n        y: y\n      };\n\n      if (state.current.element instanceof HTMLElement && offsetSize) {\n        size.height = state.current.element.offsetHeight;\n        size.width = state.current.element.offsetWidth;\n      }\n\n      Object.freeze(size);\n      if (mounted.current && !areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? createDebounce(callback, resizeDebounce) : callback, scrollDebounce ? createDebounce(callback, scrollDebounce) : callback];\n  }, [set, offsetSize, scrollDebounce, resizeDebounce]),\n      _useMemo2 = _slicedToArray(_useMemo, 3),\n      forceRefresh = _useMemo2[0],\n      resizeChange = _useMemo2[1],\n      scrollChange = _useMemo2[2]; // cleanup current scroll-listeners / observers\n\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (element) {\n        return element.removeEventListener('scroll', scrollChange, true);\n      });\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (scrollContainer) {\n        return scrollContainer.addEventListener('scroll', scrollChange, {\n          capture: true,\n          passive: true\n        });\n      });\n    }\n  } // the ref we expose to the user\n\n\n  var ref = function ref(node) {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(function () {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(function () {\n    return removeListeners;\n  }, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(function () {\n    var cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return function () {\n      return void window.removeEventListener('resize', cb);\n    };\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(function () {\n    if (enabled) {\n      var cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return function () {\n        return void window.removeEventListener('scroll', cb, true);\n      };\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  var result = [];\n  if (!element || element === document.body) return result;\n\n  var _window$getComputedSt = window.getComputedStyle(element),\n      overflow = _window$getComputedSt.overflow,\n      overflowX = _window$getComputedSt.overflowX,\n      overflowY = _window$getComputedSt.overflowY;\n\n  if ([overflow, overflowX, overflowY].some(function (prop) {\n    return prop === 'auto' || prop === 'scroll';\n  })) result.push(element);\n  return [].concat(result, _toConsumableArray(findScrollContainers(element.parentElement)));\n} // Checks if element boundaries are equal\n\n\nvar keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nvar areBoundsEqual = function areBoundsEqual(a, b) {\n  return keys.every(function (key) {\n    return a[key] === b[key];\n  });\n};\n\nexport { useMeasure as default };","map":{"version":3,"sources":["/Users/arbus/Documents/SpaceInBrowser/node_modules/react-use-measure/dist/web.js"],"names":["useState","useRef","useEffect","useMemo","createDebounce","useMeasure","_temp","debounce","scroll","offsetSize","polyfill","ResizeObserver","window","Error","left","top","width","height","bottom","right","x","y","bounds","set","state","element","scrollContainers","resizeObserver","lastBounds","scrollDebounce","resizeDebounce","resize","mounted","current","callback","getBoundingClientRect","size","HTMLElement","offsetHeight","offsetWidth","Object","freeze","areBoundsEqual","forceRefresh","resizeChange","scrollChange","removeListeners","forEach","removeEventListener","disconnect","addListeners","observe","scrollContainer","addEventListener","capture","passive","ref","node","findScrollContainers","useOnWindowScroll","Boolean","useOnWindowResize","onWindowResize","cb","onScroll","enabled","result","document","body","getComputedStyle","overflow","overflowX","overflowY","some","prop","push","parentElement","keys","a","b","every","key","default"],"mappings":"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","sourcesContent":["import { useState, useRef, useEffect, useMemo } from 'react';\nimport createDebounce from 'debounce';\n\nfunction useMeasure(_temp) {\n  let {\n    debounce,\n    scroll,\n    polyfill,\n    offsetSize\n  } = _temp === void 0 ? {\n    debounce: 0,\n    scroll: false,\n    offsetSize: false\n  } : _temp;\n  const ResizeObserver = polyfill || (typeof window === 'undefined' ? class ResizeObserver {} : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  const [bounds, set] = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }); // keep all state in a ref\n\n  const state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  const scrollDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.scroll : null;\n  const resizeDebounce = debounce ? typeof debounce === 'number' ? debounce : debounce.resize : null; // make sure to update state only as long as the component is truly mounted\n\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => void (mounted.current = false);\n  }); // memoize handlers, so event-listeners know when they should update\n\n  const [forceRefresh, resizeChange, scrollChange] = useMemo(() => {\n    const callback = () => {\n      if (!state.current.element) return;\n      const {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      } = state.current.element.getBoundingClientRect();\n      const size = {\n        left,\n        top,\n        width,\n        height,\n        bottom,\n        right,\n        x,\n        y\n      };\n\n      if (state.current.element instanceof HTMLElement && offsetSize) {\n        size.height = state.current.element.offsetHeight;\n        size.width = state.current.element.offsetWidth;\n      }\n\n      Object.freeze(size);\n      if (mounted.current && !areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? createDebounce(callback, resizeDebounce) : callback, scrollDebounce ? createDebounce(callback, scrollDebounce) : callback];\n  }, [set, offsetSize, scrollDebounce, resizeDebounce]); // cleanup current scroll-listeners / observers\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(element => element.removeEventListener('scroll', scrollChange, true));\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(scrollContainer => scrollContainer.addEventListener('scroll', scrollChange, {\n        capture: true,\n        passive: true\n      }));\n    }\n  } // the ref we expose to the user\n\n\n  const ref = node => {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(() => {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(() => removeListeners, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(() => {\n    const cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return () => void window.removeEventListener('resize', cb);\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(() => {\n    if (enabled) {\n      const cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return () => void window.removeEventListener('scroll', cb, true);\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  const result = [];\n  if (!element || element === document.body) return result;\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = window.getComputedStyle(element);\n  if ([overflow, overflowX, overflowY].some(prop => prop === 'auto' || prop === 'scroll')) result.push(element);\n  return [...result, ...findScrollContainers(element.parentElement)];\n} // Checks if element boundaries are equal\n\n\nconst keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nconst areBoundsEqual = (a, b) => keys.every(key => a[key] === b[key]);\n\nexport { useMeasure as default };\n"]},"metadata":{},"sourceType":"module"}