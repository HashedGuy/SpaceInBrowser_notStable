// Version 1.5.1 three-conic-polygon-geometry - https://github.com/vasturiano/three-conic-polygon-geometry
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).THREE=t.THREE||{},t.THREE)}(this,(function(t,n){"use strict";function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function i(t,n){return i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},i(t,n)}function o(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=r(t);if(n){var u=r(this).constructor;e=Reflect.construct(i,arguments,u)}else e=i.apply(this,arguments);return o(this,e)}}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,i,o=[],u=!0,a=!1;try{for(e=e.call(t);!(u=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);u=!0);}catch(t){a=!0,i=t}finally{try{u||null==e.return||e.return()}finally{if(a)throw i}}return o}(t,n)||s(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){if(t){if("string"==typeof t)return c(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,n):void 0}}function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function h(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function f(t){let n=t,e=t,r=t;function i(t,n,i=0,o=t.length){if(i<o){if(0!==e(n,n))return o;do{const e=i+o>>>1;r(t[e],n)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length&&(n=(n,e)=>t(n)-e,e=h,r=(n,e)=>h(t(n),e)),{left:i,center:function(t,e,r=0,o=t.length){const u=i(t,e,r,o-1);return u>r&&n(t[u-1],e)>-n(t[u],e)?u-1:u},right:function(t,n,i=0,o=t.length){if(i<o){if(0!==e(n,n))return o;do{const e=i+o>>>1;r(t[e],n)<=0?i=e+1:o=e}while(i<o)}return i}}}const p=f(h).right;f((function(t){return null===t?NaN:+t})).center;var g=p;function d(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}class y{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,u=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);u&&(n[e++]=u),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}var v=Math.sqrt(50),x=Math.sqrt(10),m=Math.sqrt(2);function w(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=v?10:o>=x?5:o>=m?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=v?10:o>=x?5:o>=m?2:1)}function b(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}function _(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}var M={exports:{}};function E(t,n,e){e=e||2;var r,i,o,u,a,l,s,c=n&&n.length,h=c?n[0]*e:t.length,f=S(t,0,h,e,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,n,e,r){var i,o,u,a=[];for(i=0,o=n.length;i<o;i++)(u=S(t,n[i]*r,i<o-1?n[i+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),a.push(Z(u));for(a.sort($),i=0;i<a.length;i++)e=N(e=F(a[i],e),e.next);return e}(t,n,f,e)),t.length>80*e){r=o=t[0],i=u=t[1];for(var g=e;g<h;g+=e)(a=t[g])<r&&(r=a),(l=t[g+1])<i&&(i=l),a>o&&(o=a),l>u&&(u=l);s=0!==(s=Math.max(o-r,u-i))?1/s:0}return k(f,p,e,r,i,s),p}function S(t,n,e,r,i){var o,u;if(i===X(t,n,e,r)>0)for(o=n;o<e;o+=r)u=K(o,t[o],t[o+1],u);else for(o=e-r;o>=n;o-=r)u=K(o,t[o],t[o+1],u);return u&&R(u,u.next)&&(D(u),u=u.next),u}function N(t,n){if(!t)return t;n||(n=t);var e,r=t;do{if(e=!1,r.steiner||!R(r,r.next)&&0!==q(r.prev,r,r.next))r=r.next;else{if(D(r),(r=n=r.prev)===r.next)break;e=!0}}while(e||r!==n);return n}function k(t,n,e,r,i,o,u){if(t){!u&&o&&function(t,n,e,r){var i=t;do{null===i.z&&(i.z=I(i.x,i.y,n,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var n,e,r,i,o,u,a,l,s=1;do{for(e=t,t=null,o=null,u=0;e;){for(u++,r=e,a=0,n=0;n<s&&(a++,r=r.nextZ);n++);for(l=s;a>0||l>0&&r;)0!==a&&(0===l||!r||e.z<=r.z)?(i=e,e=e.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;e=r}o.nextZ=null,s*=2}while(u>1)}(i)}(t,r,i,o);for(var a,l,s=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?P(t,r,i,o):A(t))n.push(a.i/e),n.push(t.i/e),n.push(l.i/e),D(t),t=l.next,s=l.next;else if((t=l)===s){u?1===u?k(t=T(N(t),n,e),n,e,r,i,o,2):2===u&&j(t,n,e,r,i,o):k(N(t),n,e,r,i,o,1);break}}}function A(t){var n=t.prev,e=t,r=t.next;if(q(n,e,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(L(n.x,n.y,e.x,e.y,r.x,r.y,i.x,i.y)&&q(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function P(t,n,e,r){var i=t.prev,o=t,u=t.next;if(q(i,o,u)>=0)return!1;for(var a=i.x<o.x?i.x<u.x?i.x:u.x:o.x<u.x?o.x:u.x,l=i.y<o.y?i.y<u.y?i.y:u.y:o.y<u.y?o.y:u.y,s=i.x>o.x?i.x>u.x?i.x:u.x:o.x>u.x?o.x:u.x,c=i.y>o.y?i.y>u.y?i.y:u.y:o.y>u.y?o.y:u.y,h=I(a,l,n,e,r),f=I(s,c,n,e,r),p=t.prevZ,g=t.nextZ;p&&p.z>=h&&g&&g.z<=f;){if(p!==t.prev&&p!==t.next&&L(i.x,i.y,o.x,o.y,u.x,u.y,p.x,p.y)&&q(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,g!==t.prev&&g!==t.next&&L(i.x,i.y,o.x,o.y,u.x,u.y,g.x,g.y)&&q(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&L(i.x,i.y,o.x,o.y,u.x,u.y,p.x,p.y)&&q(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;g&&g.z<=f;){if(g!==t.prev&&g!==t.next&&L(i.x,i.y,o.x,o.y,u.x,u.y,g.x,g.y)&&q(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function T(t,n,e){var r=t;do{var i=r.prev,o=r.next.next;!R(i,o)&&C(i,r,r.next,o)&&G(i,o)&&G(o,i)&&(n.push(i.i/e),n.push(r.i/e),n.push(o.i/e),D(r),D(r.next),r=t=o),r=r.next}while(r!==t);return N(r)}function j(t,n,e,r,i,o){var u=t;do{for(var a=u.next.next;a!==u.prev;){if(u.i!==a.i&&O(u,a)){var l=U(u,a);return u=N(u,u.next),l=N(l,l.next),k(u,n,e,r,i,o),void k(l,n,e,r,i,o)}a=a.next}u=u.next}while(u!==t)}function $(t,n){return t.x-n.x}function F(t,n){var e=function(t,n){var e,r=n,i=t.x,o=t.y,u=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>u){if(u=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!e)return null;if(i===u)return e;var l,s=e,c=e.x,h=e.y,f=1/0;r=e;do{i>=r.x&&r.x>=c&&i!==r.x&&L(o<h?i:u,o,c,h,o<h?u:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),G(r,t)&&(l<f||l===f&&(r.x>e.x||r.x===e.x&&z(e,r)))&&(e=r,f=l)),r=r.next}while(r!==s);return e}(t,n);if(!e)return n;var r=U(e,t),i=N(e,e.next);return N(r,r.next),n===e?i:n}function z(t,n){return q(t.prev,t,n.prev)<0&&q(n.next,t,t.next)<0}function I(t,n,e,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Z(t){var n=t,e=t;do{(n.x<e.x||n.x===e.x&&n.y<e.y)&&(e=n),n=n.next}while(n!==t);return e}function L(t,n,e,r,i,o,u,a){return(i-u)*(n-a)-(t-u)*(o-a)>=0&&(t-u)*(r-a)-(e-u)*(n-a)>=0&&(e-u)*(o-a)-(i-u)*(r-a)>=0}function O(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==n.i&&e.next.i!==n.i&&C(e,e.next,t,n))return!0;e=e.next}while(e!==t);return!1}(t,n)&&(G(t,n)&&G(n,t)&&function(t,n){var e=t,r=!1,i=(t.x+n.x)/2,o=(t.y+n.y)/2;do{e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next}while(e!==t);return r}(t,n)&&(q(t.prev,t,n.prev)||q(t,n.prev,n))||R(t,n)&&q(t.prev,t,t.next)>0&&q(n.prev,n,n.next)>0)}function q(t,n,e){return(n.y-t.y)*(e.x-n.x)-(n.x-t.x)*(e.y-n.y)}function R(t,n){return t.x===n.x&&t.y===n.y}function C(t,n,e,r){var i=B(q(t,n,e)),o=B(q(t,n,r)),u=B(q(e,r,t)),a=B(q(e,r,n));return i!==o&&u!==a||(!(0!==i||!H(t,e,n))||(!(0!==o||!H(t,r,n))||(!(0!==u||!H(e,t,r))||!(0!==a||!H(e,n,r)))))}function H(t,n,e){return n.x<=Math.max(t.x,e.x)&&n.x>=Math.min(t.x,e.x)&&n.y<=Math.max(t.y,e.y)&&n.y>=Math.min(t.y,e.y)}function B(t){return t>0?1:t<0?-1:0}function G(t,n){return q(t.prev,t,t.next)<0?q(t,n,t.next)>=0&&q(t,t.prev,n)>=0:q(t,n,t.prev)<0||q(t,t.next,n)<0}function U(t,n){var e=new V(t.i,t.x,t.y),r=new V(n.i,n.x,n.y),i=t.next,o=n.prev;return t.next=n,n.prev=t,e.next=i,i.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function K(t,n,e,r){var i=new V(t,n,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function D(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function V(t,n,e){this.i=t,this.x=n,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X(t,n,e,r){for(var i=0,o=n,u=e-r;o<e;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}M.exports=E,M.exports.default=E,E.deviation=function(t,n,e,r){var i=n&&n.length,o=i?n[0]*e:t.length,u=Math.abs(X(t,0,o,e));if(i)for(var a=0,l=n.length;a<l;a++){var s=n[a]*e,c=a<l-1?n[a+1]*e:t.length;u-=Math.abs(X(t,s,c,e))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*e,p=r[a+1]*e,g=r[a+2]*e;h+=Math.abs((t[f]-t[g])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[g+1]-t[f+1]))}return 0===u&&0===h?0:Math.abs((h-u)/u)},E.flatten=function(t){for(var n=t[0][0].length,e={vertices:[],holes:[],dimensions:n},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var u=0;u<n;u++)e.vertices.push(t[i][o][u]);i>0&&(r+=t[i-1].length,e.holes.push(r))}return e};var J=M.exports;const Y=134217729;function W(t,n,e,r,i){let o,u,a,l,s=n[0],c=r[0],h=0,f=0;c>s==c>-s?(o=s,s=n[++h]):(o=c,c=r[++f]);let p=0;if(h<t&&f<e)for(c>s==c>-s?(u=s+o,a=o-(u-s),s=n[++h]):(u=c+o,a=o-(u-c),c=r[++f]),o=u,0!==a&&(i[p++]=a);h<t&&f<e;)c>s==c>-s?(u=o+s,l=u-o,a=o-(u-l)+(s-l),s=n[++h]):(u=o+c,l=u-o,a=o-(u-l)+(c-l),c=r[++f]),o=u,0!==a&&(i[p++]=a);for(;h<t;)u=o+s,l=u-o,a=o-(u-l)+(s-l),s=n[++h],o=u,0!==a&&(i[p++]=a);for(;f<e;)u=o+c,l=u-o,a=o-(u-l)+(c-l),c=r[++f],o=u,0!==a&&(i[p++]=a);return 0===o&&0!==p||(i[p++]=o),p}function Q(t){return new Float64Array(t)}const tt=Q(4),nt=Q(8),et=Q(12),rt=Q(16),it=Q(4);function ot(t,n,e,r,i,o){const u=(n-o)*(e-i),a=(t-i)*(r-o),l=u-a;if(0===u||0===a||u>0!=a>0)return l;const s=Math.abs(u+a);return Math.abs(l)>=33306690738754716e-32*s?l:-function(t,n,e,r,i,o,u){let a,l,s,c,h,f,p,g,d,y,v,x,m,w,b,_,M,E;const S=t-i,N=e-i,k=n-o,A=r-o;w=S*A,f=Y*S,p=f-(f-S),g=S-p,f=Y*A,d=f-(f-A),y=A-d,b=g*y-(w-p*d-g*d-p*y),_=k*N,f=Y*k,p=f-(f-k),g=k-p,f=Y*N,d=f-(f-N),y=N-d,M=g*y-(_-p*d-g*d-p*y),v=b-M,h=b-v,tt[0]=b-(v+h)+(h-M),x=w+v,h=x-w,m=w-(x-h)+(v-h),v=m-_,h=m-v,tt[1]=m-(v+h)+(h-_),E=x+v,h=E-x,tt[2]=x-(E-h)+(v-h),tt[3]=E;let P=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,tt),T=22204460492503146e-32*u;if(P>=T||-P>=T)return P;if(h=t-S,a=t-(S+h)+(h-i),h=e-N,s=e-(N+h)+(h-i),h=n-k,l=n-(k+h)+(h-o),h=r-A,c=r-(A+h)+(h-o),0===a&&0===l&&0===s&&0===c)return P;if(T=11093356479670487e-47*u+33306690738754706e-32*Math.abs(P),P+=S*c+A*a-(k*s+N*l),P>=T||-P>=T)return P;w=a*A,f=Y*a,p=f-(f-a),g=a-p,f=Y*A,d=f-(f-A),y=A-d,b=g*y-(w-p*d-g*d-p*y),_=l*N,f=Y*l,p=f-(f-l),g=l-p,f=Y*N,d=f-(f-N),y=N-d,M=g*y-(_-p*d-g*d-p*y),v=b-M,h=b-v,it[0]=b-(v+h)+(h-M),x=w+v,h=x-w,m=w-(x-h)+(v-h),v=m-_,h=m-v,it[1]=m-(v+h)+(h-_),E=x+v,h=E-x,it[2]=x-(E-h)+(v-h),it[3]=E;const j=W(4,tt,4,it,nt);w=S*c,f=Y*S,p=f-(f-S),g=S-p,f=Y*c,d=f-(f-c),y=c-d,b=g*y-(w-p*d-g*d-p*y),_=k*s,f=Y*k,p=f-(f-k),g=k-p,f=Y*s,d=f-(f-s),y=s-d,M=g*y-(_-p*d-g*d-p*y),v=b-M,h=b-v,it[0]=b-(v+h)+(h-M),x=w+v,h=x-w,m=w-(x-h)+(v-h),v=m-_,h=m-v,it[1]=m-(v+h)+(h-_),E=x+v,h=E-x,it[2]=x-(E-h)+(v-h),it[3]=E;const $=W(j,nt,4,it,et);w=a*c,f=Y*a,p=f-(f-a),g=a-p,f=Y*c,d=f-(f-c),y=c-d,b=g*y-(w-p*d-g*d-p*y),_=l*s,f=Y*l,p=f-(f-l),g=l-p,f=Y*s,d=f-(f-s),y=s-d,M=g*y-(_-p*d-g*d-p*y),v=b-M,h=b-v,it[0]=b-(v+h)+(h-M),x=w+v,h=x-w,m=w-(x-h)+(v-h),v=m-_,h=m-v,it[1]=m-(v+h)+(h-_),E=x+v,h=E-x,it[2]=x-(E-h)+(v-h),it[3]=E;const F=W($,et,4,it,rt);return rt[F-1]}(t,n,e,r,i,o,s)}const ut=Math.pow(2,-52),at=new Uint32Array(512);class lt{static from(t,n=gt,e=dt){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new lt(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let u=1/0,a=1/0,l=-1/0,s=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<u&&(u=e),r<a&&(a=r),e>l&&(l=e),r>s&&(s=r),this._ids[n]=n}const c=(u+l)/2,h=(a+s)/2;let f,p,g,d=1/0;for(let n=0;n<o;n++){const e=st(c,h,t[2*n],t[2*n+1]);e<d&&(f=n,d=e)}const y=t[2*f],v=t[2*f+1];d=1/0;for(let n=0;n<o;n++){if(n===f)continue;const e=st(y,v,t[2*n],t[2*n+1]);e<d&&e>0&&(p=n,d=e)}let x=t[2*p],m=t[2*p+1],w=1/0;for(let n=0;n<o;n++){if(n===f||n===p)continue;const e=ht(y,v,x,m,t[2*n],t[2*n+1]);e<w&&(g=n,w=e)}let b=t[2*g],_=t[2*g+1];if(w===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];ft(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(ot(y,v,x,m,b,_)<0){const t=p,n=x,e=m;p=g,x=b,m=_,g=t,b=n,_=e}const M=function(t,n,e,r,i,o){const u=e-t,a=r-n,l=i-t,s=o-n,c=u*u+a*a,h=l*l+s*s,f=.5/(u*s-a*l);return{x:t+(s*c-a*h)*f,y:n+(u*h-l*c)*f}}(y,v,x,m,b,_);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=st(t[2*n],t[2*n+1],M.x,M.y);ft(this._ids,this._dists,0,o-1),this._hullStart=f;let E=3;e[f]=n[g]=p,e[p]=n[f]=g,e[g]=n[p]=f,r[f]=0,r[p]=1,r[g]=2,i.fill(-1),i[this._hashKey(y,v)]=f,i[this._hashKey(x,m)]=p,i[this._hashKey(b,_)]=g,this.trianglesLen=0,this._addTriangle(f,p,g,-1,-1,-1);for(let o,u,a=0;a<this._ids.length;a++){const l=this._ids[a],s=t[2*l],c=t[2*l+1];if(a>0&&Math.abs(s-o)<=ut&&Math.abs(c-u)<=ut)continue;if(o=s,u=c,l===f||l===p||l===g)continue;let h=0;for(let t=0,n=this._hashKey(s,c);t<this._hashSize&&(h=i[(n+t)%this._hashSize],-1===h||h===e[h]);t++);h=n[h];let d,y=h;for(;d=e[y],ot(s,c,t[2*y],t[2*y+1],t[2*d],t[2*d+1])>=0;)if(y=d,y===h){y=-1;break}if(-1===y)continue;let v=this._addTriangle(y,l,e[y],-1,-1,r[y]);r[l]=this._legalize(v+2),r[y]=v,E++;let x=e[y];for(;d=e[x],ot(s,c,t[2*x],t[2*x+1],t[2*d],t[2*d+1])<0;)v=this._addTriangle(x,l,d,r[l],-1,r[x]),r[l]=this._legalize(v+2),e[x]=x,E--,x=d;if(y===h)for(;d=n[y],ot(s,c,t[2*d],t[2*d+1],t[2*y],t[2*y+1])<0;)v=this._addTriangle(d,l,y,-1,r[y],r[d]),this._legalize(v+2),r[d]=v,e[y]=y,E--,y=d;this._hullStart=n[l]=y,e[y]=n[x]=l,e[l]=x,i[this._hashKey(s,c)]=l,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(E);for(let t=0,n=this._hullStart;t<E;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const u=e[t],a=t-t%3;if(o=a+(t+2)%3,-1===u){if(0===i)break;t=at[--i];continue}const l=u-u%3,s=a+(t+1)%3,c=l+(u+2)%3,h=n[o],f=n[t],p=n[s],g=n[c];if(ct(r[2*h],r[2*h+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[t]=g,n[u]=h;const r=e[c];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===c){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(u,e[o]),this._link(o,c);const a=l+(u+1)%3;i<at.length&&(at[i++]=a)}else{if(0===i)break;t=at[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const u=this.trianglesLen;return this._triangles[u]=t,this._triangles[u+1]=n,this._triangles[u+2]=e,this._link(u,r),this._link(u+1,i),this._link(u+2,o),this.trianglesLen+=3,u}}function st(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function ct(t,n,e,r,i,o,u,a){const l=t-u,s=n-a,c=e-u,h=r-a,f=i-u,p=o-a,g=c*c+h*h,d=f*f+p*p;return l*(h*d-g*p)-s*(c*d-g*f)+(l*l+s*s)*(c*p-h*f)<0}function ht(t,n,e,r,i,o){const u=e-t,a=r-n,l=i-t,s=o-n,c=u*u+a*a,h=l*l+s*s,f=.5/(u*s-a*l),p=(s*c-a*h)*f,g=(u*h-l*c)*f;return p*p+g*g}function ft(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let u=i-1;for(;u>=e&&n[t[u]]>o;)t[u+1]=t[u--];t[u+1]=r}else{let i=e+1,o=r;pt(t,e+r>>1,i),n[t[e]]>n[t[r]]&&pt(t,e,r),n[t[i]]>n[t[r]]&&pt(t,i,r),n[t[e]]>n[t[i]]&&pt(t,e,i);const u=t[i],a=n[u];for(;;){do{i++}while(n[t[i]]<a);do{o--}while(n[t[o]]>a);if(o<i)break;pt(t,i,o)}t[e+1]=t[o],t[o]=u,r-i+1>=o-e?(ft(t,n,i,r),ft(t,n,e,o-1)):(ft(t,n,e,o-1),ft(t,n,i,r))}}function pt(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function gt(t){return t[0]}function dt(t){return t[1]}function yt(t,n,e){if(void 0===e&&(e={}),!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var r,i=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(r=n).type?r.geometry:r,u=o.type,a=n.bbox,l=o.coordinates;if(a&&!1===function(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}(i,a))return!1;"Polygon"===u&&(l=[l]);for(var s=!1,c=0;c<l.length&&!s;c++)if(vt(i,l[c][0],e.ignoreBoundary)){for(var h=!1,f=1;f<l[c].length&&!h;)vt(i,l[c][f],!e.ignoreBoundary)&&(h=!0),f++;h||(s=!0)}return s}function vt(t,n,e){var r=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var i=0,o=n.length-1;i<n.length;o=i++){var u=n[i][0],a=n[i][1],l=n[o][0],s=n[o][1];if(t[1]*(u-l)+a*(l-t[0])+s*(t[0]-u)==0&&(u-t[0])*(l-t[0])<=0&&(a-t[1])*(s-t[1])<=0)return!e;a>t[1]!=s>t[1]&&t[0]<(l-u)*(t[1]-a)/(s-a)+u&&(r=!r)}return r}var xt=1e-6,mt=1e-12,wt=Math.PI,bt=wt/2,_t=wt/4,Mt=2*wt,Et=180/wt,St=wt/180,Nt=Math.abs,kt=Math.atan,At=Math.atan2,Pt=Math.cos,Tt=Math.hypot,jt=Math.sin,$t=Math.sign||function(t){return t>0?1:t<0?-1:0},Ft=Math.sqrt;function zt(t){return t>1?bt:t<-1?-bt:Math.asin(t)}function It(t){return(t=jt(t/2))*t}function Zt(){}function Lt(t,n){t&&qt.hasOwnProperty(t.type)&&qt[t.type](t,n)}var Ot={Feature:function(t,n){Lt(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Lt(e[r].geometry,n)}},qt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Rt(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Rt(e[r],n,0)},Polygon:function(t,n){Ct(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Ct(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Lt(e[r],n)}};function Rt(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Ct(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Rt(t[e],n,1);n.polygonEnd()}function Ht(t,n){t&&Ot.hasOwnProperty(t.type)?Ot[t.type](t,n):Lt(t,n)}var Bt,Gt,Ut,Kt,Dt,Vt,Xt,Jt,Yt,Wt,Qt,tn,nn,en,rn,on,un=new y,an=new y,ln={point:Zt,lineStart:Zt,lineEnd:Zt,polygonStart:function(){un=new y,ln.lineStart=sn,ln.lineEnd=cn},polygonEnd:function(){var t=+un;an.add(t<0?Mt+t:t),this.lineStart=this.lineEnd=this.point=Zt},sphere:function(){an.add(Mt)}};function sn(){ln.point=hn}function cn(){fn(Bt,Gt)}function hn(t,n){ln.point=fn,Bt=t,Gt=n,Ut=t*=St,Kt=Pt(n=(n*=St)/2+_t),Dt=jt(n)}function fn(t,n){var e=(t*=St)-Ut,r=e>=0?1:-1,i=r*e,o=Pt(n=(n*=St)/2+_t),u=jt(n),a=Dt*u,l=Kt*o+a*Pt(i),s=a*r*jt(i);un.add(At(s,l)),Ut=t,Kt=o,Dt=u}function pn(t){return[At(t[1],t[0]),zt(t[2])]}function gn(t){var n=t[0],e=t[1],r=Pt(e);return[r*Pt(n),r*jt(n),jt(e)]}function dn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function yn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function vn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function mn(t){var n=Ft(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var wn,bn,_n,Mn,En,Sn,Nn,kn,An,Pn,Tn,jn,$n,Fn,zn,In,Zn={point:Ln,lineStart:qn,lineEnd:Rn,polygonStart:function(){Zn.point=Cn,Zn.lineStart=Hn,Zn.lineEnd=Bn,en=new y,ln.polygonStart()},polygonEnd:function(){ln.polygonEnd(),Zn.point=Ln,Zn.lineStart=qn,Zn.lineEnd=Rn,un<0?(Vt=-(Jt=180),Xt=-(Yt=90)):en>xt?Yt=90:en<-1e-6&&(Xt=-90),on[0]=Vt,on[1]=Jt},sphere:function(){Vt=-(Jt=180),Xt=-(Yt=90)}};function Ln(t,n){rn.push(on=[Vt=t,Jt=t]),n<Xt&&(Xt=n),n>Yt&&(Yt=n)}function On(t,n){var e=gn([t*St,n*St]);if(nn){var r=yn(nn,e),i=yn([r[1],-r[0],0],r);mn(i),i=pn(i);var o,u=t-Wt,a=u>0?1:-1,l=i[0]*Et*a,s=Nt(u)>180;s^(a*Wt<l&&l<a*t)?(o=i[1]*Et)>Yt&&(Yt=o):s^(a*Wt<(l=(l+360)%360-180)&&l<a*t)?(o=-i[1]*Et)<Xt&&(Xt=o):(n<Xt&&(Xt=n),n>Yt&&(Yt=n)),s?t<Wt?Gn(Vt,t)>Gn(Vt,Jt)&&(Jt=t):Gn(t,Jt)>Gn(Vt,Jt)&&(Vt=t):Jt>=Vt?(t<Vt&&(Vt=t),t>Jt&&(Jt=t)):t>Wt?Gn(Vt,t)>Gn(Vt,Jt)&&(Jt=t):Gn(t,Jt)>Gn(Vt,Jt)&&(Vt=t)}else rn.push(on=[Vt=t,Jt=t]);n<Xt&&(Xt=n),n>Yt&&(Yt=n),nn=e,Wt=t}function qn(){Zn.point=On}function Rn(){on[0]=Vt,on[1]=Jt,Zn.point=Ln,nn=null}function Cn(t,n){if(nn){var e=t-Wt;en.add(Nt(e)>180?e+(e>0?360:-360):e)}else Qt=t,tn=n;ln.point(t,n),On(t,n)}function Hn(){ln.lineStart()}function Bn(){Cn(Qt,tn),ln.lineEnd(),Nt(en)>xt&&(Vt=-(Jt=180)),on[0]=Vt,on[1]=Jt,nn=null}function Gn(t,n){return(n-=t)<0?n+360:n}function Un(t,n){return t[0]-n[0]}function Kn(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function Dn(t){var n,e,r,i,o,u,a;if(Yt=Jt=-(Vt=Xt=1/0),rn=[],Ht(t,Zn),e=rn.length){for(rn.sort(Un),n=1,o=[r=rn[0]];n<e;++n)Kn(r,(i=rn[n])[0])||Kn(r,i[1])?(Gn(r[0],i[1])>Gn(r[0],r[1])&&(r[1]=i[1]),Gn(i[0],r[1])>Gn(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(a=Gn(r[1],i[0]))>u&&(u=a,Vt=i[0],Jt=r[1])}return rn=on=null,Vt===1/0||Xt===1/0?[[NaN,NaN],[NaN,NaN]]:[[Vt,Xt],[Jt,Yt]]}var Vn={sphere:Zt,point:Xn,lineStart:Yn,lineEnd:te,polygonStart:function(){Vn.lineStart=ne,Vn.lineEnd=ee},polygonEnd:function(){Vn.lineStart=Yn,Vn.lineEnd=te}};function Xn(t,n){t*=St;var e=Pt(n*=St);Jn(e*Pt(t),e*jt(t),jt(n))}function Jn(t,n,e){++wn,_n+=(t-_n)/wn,Mn+=(n-Mn)/wn,En+=(e-En)/wn}function Yn(){Vn.point=Wn}function Wn(t,n){t*=St;var e=Pt(n*=St);Fn=e*Pt(t),zn=e*jt(t),In=jt(n),Vn.point=Qn,Jn(Fn,zn,In)}function Qn(t,n){t*=St;var e=Pt(n*=St),r=e*Pt(t),i=e*jt(t),o=jt(n),u=At(Ft((u=zn*o-In*i)*u+(u=In*r-Fn*o)*u+(u=Fn*i-zn*r)*u),Fn*r+zn*i+In*o);bn+=u,Sn+=u*(Fn+(Fn=r)),Nn+=u*(zn+(zn=i)),kn+=u*(In+(In=o)),Jn(Fn,zn,In)}function te(){Vn.point=Xn}function ne(){Vn.point=re}function ee(){ie(jn,$n),Vn.point=Xn}function re(t,n){jn=t,$n=n,t*=St,n*=St,Vn.point=ie;var e=Pt(n);Fn=e*Pt(t),zn=e*jt(t),In=jt(n),Jn(Fn,zn,In)}function ie(t,n){t*=St;var e=Pt(n*=St),r=e*Pt(t),i=e*jt(t),o=jt(n),u=zn*o-In*i,a=In*r-Fn*o,l=Fn*i-zn*r,s=Tt(u,a,l),c=zt(s),h=s&&-c/s;An.add(h*u),Pn.add(h*a),Tn.add(h*l),bn+=c,Sn+=c*(Fn+(Fn=r)),Nn+=c*(zn+(zn=i)),kn+=c*(In+(In=o)),Jn(Fn,zn,In)}function oe(t){wn=bn=_n=Mn=En=Sn=Nn=kn=0,An=new y,Pn=new y,Tn=new y,Ht(t,Vn);var n=+An,e=+Pn,r=+Tn,i=Tt(n,e,r);return i<mt&&(n=Sn,e=Nn,r=kn,bn<xt&&(n=_n,e=Mn,r=En),(i=Tt(n,e,r))<mt)?[NaN,NaN]:[At(e,n)*Et,zt(r/i)*Et]}function ue(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function ae(t,n){return[Nt(t)>wt?t+Math.round(-t/Mt)*Mt:t,n]}function le(t,n,e){return(t%=Mt)?n||e?ue(ce(t),he(n,e)):ce(t):n||e?he(n,e):ae}function se(t){return function(n,e){return[(n+=t)>wt?n-Mt:n<-wt?n+Mt:n,e]}}function ce(t){var n=se(t);return n.invert=se(-t),n}function he(t,n){var e=Pt(t),r=jt(t),i=Pt(n),o=jt(n);function u(t,n){var u=Pt(n),a=Pt(t)*u,l=jt(t)*u,s=jt(n),c=s*e+a*r;return[At(l*i-c*o,a*e-s*r),zt(c*i+l*o)]}return u.invert=function(t,n){var u=Pt(n),a=Pt(t)*u,l=jt(t)*u,s=jt(n),c=s*i-l*o;return[At(l*i+s*o,a*e+c*r),zt(c*e-a*r)]},u}function fe(t,n){(n=gn(n))[0]-=t,mn(n);var e,r=(e=-n[1])>1?0:e<-1?wt:Math.acos(e);return((-n[2]<0?-r:r)+Mt-xt)%Mt}function pe(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Zt,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function ge(t,n){return Nt(t[0]-n[0])<xt&&Nt(t[1]-n[1])<xt}function de(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function ye(t,n,e,r,i){var o,u,a=[],l=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(ge(r,u)){if(!r[2]&&!u[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}u[0]+=2e-6}a.push(e=new de(r,t,null,!0)),l.push(e.o=new de(r,null,e,!1)),a.push(e=new de(u,t,null,!1)),l.push(e.o=new de(u,null,e,!0))}})),a.length){for(l.sort(n),ve(a),ve(l),o=0,u=l.length;o<u;++o)l[o].e=e=!e;for(var s,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;s=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((c=s[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(s=f.p.z,o=s.length-1;o>=0;--o)i.point((c=s[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}s=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function ve(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function xe(t){return Nt(t[0])<=wt?t[0]:$t(t[0])*((Nt(t[0])+wt)%Mt-wt)}function me(t,n){var e=xe(n),r=n[1],i=jt(r),o=[jt(e),-Pt(e),0],u=0,a=0,l=new y;1===i?r=bt+xt:-1===i&&(r=-bt-xt);for(var s=0,c=t.length;s<c;++s)if(f=(h=t[s]).length)for(var h,f,p=h[f-1],g=xe(p),d=p[1]/2+_t,v=jt(d),x=Pt(d),m=0;m<f;++m,g=b,v=M,x=E,p=w){var w=h[m],b=xe(w),_=w[1]/2+_t,M=jt(_),E=Pt(_),S=b-g,N=S>=0?1:-1,k=N*S,A=k>wt,P=v*M;if(l.add(At(P*N*jt(k),x*E+P*Pt(k))),u+=A?S+N*Mt:S,A^g>=e^b>=e){var T=yn(gn(p),gn(w));mn(T);var j=yn(o,T);mn(j);var $=(A^S>=0?-1:1)*zt(j[2]);(r>$||r===$&&(T[0]||T[1]))&&(a+=A^S>=0?1:-1)}}return(u<-1e-6||u<xt&&l<-1e-12)^1&a}function we(t,n,e,r){return function(i){var o,u,a,l=n(i),s=pe(),c=n(s),h=!1,f={point:p,lineStart:d,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=x,f.lineEnd=m,u=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=d,f.lineEnd=y,u=_(u);var t=me(o,r);u.length?(h||(i.polygonStart(),h=!0),ye(u,_e,t,e,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),u=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function g(t,n){l.point(t,n)}function d(){f.point=g,l.lineStart()}function y(){f.point=p,l.lineEnd()}function v(t,n){a.push([t,n]),c.point(t,n)}function x(){c.lineStart(),a=[]}function m(){v(a[0][0],a[0][1]),c.lineEnd();var t,n,e,r,l=c.clean(),f=s.result(),p=f.length;if(a.pop(),o.push(a),a=null,p)if(1&l){if((n=(e=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&f.push(f.pop().concat(f.shift())),u.push(f.filter(be))}return f}}function be(t){return t.length>1}function _e(t,n){return((t=t.x)[0]<0?t[1]-bt-xt:bt-t[1])-((n=n.x)[0]<0?n[1]-bt-xt:bt-n[1])}ae.invert=ae;var Me=we((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?wt:-wt,l=Nt(o-e);Nt(l-wt)<xt?(t.point(e,r=(r+u)/2>0?bt:-bt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&l>=wt&&(Nt(e-i)<xt&&(e-=i*xt),Nt(o-a)<xt&&(o-=a*xt),r=function(t,n,e,r){var i,o,u=jt(t-e);return Nt(u)>xt?kt((jt(n)*(o=Pt(r))*jt(e)-jt(r)*(i=Pt(n))*jt(t))/(i*o*u)):(n+r)/2}(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*bt,r.point(-wt,i),r.point(0,i),r.point(wt,i),r.point(wt,0),r.point(wt,-i),r.point(0,-i),r.point(-wt,-i),r.point(-wt,0),r.point(-wt,i);else if(Nt(t[0]-n[0])>xt){var o=t[0]<n[0]?wt:-wt;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-wt,-bt]);function Ee(t){var n=Pt(t),e=6*St,r=n>0,i=Nt(n)>xt;function o(t,e){return Pt(t)*Pt(e)>n}function u(t,e,r){var i=[1,0,0],o=yn(gn(t),gn(e)),u=dn(o,o),a=o[0],l=u-a*a;if(!l)return!r&&t;var s=n*u/l,c=-n*a/l,h=yn(i,o),f=xn(i,s);vn(f,xn(o,c));var p=h,g=dn(f,p),d=dn(p,p),y=g*g-d*(dn(f,f)-1);if(!(y<0)){var v=Ft(y),x=xn(p,(-g-v)/d);if(vn(x,f),x=pn(x),!r)return x;var m,w=t[0],b=e[0],_=t[1],M=e[1];b<w&&(m=w,w=b,b=m);var E=b-w,S=Nt(E-wt)<xt;if(!S&&M<_&&(m=_,_=M,M=m),S||E<xt?S?_+M>0^x[1]<(Nt(x[0]-w)<xt?_:M):_<=x[1]&&x[1]<=M:E>wt^(w<=x[0]&&x[0]<=b)){var N=xn(p,(-g+v)/d);return vn(N,f),[x,pn(N)]}}}function a(n,e){var i=r?t:wt-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return we(o,(function(t){var n,e,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(h,f){var p,g=[h,f],d=o(h,f),y=r?d?0:a(h,f):d?a(h+(h<0?wt:-wt),f):0;if(!n&&(s=l=d)&&t.lineStart(),d!==l&&(!(p=u(n,g))||ge(n,p)||ge(g,p))&&(g[2]=1),d!==l)c=0,d?(t.lineStart(),p=u(g,n),t.point(p[0],p[1])):(p=u(n,g),t.point(p[0],p[1],2),t.lineEnd()),n=p;else if(i&&n&&r^d){var v;y&e||!(v=u(g,n,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!d||n&&ge(n,g)||t.point(g[0],g[1]),n=g,l=d,e=y},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(s&&l)<<1}}}),(function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var u=Pt(n),a=jt(n),l=r*e;null==i?(i=n+r*Mt,o=n-l/2):(i=fe(u,i),o=fe(u,o),(r>0?i<o:i>o)&&(i+=r*Mt));for(var s,c=i;r>0?c>o:c<o;c-=l)s=pn([u,-a*Pt(c),-a*jt(c)]),t.point(s[0],s[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-wt,t-wt])}var Se,Ne,ke,Ae,Pe=1e9,Te=-Pe;function je(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var c=0,h=0;if(null==i||(c=u(i,a))!==(h=u(o,a))||l(i,o)<0^a>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+a+4)%4)!==h);else s.point(o[0],o[1])}function u(r,i){return Nt(r[0]-t)<xt?i>0?0:3:Nt(r[0]-e)<xt?i>0?2:1:Nt(r[1]-n)<xt?i>0?1:0:i>0?3:2}function a(t,n){return l(t.x,n.x)}function l(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){var l,s,c,h,f,p,g,d,y,v,x,m=u,w=pe(),b={point:M,lineStart:function(){b.point=E,s&&s.push(c=[]);v=!0,y=!1,g=d=NaN},lineEnd:function(){l&&(E(h,f),p&&y&&w.rejoin(),l.push(w.result()));b.point=M,y&&m.lineEnd()},polygonStart:function(){m=w,l=[],s=[],x=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var o,u,a=s[e],l=1,c=a.length,h=a[0],f=h[0],p=h[1];l<c;++l)o=f,u=p,f=(h=a[l])[0],p=h[1],u<=r?p>r&&(f-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(f-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),e=x&&n,i=(l=_(l)).length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&ye(l,a,n,o,u),u.polygonEnd());m=u,l=s=c=null}};function M(t,n){i(t,n)&&m.point(t,n)}function E(o,u){var a=i(o,u);if(s&&c.push([o,u]),v)h=o,f=u,p=a,v=!1,a&&(m.lineStart(),m.point(o,u));else if(a&&y)m.point(o,u);else{var l=[g=Math.max(Te,Math.min(Pe,g)),d=Math.max(Te,Math.min(Pe,d))],w=[o=Math.max(Te,Math.min(Pe,o)),u=Math.max(Te,Math.min(Pe,u))];!function(t,n,e,r,i,o){var u,a=t[0],l=t[1],s=0,c=1,h=n[0]-a,f=n[1]-l;if(u=e-a,h||!(u>0)){if(u/=h,h<0){if(u<s)return;u<c&&(c=u)}else if(h>0){if(u>c)return;u>s&&(s=u)}if(u=i-a,h||!(u<0)){if(u/=h,h<0){if(u>c)return;u>s&&(s=u)}else if(h>0){if(u<s)return;u<c&&(c=u)}if(u=r-l,f||!(u>0)){if(u/=f,f<0){if(u<s)return;u<c&&(c=u)}else if(f>0){if(u>c)return;u>s&&(s=u)}if(u=o-l,f||!(u<0)){if(u/=f,f<0){if(u>c)return;u>s&&(s=u)}else if(f>0){if(u<s)return;u<c&&(c=u)}return s>0&&(t[0]=a+s*h,t[1]=l+s*f),c<1&&(n[0]=a+c*h,n[1]=l+c*f),!0}}}}}(l,w,t,n,e,r)?a&&(m.lineStart(),m.point(o,u),x=!1):(y||(m.lineStart(),m.point(l[0],l[1])),m.point(w[0],w[1]),a||m.lineEnd(),x=!1)}g=o,d=u,y=a}return b}}var $e={sphere:Zt,point:Zt,lineStart:function(){$e.point=ze,$e.lineEnd=Fe},lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt};function Fe(){$e.point=$e.lineEnd=Zt}function ze(t,n){Ne=t*=St,ke=jt(n*=St),Ae=Pt(n),$e.point=Ie}function Ie(t,n){t*=St;var e=jt(n*=St),r=Pt(n),i=Nt(t-Ne),o=Pt(i),u=r*jt(i),a=Ae*e-ke*r*o,l=ke*e+Ae*r*o;Se.add(At(Ft(u*u+a*a),l)),Ne=t,ke=e,Ae=r}var Ze=[null,null],Le={type:"LineString",coordinates:Ze};function Oe(t,n){return Ze[0]=t,Ze[1]=n,function(t){return Se=new y,Ht(t,$e),+Se}(Le)}var qe={Feature:function(t,n){return Ce(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Ce(e[r].geometry,n))return!0;return!1}},Re={Sphere:function(){return!0},Point:function(t,n){return He(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(He(e[r],n))return!0;return!1},LineString:function(t,n){return Be(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Be(e[r],n))return!0;return!1},Polygon:function(t,n){return Ge(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Ge(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Ce(e[r],n))return!0;return!1}};function Ce(t,n){return!(!t||!Re.hasOwnProperty(t.type))&&Re[t.type](t,n)}function He(t,n){return 0===Oe(t,n)}function Be(t,n){for(var e,r,i,o=0,u=t.length;o<u;o++){if(0===(r=Oe(t[o],n)))return!0;if(o>0&&(i=Oe(t[o],t[o-1]))>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<mt*i)return!0;e=r}return!1}function Ge(t,n){return!!me(t.map(Ue),Ke(n))}function Ue(t){return(t=t.map(Ke)).pop(),t}function Ke(t){return[t[0]*St,t[1]*St]}function De(t,n){return(t&&qe.hasOwnProperty(t.type)?qe[t.type]:Ce)(t,n)}var Ve=t=>t,Xe=1/0,Je=Xe,Ye=-Xe,We=Ye;var Qe={point:function(t,n){t<Xe&&(Xe=t);t>Ye&&(Ye=t);n<Je&&(Je=n);n>We&&(We=n)},lineStart:Zt,lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt,result:function(){var t=[[Xe,Je],[Ye,We]];return Ye=We=-(Je=Xe=1/0),t}};function tr(t){return function(n){var e=new nr;for(var r in t)e[r]=t[r];return e.stream=n,e}}function nr(){}function er(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Ht(e,t.stream(Qe)),n(Qe.result()),null!=r&&t.clipExtent(r),t}function rr(t,n,e){return er(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])}),e)}nr.prototype={constructor:nr,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ir=Pt(30*St);function or(t,n){return+n?function(t,n){function e(r,i,o,u,a,l,s,c,h,f,p,g,d,y){var v=s-r,x=c-i,m=v*v+x*x;if(m>4*n&&d--){var w=u+f,b=a+p,_=l+g,M=Ft(w*w+b*b+_*_),E=zt(_/=M),S=Nt(Nt(_)-1)<xt||Nt(o-h)<xt?(o+h)/2:At(b,w),N=t(S,E),k=N[0],A=N[1],P=k-r,T=A-i,j=x*P-v*T;(j*j/m>n||Nt((v*P+x*T)/m-.5)>.3||u*f+a*p+l*g<ir)&&(e(r,i,o,u,a,l,k,A,S,w/=M,b/=M,_,d,y),y.point(k,A),e(k,A,S,w,b,_,s,c,h,f,p,g,d,y))}}return function(n){var r,i,o,u,a,l,s,c,h,f,p,g,d={point:y,lineStart:v,lineEnd:m,polygonStart:function(){n.polygonStart(),d.lineStart=w},polygonEnd:function(){n.polygonEnd(),d.lineStart=v}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function v(){c=NaN,d.point=x,n.lineStart()}function x(r,i){var o=gn([r,i]),u=t(r,i);e(c,h,s,f,p,g,c=u[0],h=u[1],s=r,f=o[0],p=o[1],g=o[2],16,n),n.point(c,h)}function m(){d.point=y,n.lineEnd()}function w(){v(),d.point=b,d.lineEnd=_}function b(t,n){x(r=t,n),i=c,o=h,u=f,a=p,l=g,d.point=x}function _(){e(c,h,s,f,p,g,i,o,r,u,a,l,16,n),d.lineEnd=m,m()}return d}}(t,n):function(t){return tr({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var ur=tr({point:function(t,n){this.stream.point(t*St,n*St)}});function ar(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,u){return[n+t*(o*=r),e-t*(u*=i)]}return o.invert=function(o,u){return[(o-n)/t*r,(e-u)/t*i]},o}(t,n,e,r,i);var u=Pt(o),a=jt(o),l=u*t,s=a*t,c=u/t,h=a/t,f=(a*e-u*n)/t,p=(a*n+u*e)/t;function g(t,o){return[l*(t*=r)-s*(o*=i)+n,e-s*t-l*o]}return g.invert=function(t,n){return[r*(c*t-h*n+f),i*(p-h*t-c*n)]},g}function lr(t){return function(t){var n,e,r,i,o,u,a,l,s,c,h=150,f=480,p=250,g=0,d=0,y=0,v=0,x=0,m=0,w=1,b=1,_=null,M=Me,E=null,S=Ve,N=.5;function k(t){return l(t[0]*St,t[1]*St)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Et,t[1]*Et]}function P(){var t=ar(h,0,0,w,b,m).apply(null,n(g,d)),r=ar(h,f-t[0],p-t[1],w,b,m);return e=le(y,v,x),a=ue(n,r),l=ue(e,a),u=or(a,N),T()}function T(){return s=c=null,k}return k.stream=function(t){return s&&c===t?s:s=ur(function(t){return tr({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(u(S(c=t)))))},k.preclip=function(t){return arguments.length?(M=t,_=void 0,T()):M},k.postclip=function(t){return arguments.length?(S=t,E=r=i=o=null,T()):S},k.clipAngle=function(t){return arguments.length?(M=+t?Ee(_=t*St):(_=null,Me),T()):_*Et},k.clipExtent=function(t){return arguments.length?(S=null==t?(E=r=i=o=null,Ve):je(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==E?null:[[E,r],[i,o]]},k.scale=function(t){return arguments.length?(h=+t,P()):h},k.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],P()):[f,p]},k.center=function(t){return arguments.length?(g=t[0]%360*St,d=t[1]%360*St,P()):[g*Et,d*Et]},k.rotate=function(t){return arguments.length?(y=t[0]%360*St,v=t[1]%360*St,x=t.length>2?t[2]%360*St:0,P()):[y*Et,v*Et,x*Et]},k.angle=function(t){return arguments.length?(m=t%360*St,P()):m*Et},k.reflectX=function(t){return arguments.length?(w=t?-1:1,P()):w<0},k.reflectY=function(t){return arguments.length?(b=t?-1:1,P()):b<0},k.precision=function(t){return arguments.length?(u=or(a,N=t*t),T()):Ft(N)},k.fitExtent=function(t,n){return rr(k,t,n)},k.fitSize=function(t,n){return function(t,n,e){return rr(t,[[0,0],n],e)}(k,t,n)},k.fitWidth=function(t,n){return function(t,n,e){return er(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])}),e)}(k,t,n)},k.fitHeight=function(t,n){return function(t,n,e){return er(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])}),e)}(k,t,n)},function(){return n=t.apply(this,arguments),k.invert=n.invert&&A,P()}}((function(){return t}))()}function sr(t,n){var e=Pt(n),r=1+Pt(t)*e;return[e*jt(t)/r,jt(n)/r]}function cr(){return lr(sr).scale(250).clipAngle(142)}sr.invert=function(t){return function(n,e){var r=Ft(n*n+e*e),i=t(r),o=jt(i),u=Pt(i);return[At(n*o,r*u),zt(r&&e*o/r)]}}((function(t){return 2*kt(t)}));const hr=1e-6;class fr{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>hr||Math.abs(this._y1-i)>hr)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class pr{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class gr{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,u=0,a=e.length;o<a;o+=3,u+=2){const a=2*e[o],l=2*e[o+1],s=2*e[o+2],c=t[a],h=t[a+1],f=t[l],p=t[l+1],g=t[s],d=t[s+1],y=f-c,v=p-h,x=g-c,m=d-h,w=2*(y*m-v*x);if(Math.abs(w)<1e-9){let i=1e9;const o=2*e[0];i*=Math.sign((t[o]-c)*m-(t[o+1]-h)*x),n=(c+g)/2-i*m,r=(h+d)/2+i*x}else{const t=1/w,e=y*y+v*v,i=x*x+m*m;n=c+(m*e-v*i)*t,r=h+(y*i-x*e)*t}i[u]=n,i[u+1]=r}let o,u,a,l=n[n.length-1],s=4*l,c=t[2*l],h=t[2*l+1];r.fill(0);for(let e=0;e<n.length;++e)l=n[e],o=s,u=c,a=h,s=4*l,c=t[2*l],h=t[2*l+1],r[o+2]=r[s]=a-h,r[o+3]=r[s+1]=c-u}render(t){const n=null==t?t=new fr:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:u}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),u=2*Math.floor(r/3),a=o[i],l=o[i+1],s=o[u],c=o[u+1];this._renderSegment(a,l,s,c,t)}let a,l=i[i.length-1];for(let n=0;n<i.length;++n){a=l,l=i[n];const e=2*Math.floor(r[l]/3),s=o[e],c=o[e+1],h=4*a,f=this._project(s,c,u[h+2],u[h+3]);f&&this._renderSegment(s,c,f[0],f[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new fr:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new fr:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new pr;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const u=this._regioncode(t,n),a=this._regioncode(e,r);0===u&&0===a?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,u,a))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,u=t.length;o<u;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+u-2)%u]&&n[(r+3)%i]==t[(o+u-1)%u]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const u=[];let a=o;do{const e=Math.floor(a/3);if(u.push(n[2*e],n[2*e+1]),a=a%3==2?a-2:a+1,i[a]!==t)break;a=r[a]}while(a!==o&&-1!==a);return u}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,u,a=null,l=n[e-2],s=n[e-1],c=this._regioncode(l,s),h=0;for(let f=0;f<e;f+=2)if(r=l,i=s,l=n[f],s=n[f+1],o=c,c=this._regioncode(l,s),0===o&&0===c)u=h,h=0,a?a.push(l,s):a=[l,s];else{let n,e,f,p,g;if(0===o){if(null===(n=this._clipSegment(r,i,l,s,o,c)))continue;[e,f,p,g]=n}else{if(null===(n=this._clipSegment(l,s,r,i,c,o)))continue;[p,g,e,f]=n,u=h,h=this._edgecode(e,f),u&&h&&this._edge(t,u,h,a,a.length),a?a.push(e,f):a=[e,f]}u=h,h=this._edgecode(p,g),u&&h&&this._edge(t,u,h,a,a.length),a?a.push(p,g):a=[p,g]}if(a)u=h,h=this._edgecode(a[0],a[1]),u&&h&&this._edge(t,u,h,a,a.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let u,a,l=i||o;8&l?(u=t+(e-t)*(this.ymax-n)/(r-n),a=this.ymax):4&l?(u=t+(e-t)*(this.ymin-n)/(r-n),a=this.ymin):2&l?(a=n+(r-n)*(this.xmax-t)/(e-t),u=this.xmax):(a=n+(r-n)*(this.xmin-t)/(e-t),u=this.xmin),i?(t=u,n=a,i=this._regioncode(t,n)):(e=u,r=a,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let u,a=Array.from(n);if((u=this._project(a[0],a[1],e,r))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let n,e=0,r=a.length,i=this._edgecode(a[r-2],a[r-1]);e<r;e+=2)n=i,i=this._edgecode(a[e],a[e+1]),n&&i&&(e=this._edge(t,n,i,a,e),r=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,u,a=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<a&&(u=this.ymin,o=t+(a=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<a&&(u=this.ymax,o=t+(a=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<a&&(o=this.xmax,u=n+(a=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<a&&(o=this.xmin,u=n+(a=i)*r)}return[o,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const dr=2*Math.PI,yr=Math.pow;function vr(t){return t[0]}function xr(t){return t[1]}function mr(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class wr{static from(t,n=vr,e=xr,r){return new wr("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let u=0;u<i;++u){const i=t[u];o[2*u]=n.call(r,i,u,t),o[2*u+1]=e.call(r,i,u,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new lt(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=mr(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new lt(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)u[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new gr(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:u}=this;if(u){const n=u.indexOf(t);return n>0&&(yield u[n-1]),void(n<u.length-1&&(yield u[n+1]))}const a=n[t];if(-1===a)return;let l=a,s=-1;do{if(yield s=o[l],l=l%3==2?l-2:l+1,o[l]!==t)return;if(l=i[l],-1===l){const n=e[(r[t]+1)%e.length];return void(n!==s&&(yield n))}}while(l!==a)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:u,triangles:a,points:l}=this;if(-1===r[t]||!l.length)return(t+1)%(l.length>>1);let s=t,c=yr(n-l[2*t],2)+yr(e-l[2*t+1],2);const h=r[t];let f=h;do{let r=a[f];const h=yr(n-l[2*r],2)+yr(e-l[2*r+1],2);if(h<c&&(c=h,s=r),f=f%3==2?f-2:f+1,a[f]!==t)break;if(f=u[f],-1===f){if(f=i[(o[t]+1)%i.length],f!==r&&yr(n-l[2*f],2)+yr(e-l[2*f+1],2)<c)return f;break}}while(f!==h);return s}render(t){const n=null==t?t=new fr:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const u=2*i[n],a=2*i[o];t.moveTo(e[u],e[u+1]),t.lineTo(e[a],e[a+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new fr:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,dr)}return e&&e.value()}renderHull(t){const n=null==t?t=new fr:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new pr;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new fr:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],u=2*i[t+1],a=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.lineTo(r[a],r[a+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new pr;return this.renderTriangle(t,n),n.value()}}const br=Math.PI,_r=br/2,Mr=180/br,Er=br/180,Sr=Math.atan2,Nr=Math.cos,kr=Math.max,Ar=Math.min,Pr=Math.sin,Tr=Math.sign||function(t){return t>0?1:t<0?-1:0},jr=Math.sqrt;function $r(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Fr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function zr(t,n){return[t[0]+n[0],t[1]+n[1],t[2]+n[2]]}function Ir(t){var n=jr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/n,t[1]/n,t[2]/n]}function Zr(t){return[Sr(t[1],t[0])*Mr,(n=kr(-1,Ar(1,t[2])),(n>1?_r:n<-1?-_r:Math.asin(n))*Mr)];var n}function Lr(t){const n=t[0]*Er,e=t[1]*Er,r=Nr(e);return[r*Nr(n),r*Pr(n),Pr(e)]}function Or(t){return $r((t=t.map((t=>Lr(t))))[0],Fr(t[2],t[1]))}function qr(t){const n=function(t){if(t.length<2)return{};let n=0;for(;isNaN(t[n][0]+t[n][1])&&n++<t.length;);const e=function(t){function n(n){return(n=t(n[0]*St,n[1]*St))[0]*=Et,n[1]*=Et,n}return t=le(t[0]*St,t[1]*St,t.length>2?t[2]*St:0),n.invert=function(n){return(n=t.invert(n[0]*St,n[1]*St))[0]*=Et,n[1]*=Et,n},n}(t[n]),r=cr().translate([0,0]).scale(1).rotate(e.invert([180,0]));t=t.map(r);const i=[];let o=1;for(let n=0,e=t.length;n<e;n++){let e=t[n][0]**2+t[n][1]**2;!isFinite(e)||e>1e32?i.push(n):e>o&&(o=e)}const u=1e6*jr(o);i.forEach((n=>t[n]=[u,0])),t.push([0,u]),t.push([-u,0]),t.push([0,-u]);const a=wr.from(t);a.projection=r;const{triangles:l,halfedges:s,inedges:c}=a;for(let e=0,r=s.length;e<r;e++)if(s[e]<0){const t=e%3==2?e-2:e+1,r=e%3==0?e+2:e-1,i=s[t],o=s[r];s[i]=o,s[o]=i,s[t]=s[r]=-1,l[e]=l[t]=l[r]=n,c[l[i]]=i%3==0?i+2:i-1,c[l[o]]=o%3==0?o+2:o-1,e+=2-e%3}else l[e]>t.length-3-1&&(l[e]=n);return a}(t),e=function(t){const{triangles:n}=t;if(!n)return[];const e=[];for(let t=0,r=n.length/3;t<r;t++){const r=n[3*t],i=n[3*t+1],o=n[3*t+2];r!==i&&i!==o&&e.push([r,o,i])}return e}(n),r=function(t,n){const e=new Set;return 2===n.length?[[0,1]]:(t.forEach((t=>{if(t[0]!==t[1]&&!(Or(t.map((t=>n[t])))<0))for(let n,r=0;r<3;r++)n=(r+1)%3,e.add(d([t[r],t[n]]).join("-"))})),Array.from(e,(t=>t.split("-").map(Number))))}(e,t),i=function(t,n){const e=[];t.forEach((t=>{for(let n=0;n<3;n++){const r=t[n],i=t[(n+1)%3];e[r]=e[r]||[],e[r].push(i)}})),0===t.length&&(2===n?(e[0]=[1],e[1]=[0]):1===n&&(e[0]=[]));return e}(e,t.length),o=function(t,n){function e(t,n){let e=t[0]-n[0],r=t[1]-n[1],i=t[2]-n[2];return e*e+r*r+i*i}return function(r,i,o){void 0===o&&(o=0);let u,a,l=o;const s=Lr([r,i]);do{u=o,o=null,a=e(s,Lr(n[u])),t[u].forEach((t=>{let r=e(s,Lr(n[t]));if(r<a)return a=r,o=t,void(l=t)}))}while(null!==o);return l}}(i,t),u=function(t,n){return t.map((t=>{const e=t.map((t=>n[t])).map(Lr);return Zr(Ir(zr(zr(Fr(e[1],e[0]),Fr(e[2],e[1])),Fr(e[0],e[2]))))}))}(e,t),{polygons:a,centers:l}=function(t,n,e){const r=[],i=t.slice();if(0===n.length){if(e.length<2)return{polygons:r,centers:i};if(2===e.length){const t=Lr(e[0]),n=Lr(e[1]),u=Ir(zr(t,n)),a=Ir(Fr(t,n)),l=Fr(u,a),s=[u,Fr(u,l),Fr(Fr(u,l),l),Fr(Fr(Fr(u,l),l),l)].map(Zr).map(o);return r.push(s),r.push(s.slice().reverse()),{polygons:r,centers:i}}}n.forEach(((t,n)=>{for(let e=0;e<3;e++){const i=t[e],o=t[(e+1)%3],u=t[(e+2)%3];r[i]=r[i]||[],r[i].push([o,u,n,[i,o,u]])}}));function o(t){let e=-1;return i.slice(n.length,1/0).forEach(((r,i)=>{r[0]===t[0]&&r[1]===t[1]&&(e=i+n.length)})),e<0&&(e=i.length,i.push(t)),e}return{polygons:r.map((t=>{const n=[t[0][2]];let r=t[0][1];for(let e=1;e<t.length;e++)for(let e=0;e<t.length;e++)if(t[e][0]==r){r=t[e][1],n.push(t[e][2]);break}if(n.length>2)return n;if(2==n.length){const r=Rr(e[t[0][3][0]],e[t[0][3][1]],i[n[0]]),u=Rr(e[t[0][3][2]],e[t[0][3][0]],i[n[0]]),a=o(r),l=o(u);return[n[0],l,n[1],a]}})),centers:i}}(u,e,t),s=function(t){const n=[];return t.forEach((t=>{if(!t)return;let e=t[t.length-1];for(let r of t)r>e&&n.push([e,r]),e=r})),n}(a),c=function(t,n){const e=new Set,r=[];t.map((t=>{if(!(Or(t.map((t=>n[t>n.length?0:t])))>1e-12))for(let n=0;n<3;n++){let r=[t[n],t[(n+1)%3]],i=`${r[0]}-${r[1]}`;e.has(i)?e.delete(i):e.add(`${r[1]}-${r[0]}`)}}));const i=new Map;let o;if(e.forEach((t=>{t=t.split("-").map(Number),i.set(t[0],t[1]),o=t[0]})),void 0===o)return r;let u=o;do{r.push(u);let t=i.get(u);i.set(u,-1),u=t}while(u>-1&&u!==o);return r}(e,t),h=function(t,n){return function(e){const r=new Map,i=new Map;return t.forEach(((t,n)=>{const o=t.join("-");r.set(o,e[n]),i.set(o,!0)})),n.forEach((t=>{let n=0,e=-1;for(let i=0;i<3;i++){let o=d([t[i],t[(i+1)%3]]).join("-");r.get(o)>n&&(n=r.get(o),e=o)}i.set(e,!1)})),t.map((t=>i.get(t.join("-"))))}}(r,e);return{delaunay:n,edges:r,triangles:e,centers:l,neighbors:i,polygons:a,mesh:s,hull:c,urquhart:h,find:o}}function Rr(t,n,e){t=Lr(t),n=Lr(n),e=Lr(e);const r=Tr($r(Fr(n,t),e));return Zr(Ir(zr(t,n)).map((t=>r*t)))}function Cr(t){const n=function(t){if(n.delaunay=null,n._data=t,"object"==typeof n._data&&"FeatureCollection"===n._data.type&&(n._data=n._data.features),"object"==typeof n._data){const t=n._data.map((t=>[n._vx(t),n._vy(t),t])).filter((t=>isFinite(t[0]+t[1])));n.points=t.map((t=>[t[0],t[1]])),n.valid=t.map((t=>t[2])),n.delaunay=qr(n.points)}return n};return n._vx=function(t){return"object"==typeof t&&"type"in t?oe(t)[0]:0 in t?t[0]:void 0},n._vy=function(t){return"object"==typeof t&&"type"in t?oe(t)[1]:1 in t?t[1]:void 0},n.x=function(t){return t?(n._vx=t,n):n._vx},n.y=function(t){return t?(n._vy=t,n):n._vy},n.polygons=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const e={type:"FeatureCollection",features:[]};return 0===n.valid.length||(n.delaunay.polygons.forEach(((t,r)=>e.features.push({type:"Feature",geometry:t?{type:"Polygon",coordinates:[[...t,t[0]].map((t=>n.delaunay.centers[t]))]}:null,properties:{site:n.valid[r],sitecoordinates:n.points[r],neighbours:n.delaunay.neighbors[r]}}))),1===n.valid.length&&e.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:n.valid[0],sitecoordinates:n.points[0],neighbours:[]}})),e},n.triangles=function(t){return void 0!==t&&n(t),!!n.delaunay&&{type:"FeatureCollection",features:n.delaunay.triangles.map(((t,e)=>((t=t.map((t=>n.points[t]))).center=n.delaunay.centers[e],t))).filter((t=>Or(t)>0)).map((t=>({type:"Feature",properties:{circumcenter:t.center},geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))}},n.links=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const e=n.delaunay.edges.map((t=>Oe(n.points[t[0]],n.points[t[1]]))),r=n.delaunay.urquhart(e);return{type:"FeatureCollection",features:n.delaunay.edges.map(((t,i)=>({type:"Feature",properties:{source:n.valid[t[0]],target:n.valid[t[1]],length:e[i],urquhart:!!r[i]},geometry:{type:"LineString",coordinates:[n.points[t[0]],n.points[t[1]]]}})))}},n.mesh=function(t){return void 0!==t&&n(t),!!n.delaunay&&{type:"MultiLineString",coordinates:n.delaunay.edges.map((t=>[n.points[t[0]],n.points[t[1]]]))}},n.cellMesh=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const{centers:e,polygons:r}=n.delaunay,i=[];for(const t of r)if(t)for(let n=t.length,r=t[n-1],o=t[0],u=0;u<n;r=o,o=t[++u])o>r&&i.push([e[r],e[o]]);return{type:"MultiLineString",coordinates:i}},n._found=void 0,n.find=function(t,e,r){if(n._found=n.delaunay.find(t,e,n._found),!r||Oe([t,e],n.points[n._found])<r)return n._found},n.hull=function(t){void 0!==t&&n(t);const e=n.delaunay.hull,r=n.points;return 0===e.length?null:{type:"Polygon",coordinates:[[...e.map((t=>r[t])),r[e[0]]]]}},t?n(t):n}function Hr(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function Br(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Gr(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ur(){}var Kr=.7,Dr=1/Kr,Vr="\\s*([+-]?\\d+)\\s*",Xr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yr=/^#([0-9a-f]{3,8})$/,Wr=new RegExp("^rgb\\("+[Vr,Vr,Vr]+"\\)$"),Qr=new RegExp("^rgb\\("+[Jr,Jr,Jr]+"\\)$"),ti=new RegExp("^rgba\\("+[Vr,Vr,Vr,Xr]+"\\)$"),ni=new RegExp("^rgba\\("+[Jr,Jr,Jr,Xr]+"\\)$"),ei=new RegExp("^hsl\\("+[Xr,Jr,Jr]+"\\)$"),ri=new RegExp("^hsla\\("+[Xr,Jr,Jr,Xr]+"\\)$"),ii={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function oi(){return this.rgb().formatHex()}function ui(){return this.rgb().formatRgb()}function ai(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Yr.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?li(n):3===e?new fi(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?si(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?si(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Wr.exec(t))?new fi(n[1],n[2],n[3],1):(n=Qr.exec(t))?new fi(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ti.exec(t))?si(n[1],n[2],n[3],n[4]):(n=ni.exec(t))?si(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=ei.exec(t))?yi(n[1],n[2]/100,n[3]/100,1):(n=ri.exec(t))?yi(n[1],n[2]/100,n[3]/100,n[4]):ii.hasOwnProperty(t)?li(ii[t]):"transparent"===t?new fi(NaN,NaN,NaN,0):null}function li(t){return new fi(t>>16&255,t>>8&255,255&t,1)}function si(t,n,e,r){return r<=0&&(t=n=e=NaN),new fi(t,n,e,r)}function ci(t){return t instanceof Ur||(t=ai(t)),t?new fi((t=t.rgb()).r,t.g,t.b,t.opacity):new fi}function hi(t,n,e,r){return 1===arguments.length?ci(t):new fi(t,n,e,null==r?1:r)}function fi(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function pi(){return"#"+di(this.r)+di(this.g)+di(this.b)}function gi(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function di(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function yi(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new xi(t,n,e,r)}function vi(t){if(t instanceof xi)return new xi(t.h,t.s,t.l,t.opacity);if(t instanceof Ur||(t=ai(t)),!t)return new xi;if(t instanceof xi)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,l=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=l<.5?o+i:2-o-i,u*=60):a=l>0&&l<1?0:u,new xi(u,a,l,t.opacity)}function xi(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function mi(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Br(Ur,ai,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:oi,formatHex:oi,formatHsl:function(){return vi(this).formatHsl()},formatRgb:ui,toString:ui}),Br(fi,hi,Gr(Ur,{brighter:function(t){return t=null==t?Dr:Math.pow(Dr,t),new fi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Kr:Math.pow(Kr,t),new fi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pi,formatHex:pi,formatRgb:gi,toString:gi})),Br(xi,(function(t,n,e,r){return 1===arguments.length?vi(t):new xi(t,n,e,null==r?1:r)}),Gr(Ur,{brighter:function(t){return t=null==t?Dr:Math.pow(Dr,t),new xi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Kr:Math.pow(Kr,t),new xi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new fi(mi(t>=240?t-240:t+120,i,r),mi(t,i,r),mi(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var wi=t=>()=>t;function bi(t){return 1==(t=+t)?_i:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):wi(isNaN(n)?e:n)}}function _i(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):wi(isNaN(t)?n:t)}var Mi=function t(n){var e=bi(n);function r(t,n){var r=e((t=hi(t)).r,(n=hi(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),u=_i(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}return r.gamma=t,r}(1);function Ei(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function Si(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=$i(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}}function Ni(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ki(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Ai(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=$i(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var Pi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ti=new RegExp(Pi.source,"g");function ji(t,n){var e,r,i,o=Pi.lastIndex=Ti.lastIndex=0,u=-1,a=[],l=[];for(t+="",n+="";(e=Pi.exec(t))&&(r=Ti.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,l.push({i:u,x:ki(e,r)})),o=Ti.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)a[(e=l[r]).i]=e.x(t);return a.join("")})}function $i(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?wi(n):("number"===i?ki:"string"===i?(e=ai(n))?(n=e,Mi):ji:n instanceof ai?Mi:n instanceof Date?Ni:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?Si:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?Ai:ki:Ei))(t,n)}function Fi(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function zi(t){return+t}var Ii=[0,1];function Zi(t){return t}function Li(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function Oi(t,n,e){var r=t[0],i=t[1],o=n[0],u=n[1];return i<r?(r=Li(i,r),o=e(u,o)):(r=Li(r,i),o=e(o,u)),function(t){return o(r(t))}}function qi(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<r;)i[u]=Li(t[u],t[u+1]),o[u]=e(n[u],n[u+1]);return function(n){var e=g(t,n,1,r)-1;return o[e](i[e](n))}}function Ri(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ci(){var t,n,e,r,i,o,u=Ii,a=Ii,l=$i,s=Zi;function c(){var t,n,e,l=Math.min(u.length,a.length);return s!==Zi&&(t=u[0],n=u[l-1],t>n&&(e=t,t=n,n=e),s=function(e){return Math.max(t,Math.min(n,e))}),r=l>2?qi:Oi,i=o=null,h}function h(n){return null==n||isNaN(n=+n)?e:(i||(i=r(u.map(t),a,l)))(t(s(n)))}return h.invert=function(e){return s(n((o||(o=r(a,u.map(t),ki)))(e)))},h.domain=function(t){return arguments.length?(u=Array.from(t,zi),c()):u.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=Fi,c()},h.clamp=function(t){return arguments.length?(s=!!t||Zi,c()):s!==Zi},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function Hi(){return Ci()(Zi,Zi)}function Bi(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Gi(t){return(t=Bi(Math.abs(t)))?t[1]:NaN}var Ui,Ki=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Di(t){if(!(n=Ki.exec(t)))throw new Error("invalid format: "+t);var n;return new Vi({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Vi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Xi(t,n){var e=Bi(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Di.prototype=Vi.prototype,Vi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ji={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Xi(100*t,n),r:Xi,s:function(t,n){var e=Bi(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Ui=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Bi(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Yi(t){return t}var Wi,Qi,to,no=Array.prototype.map,eo=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ro(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?Yi:(n=no.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],u=0,a=n[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(t.substring(i-=a,i+a)),!((l+=a+1)>r));)a=n[u=(u+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",u=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Yi:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(no.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=Di(t)).fill,e=t.align,h=t.sign,f=t.symbol,p=t.zero,g=t.width,d=t.comma,y=t.precision,v=t.trim,x=t.type;"n"===x?(d=!0,x="g"):Ji[x]||(void 0===y&&(y=12),v=!0,x="g"),(p||"0"===n&&"="===e)&&(p=!0,n="0",e="=");var m="$"===f?i:"#"===f&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",w="$"===f?o:/[%p]/.test(x)?l:"",b=Ji[x],_=/[defgprs%]/.test(x);function M(t){var i,o,l,f=m,M=w;if("c"===x)M=b(t)+M,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),y),v&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:s:"-"===h||"("===h?"":h)+f,M=("s"===x?eo[8+Ui/3]:"")+M+(E&&"("===h?")":""),_)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){M=(46===l?u+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}d&&!p&&(t=r(t,1/0));var S=f.length+t.length+M.length,N=S<g?new Array(g-S+1).join(n):"";switch(d&&p&&(t=r(N+t,N.length?g-M.length:1/0),N=""),e){case"<":t=f+t+M+N;break;case"=":t=f+N+t+M;break;case"^":t=N.slice(0,S=N.length>>1)+f+t+M+N.slice(S);break;default:t=N+f+t+M}return a(t)}return y=void 0===y?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,n){var e=h(((t=Di(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Gi(n)/3))),i=Math.pow(10,-r),o=eo[8+r/3];return function(t){return e(i*t)+o}}}}function io(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=v?i*=10:o>=x?i*=5:o>=m&&(i*=2),n<t?-i:i}(t,n,e);switch((r=Di(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Gi(n)/3)))-Gi(Math.abs(t)))}(o,u))||(r.precision=i),to(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Gi(n)-Gi(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Gi(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Qi(r)}function oo(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,u,a=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(u=w(t,n,e))||!isFinite(u))return[];if(u>0){let e=Math.round(t/u),r=Math.round(n/u);for(e*u<t&&++e,r*u>n&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)*u}else{u=-u;let e=Math.round(t*u),r=Math.round(n*u);for(e/u<t&&++e,r/u>n&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)/u}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return io(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),u=0,a=o.length-1,l=o[u],s=o[a],c=10;for(s<l&&(i=l,l=s,s=i,i=u,u=a,a=i);c-- >0;){if((i=w(l,s,e))===r)return o[u]=l,o[a]=s,n(o);if(i>0)l=Math.floor(l/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function uo(){var t=Hi();return t.copy=function(){return Ri(t,uo())},Hr.apply(t,arguments),oo(t)}function ao(t,n){return t.map((function(t){var e,r=[];return t.forEach((function(t){if(e){var i=180*Oe(t,e)/Math.PI;if(i>n)for(var o=function(t,n){var e=t[0]*St,r=t[1]*St,i=n[0]*St,o=n[1]*St,u=Pt(r),a=jt(r),l=Pt(o),s=jt(o),c=u*Pt(e),h=u*jt(e),f=l*Pt(i),p=l*jt(i),g=2*zt(Ft(It(o-r)+u*l*It(i-e))),d=jt(g),y=g?function(t){var n=jt(t*=g)/d,e=jt(g-t)/d,r=e*c+n*f,i=e*h+n*p,o=e*a+n*s;return[At(i,r)*Et,At(o,Ft(r*r+i*i))*Et]}:function(){return[e*Et,r*Et]};return y.distance=g,y}(e,t),u=1/Math.ceil(i/n),a=u;a<1;)r.push(o(a)),a+=u}r.push(e=t)})),r}))}function lo(t,n){var e={type:"Polygon",coordinates:t},r=a(Dn(e),2),i=a(r[0],2),o=i[0],u=i[1],l=a(r[1],2),s=l[0],c=l[1];if(Math.min(Math.abs(s-o),Math.abs(c-u))<n)return[];var h=o>s||c>=89||u<=-89;return function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.minLng,r=n.maxLng,i=n.minLat,o=n.maxLat,u=Math.round(Math.pow(360/t,2)/Math.PI),a=(1+Math.sqrt(5))/2,l=function(t){return t/a*360%360-180},s=function(t){return Math.acos(2*t/u-1)/Math.PI*180-90},c=function(t){return u*(Math.cos((t+90)*Math.PI/180)+1)/2},h=[void 0!==o?Math.ceil(c(o)):0,void 0!==i?Math.floor(c(i)):u-1],f=void 0===e&&void 0===r?function(){return!0}:void 0===e?function(t){return t<=r}:void 0===r?function(t){return t>=e}:r>=e?function(t){return t>=e&&t<=r}:function(t){return t>=e||t<=r},p=[],g=h[0];g<=h[1];g++){var d=l(g);f(d)&&p.push([d,s(g)])}return p}(n,{minLng:o,maxLng:s,minLat:u,maxLat:c}).filter((function(t){return so(t,e,h)}))}function so(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?De(n,t):yt(t,n)}Wi=ro({thousands:",",grouping:[3],currency:["$",""]}),Qi=Wi.format,to=Wi.formatPrefix;var co=window.THREE?window.THREE:{BufferGeometry:n.BufferGeometry,Float32BufferAttribute:n.Float32BufferAttribute},ho=(new co.BufferGeometry).setAttribute?"setAttribute":"addAttribute",fo=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&i(t,n)}(c,t);var n,r,o,s=u(c);function c(t,n,e,r,i,o,u){var h;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c),(h=s.call(this)).type="ConicPolygonBufferGeometry",h.parameters={polygonGeoJson:t,startHeight:n,endHeight:e,closedBottom:r,closedTop:i,includeSides:o,curvatureResolution:u},n=n||0,e=e||1,r=void 0===r||r,i=void 0===i||i,o=void 0===o||o;var f=function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).resolution,e=void 0===n?1/0:n,r=ao(t,e),i=_(r),o=lo(t,e),u=[].concat(l(i),l(o)),s={type:"Polygon",coordinates:t},c=a(Dn(s),2),h=a(c[0],2),f=h[0],p=h[1],g=a(c[1],2),y=g[0],v=g[1],x=f>y||v>=89||p<=-89,m=[];if(x){var w=Cr(u).triangles(),M=new Map(u.map((function(t,n){var e=a(t,2),r=e[0],i=e[1];return["".concat(r,"-").concat(i),n]})));w.features.forEach((function(t){var n,e=t.geometry.coordinates[0].slice(0,3).reverse(),r=[];if(e.forEach((function(t){var n=a(t,2),e=n[0],i=n[1],o="".concat(e,"-").concat(i);M.has(o)&&r.push(M.get(o))})),3===r.length){if(r.some((function(t){return t<i.length}))&&!so(t.properties.circumcenter,s,x))return;(n=m).push.apply(n,r)}}))}else if(o.length)!function(){for(var t=lt.from(u),n=function(n,e){var r,o=[2,1,0].map((function(e){return t.triangles[n+e]})),a=o.map((function(t){return u[t]}));if(o.some((function(t){return t<i.length}))&&!so([0,1].map((function(t){return b(a,(function(n){return n[t]}))})),s,x))return"continue";(r=m).push.apply(r,l(o))},e=0,r=t.triangles.length;e<r;e+=3)n(e)}();else{var E=J.flatten(r),S=E.vertices,N=E.holes;m=J(S,void 0===N?[]:N,2)}var k=uo(d(u,(function(t){return t[0]})),[0,1]),A=uo(d(u,(function(t){return t[1]})),[0,1]),P=u.map((function(t){var n=a(t,2),e=n[0],r=n[1];return[k(e),A(r)]}));return{contour:r,triangles:{points:u,indices:m,uvs:P}}}(t,{resolution:u=u||5}),p=f.contour,g=f.triangles,y=_(g.uvs),v=[],x=[],m=[],w=0,M=function(t){var n=Math.round(v.length/3),e=m.length;v=v.concat(t.vertices),x=x.concat(t.uvs),m=m.concat(n?t.indices.map((function(t){return t+n})):t.indices),h.addGroup(e,m.length-e,w++)};function E(t,n){var e=t.map((function(t){return t.map((function(t){var e=a(t,2),r=e[0];return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-t)*Math.PI/180,i=(90-n)*Math.PI/180;return[e*Math.sin(r)*Math.cos(i),e*Math.cos(r),e*Math.sin(r)*Math.sin(i)]}(e[1],r,n)}))}));return J.flatten(e)}function S(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{indices:n?g.indices:g.indices.slice().reverse(),vertices:E([g.points],t).vertices,uvs:y}}return o&&M(function(){for(var t=E(p,n),r=t.vertices,i=t.holes,o=E(p,e).vertices,u=_([o,r]),a=Math.round(o.length/3),l=new Set(i),s=0,c=[],h=0;h<a;h++){var f=h+1;if(f===a)f=s;else if(l.has(f)){var g=f;f=s,s=g}c.push(h,h+a,f+a),c.push(f+a,f,h)}for(var d=[],y=1;y>=0;y--)for(var v=0;v<a;v+=1)d.push(v/(a-1),y);return{indices:c,vertices:u,uvs:d}}()),r&&M(S(n,!1)),i&&M(S(e,!0)),h.setIndex(m),h[ho]("position",new co.Float32BufferAttribute(v,3)),h[ho]("uv",new co.Float32BufferAttribute(x,2)),h.computeVertexNormals(),h}return n=c,r&&e(n.prototype,r),o&&e(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}(co.BufferGeometry);t.ConicPolygonBufferGeometry=fo,t.ConicPolygonGeometry=fo,Object.defineProperty(t,"__esModule",{value:!0})}));
